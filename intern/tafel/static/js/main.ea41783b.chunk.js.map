{"version":3,"sources":["components/Defaults.js","components/functions.js","components/Platz.js","components/DayPicker.js","components/Belegungstag.js","components/BelForm.js","components/Belegung.js","components/Routing.js","components/App.js","index.js"],"names":["config","_config","testuser","id","vorname","nachname","permissions","Object","defineProperty","hostname","protokoll","loginPage","prod","IMPORTANT","messages","gast","mitglied","veranstaltung","spieleranzahl","jugendvorrecht","erwachsenenvorrecht","einzeldauer","doppeldauer","turnier","turnierspieldauer","zeit","platzbelegt","i","anzahlPlaetze","platzArray","push","NONE","MANNSCHAFTSFUEHRER","WIRT","T_ALL_PERMISSIONS","VORSTAND","ADMINISTRATOR","formatDate","d","month","getMonth","day","getDate","year","getFullYear","length","join","spielerzusatz","geburtsdatum","schnupper","aktuellesJahr","Date","geburtsjahr","zusatz","Number","replace","servertimeNow","servertime","parseCookie","document","cookie","str","split","map","v","reduce","acc","decodeURIComponent","trim","getTimetable","belegungen","endeTag","setHours","timetable","getTime","Config","slotMinimalMinutes","tagesZeit","toTimeString","substr","bKey","sa","starts_at","anzahlSlots","ends_at","saTmp","cTmp","court","platzBelegt","Platz","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleWindowSizeChange","setState","zumBelegungstag","state","courtData","isLoading","error","width","window","innerWidth","prevProps","_this$props","fetchPlatz","_this$props2","uPermissions","_this2","userIsAllowed","url","addEventListener","fetch","credentials","then","result","ok","redirected","location","href","json","records","r","spieler","k","cn","computeBelClasses","booking_type","formatSpieler","platzWide","match","react_default","a","createElement","key","className","substring","comment","Link","to","pathname","c","op","removeEventListener","Component","p1vn","charAt","p1nn","p1geb","schnupper1","p2vn","p2nn","p2geb","schnupper2","p3vn","p3nn","p3geb","schnupper3","p4vn","p4nn","p4geb","schnupper4","s","RegExp","e","bookingType","dauer","bt","classNames","list","MenuItem","_ref","text","selected","concat","Arrow","_ref2","ArrowLeft","ArrowRight","DayPicker","onSelect","onClickHandler","startswith","end","setDate","daypickerMaxDays","start","dt","arr","name","toLocaleDateString","weekday","getDateArray","menu","el","DayPicker_MenuItem","build_default","data","arrowLeft","arrowRight","Belegungstag","dayDate","params","isNaN","setDay","bind","dString","firstDaypickerDay","smartphoneWidth","daypickerDaysBeforeToday","courtDiv","Belegungstag_Zeitleiste","src","alt","components_Platz","components_DayPicker","react_swipeable_views_lib_default","Belegungstag_Legende","daypickerDaysBeforeTodayWide","Zeitleiste","dailyStartTime","dailyEndTime","m","toString","padStart","index","Fragment","Legende","BelForm","handleChange","assertThisInitialized","handleSave","handleDelete","_r$starts_at$split","_r$starts_at$split2","slicedToArray","sd","st","scd","ssd","dateIsToday","valueOf","deleteActive","user_id","p1id","p2id","p3id","p4id","includes","userId","Permissions","_r$ends_at$split","_r$ends_at$split2","ed","et","sdA","spieltag","startsAtDate","endsAtDate","startsAt","endsAt","p1","p2","p3","p4","p1Schn","p2Schn","p3Schn","p4Schn","belegungenAbJetzt","zurTafel","saveActive","endeActive","admin","overbooked","jugend","nichtVollBerechtigte","isLoading1","isLoading2","courtBelegt","Error","catch","_this3","_this$state","Redirect","condMF","onChange","value","disabled","startsAtMsgClass","startsAtMsgTxt","keys","ttl","p1MsgClass","p1MsgTxt","p1MsgFormCtrl","commentMsgClass","commentMsgTxt","type","placeholder","onClick","_this4","preventDefault","parameters","rc","returncode","logurl","buchungenlog","_Messages$platzbelegt","Messages","_this5","sdStr","jetzt","platzbuchungen","_this6","target","endsAtViertel","endsAtStd","toLocaleString","minimumIntegerDigits","useGrouping","condEinGast","condEinMitglied","condEinSpielerErwVoll","condDoppelteSpieler","condUserIstSpieler","datestring","hd","Holidays","init","condSonnOderFeiertag","isHoliday","getDay","ende","pKeys","forEach","p","gastId","mitgliedId","isJugendlicher","saveActiveMerker","_Messages$spieleranza","p1msgClass","_Messages$spieleranza2","_Messages$spieleranza3","_","uniq","_Messages$spieleranza4","_Messages$spieleranza5","_Messages$veranstaltu","dToday","getHours","getMinutes","maxMinutesDistance","eveningTime","_Messages$erwachsenen","_Messages$zeit","singleTime","_Messages$einzeldauer","doubleTime","_Messages$doppeldauer","turnierTime","_Messages$turnierspie","_Messages$turnier","Belegung","belegung","_this$props$location$","updateBel","_this$props$location$2","newBel","console","log","components_BelForm","getEmptyBel","Routing","Switch","Route","exact","path","render","components_Belegung","assign","components_Belegungstag","App","user","isLoggedIn","renderData","checkUser","setPermission","res","retcode","components_Routing","ReactDOM","BrowserRouter","components_App","getElementById"],"mappings":"wTAKMA,GAAMC,EAAA,CACVC,SAAU,CAACC,GAAG,IAAKC,QAAQ,OAAQC,SAAS,gBAAiBC,YAAa,QADhEC,OAAAC,EAAA,EAAAD,CAAAN,EAAA,WAGC,CAACE,GAAG,IAAKC,QAAQ,OAAQC,SAAS,iBAAkBC,YAAa,MAHlEC,OAAAC,EAAA,EAAAD,CAAAN,EAAA,kBAIO,KAJPM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,kBAKO,KALPM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,gBAMK,GANLM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,aAOE,IAPFM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,mBAQQ,KARRM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,2BASgB,GAThBM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,+BAUoB,GAVpBM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,eAWI,gCAXJM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,iBAYM,yBAZNM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,iBAcM,GAdNM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,eAeI,IAfJM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,cAgBG,MAhBHM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,qBAiBU,IAjBVM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,aAkBE,IAlBFM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,aAmBE,KAnBFM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,cAoBG,KApBHM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,SAqBF,GArBEM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,aAsBE,IAtBFM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,YAuBC,YAvBDM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,cAwBG,UAxBHM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,qBAyBU,MAzBVM,OAAAC,EAAA,EAAAD,CAAAN,EAAA,YA0BC,gBA1BDA,GA6BVD,EAAOS,SAAW,YAClBT,EAAOU,UAAY,UACnBV,EAAOW,UAAY,oBACnBX,EAAOY,MAAO,EA2BhB,IAnBA,IAAMC,EAAY,cAKLC,EAAW,CACtBC,KAAM,CAACF,GAJM,EAIa,4GAC1BG,SAAU,CAACH,GALE,EAKiB,iGAC9BI,cAAe,CAACJ,GALL,EAKsB,8FACjCK,cAAe,CAACL,GAPH,EAOsB,oCACnCM,eAAgB,CATN,aAEC,EAOiB,qEAC5BC,oBAAqB,CAACP,GATT,EAS4B,0HACzCQ,YAAa,CAACR,GAVD,EAUoB,iDACjCS,YAAa,CAACT,GAXD,EAWoB,kDACjCU,QAAS,CAbC,aAEC,EAWU,uPACrBC,kBAAmB,CAACX,GAbP,EAa0B,uPACvCY,KAAM,CAACZ,GAdM,EAca,yCAC1Ba,YAAc,CAACb,GAfF,EAeqB,4BAE3Bc,EAAI,EAAGA,GAAK3B,EAAO4B,cAAeD,IACzC3B,EAAO6B,WAAWC,KAAKH,GAIlB,IAAMrB,EAAc,CAWvByB,KAAO,EACPC,mBAAqB,GACrBC,KAAO,GACPC,kBAAoB,IACpBC,SAAW,IACXC,cAAgB,OAGLpC,ICtFFqC,EAAa,SAACC,GACzB,IAAIC,EAAQ,IAAMD,EAAEE,WAAa,GAC/BC,EAAM,GAAKH,EAAEI,UACbC,EAAOL,EAAEM,cAKX,OAHIL,EAAMM,OAAS,IAAGN,EAAQ,IAAMA,GAChCE,EAAII,OAAS,IAAGJ,EAAM,IAAMA,GAEzB,CAACE,EAAMJ,EAAOE,GAAKK,KAAK,MAkBpBC,EAAgB,SAACC,EAAcC,GAC1C,IAAIC,EAAgB,IAAIC,KACxBD,EAAgBA,EAAcN,cAC9B,IAAIQ,EAAc,IAAID,KAAKH,GAIvBK,EAAS,MAFGH,GADhBE,EAAcA,EAAYR,eACqB,GAEjB,MAAQ,KAA6B,IAAtBU,OAAOL,GAAmB,QAAU,IAAM,IAGvF,OADAI,GADAA,EAASA,EAAOE,QAAQ,KAAM,MACdA,QAAQ,KAAM,KAmBnBC,EAAgB,WAC3B,IACMC,EADUC,EAAYC,SAASC,QACX,WAE1B,OADW,IAAIT,KAAKG,OAAOG,KAKvBC,EAAc,SAAAG,GAAG,OACrBA,EACGC,MAAM,KACNC,IAAI,SAAAC,GAAC,OAAIA,EAAEF,MAAM,OACjBG,OAAO,SAACC,EAAKF,GAEZ,OADAE,EAAIC,mBAAmBH,EAAE,GAAGI,SAAWD,mBAAmBH,EAAE,GAAGI,QACxDF,GACN,KAuCA,SAASG,EAAaC,GAK3B,IAAI7C,EAAO,IAAI0B,KACXoB,EAAU,IAAIpB,KAGlB1B,EAAK+C,SAAS,EAAG,EAAG,EAAG,GACvBD,EAAQC,SAAS,GAAI,EAAG,EAAG,GAE3B,IADA,IAAMC,EAAY,GACXhD,GAAQ8C,EAAS9C,EAAO,IAAI0B,KAAK1B,EAAKiD,UAAYC,EAAOC,oBAAqB,CACnF,IAAMC,EAAYpD,EAAKqD,eAAeC,OAAO,EAAG,GAChDN,EAAUI,GAAa,GACvB,IAAK,IAAIlD,EAAI,EAAGA,GAAKgD,EAAO/C,cAAeD,IACzC8C,EAAUI,GAAW/C,KAAKH,GAS9B,IAAK,IAAIqD,KAAQV,EAKf,IAJA,IAAIW,EAAK,IAAI9B,KAAKmB,EAAWU,GAAME,WAG/BC,GAFK,IAAIhC,KAAKmB,EAAWU,GAAMI,SAEXH,GAAMN,EAAOC,mBAC5BjD,EAAI,EAAGA,EAAIwD,EAAaxD,IAAK,CACpC,IAAI0D,EAAQ,IAAIlC,KAAK8B,EAAGP,UAAa/C,EAAIgD,EAAOC,oBAC5CU,EAAOhC,OAAOgB,EAAWU,GAAMO,OAAS,EAC5Cd,EAAUY,EAAMP,eAAeC,OAAO,EAAG,IAAIO,GAAQX,EAAOa,YAIhE,OAAOf,MC1IHgB,cACJ,SAAAA,EAAYC,GAAO,IAAAC,EAAA,OAAApF,OAAAqF,EAAA,EAAArF,CAAAsF,KAAAJ,IACjBE,EAAApF,OAAAuF,EAAA,EAAAvF,CAAAsF,KAAAtF,OAAAwF,EAAA,EAAAxF,CAAAkF,GAAAO,KAAAH,KAAMH,KA2ERO,uBAAyB,WAEvBN,EAAKO,SAAS,CAAEC,iBAAiB,KA3EjCR,EAAKS,MAAQ,CACXC,UAAW,GACXC,WAAY,EACZC,OAAQ,EACRC,MAAOC,OAAOC,WACdP,iBAAiB,GARFR,kFAYAgB,GACjB,GAAId,KAAKH,MAAMjD,MAAQkE,EAAUlE,IAAK,KAAAmE,EACFf,KAAKH,MAAhCH,EAD6BqB,EAC7BrB,MAAO9C,EADsBmE,EACtBnE,IAAKnC,EADiBsG,EACjBtG,YACnBuF,KAAKgB,WAAWtB,EAAO9C,EAAKnC,gDAIZ,IAAAwG,EACkBjB,KAAKH,MAAjCH,EADUuB,EACVvB,MAAO9C,EADGqE,EACHrE,IAAKnC,EADFwG,EACExG,YACpBuF,KAAKgB,WAAWtB,EAAO9C,EAAKnC,sCAGnBiF,EAAO9C,EAAKsE,GAAc,IAAAC,EAAAnB,KAC7BoB,GAAkB3G,EAAY0B,mBAAqB+E,GAAgB,EACnEG,EAAMvC,EAAOjE,UAAYiE,EAAOlE,SAAW,iCAAmC8E,EAAQ,OAAS9C,EAAM,OAASA,EACpHgE,OAAOU,iBAAiB,SAAUtB,KAAKI,wBAEvCJ,KAAKK,SAAS,CAACI,WAAY,IAC3Bc,MAAMF,EAAK,CAACG,YAAa,gBACxBC,KAAK,SAAAC,GACJ,GAAIA,EAAOC,GAKT,OAJID,EAAOE,aAEThB,OAAOiB,SAASC,KAAOJ,EAAOL,KAEzBK,EAAOK,OAGZZ,EAAKd,SAAS,CAACI,WAAY,MAGhCgB,KAAM,SAAAC,GACL,IAAIlB,EAAYkB,EAAOM,QAAQ9D,IAAM,SAAA+D,GACnC,IACIC,EADAC,EAAIF,EAAE3H,GAEN8H,EAAKC,EAAmBJ,EAAE5C,UAAW4C,EAAE1C,QAAS0C,EAAEK,cAGtD,OAFAJ,EAAUK,EAAcN,EAAGd,EAAKtB,MAAM2C,YAEhCpB,GAAkBa,EAAEK,aAAaG,MAAM,8EAGzCC,EAAAC,EAAAC,cAAA,OAAKC,IAAKV,EAAGW,UAAWV,GACtBM,EAAAC,EAAAC,cAAA,cAASX,EAAE5C,UAAU0D,UAAU,GAAG,KADpC,IACmDb,EACjDQ,EAAAC,EAAAC,cAAA,eAAOX,EAAEe,QAAT,MAKFN,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAMJ,IAAKV,EAAGW,UAAWV,EAAIc,GAAI,CAAEC,SAAU,yBAA0B5C,MAAO,CAAC6C,EAAG1D,EAAO5D,EAAGmG,EAAE3H,GAAImC,EAAGG,EAAKyG,GAAI,YAC5GX,EAAAC,EAAAC,cAAA,cAASX,EAAE5C,UAAU0D,UAAU,GAAG,KADpC,IACmDb,EACjDQ,EAAAC,EAAAC,cAAA,eAAOX,EAAEe,QAAT,QAKR7B,EAAKd,SAAS,CAACG,UAAWA,IAC1BW,EAAKd,SAAS,CAACI,WAAY,qDAK7BG,OAAO0C,oBAAoB,SAAUtD,KAAKI,yDAS1C,OAAOJ,KAAKO,MAAMC,iBAnFF+C,aAwFdhB,EAAgB,SAACN,EAAGO,GAExB,IAAIN,EAAU,GAgBd,OAbAA,EAAQ,IAAMD,EAAEuB,MAAQhB,EAAYP,EAAEuB,KAAOvB,EAAEuB,KAAKC,OAAO,GAAK,KAAO,IAAMxB,EAAEyB,KAAQzB,EAAEyB,KAAQzB,EAAEyB,KAAO,IAAMxG,EAAc+E,EAAE0B,MAAO1B,EAAE2B,YACzI1B,EAAQ,IAAMD,EAAE4B,MAAQrB,EAAYP,EAAE4B,KAAO5B,EAAE4B,KAAKJ,OAAO,GAAK,KAAO,IAAMxB,EAAE6B,KAAQ7B,EAAE6B,KAAQ7B,EAAE6B,KAAO,IAAM5G,EAAc+E,EAAE8B,MAAO9B,EAAE+B,YACzI9B,EAAQ,IAAMD,EAAEgC,MAAQzB,EAAYP,EAAEgC,KAAOhC,EAAEgC,KAAKR,OAAO,GAAK,KAAO,IAAMxB,EAAEiC,KAAQjC,EAAEiC,KAAQjC,EAAEiC,KAAO,IAAMhH,EAAc+E,EAAEkC,MAAOlC,EAAEmC,YACzIlC,EAAQ,IAAMD,EAAEoC,MAAQ7B,EAAYP,EAAEoC,KAAOpC,EAAEoC,KAAKZ,OAAO,GAAK,KAAO,IAAMxB,EAAEqC,KAAQrC,EAAEqC,KAAQrC,EAAEqC,KAAO,IAAMpH,EAAc+E,EAAEsC,MAAOtC,EAAEuC,YAQzItC,GAHAA,GAFAA,EAAUA,EAAQhE,IAAK,SAAAuG,GAAC,OAAIA,EAAE/G,QAAQ,IAAIgH,OAAO,aAAc,OAE7CzH,KAAK,OAGLS,QAAQ,IAAIgH,OAAO,YAAa,KAO9CrC,EAAoB,SAACoC,EAAGE,EAAGC,GAG/B,IAAMC,EAAoC,GAA3BpH,OAAOkH,EAAE5B,UAAU,GAAG,KAAUtF,OAAOkH,EAAE5B,UAAU,GAAG,MAAoC,GAA3BtF,OAAOgH,EAAE1B,UAAU,GAAG,KAAUtF,OAAOgH,EAAE1B,UAAU,GAAG,MAC9H+B,EAAKF,EAOX,OANSG,IACP,KAAOF,EACP,KACA,KAAOJ,EAAE1B,UAAU,GAAI,IAAIrF,QAAQ,IAAK,KACxCoH,IAKWlF,sBC/HXoF,EAAO,GAILC,EAAW,SAAAC,GAAwB,IAArBC,EAAqBD,EAArBC,KAAMC,EAAeF,EAAfE,SACxB,OACE1C,EAAAC,EAAAC,cAAA,OAAKE,UAAS,WAAAuC,OAAaD,EAAW,QAAU,KAC7CD,IAkBDG,EAAQ,SAAAC,GAAyB,IAAtBJ,EAAsBI,EAAtBJ,KAAsBI,EAAhBzC,UACrB,OACEJ,EAAAC,EAAAC,cAAA,OAEEE,UAAU,uBACVqC,IAIAK,EAAYF,EAAM,CAAEH,KAAM,IAAKrC,UAAW,eAC1C2C,EAAaH,EAAM,CAAEH,KAAM,IAAKrC,UAAW,eAsClC4C,6MAnCbnF,MAAQ,CACN6E,SAAU,KAWZO,SAAW,SAAA9C,GACT/C,EAAKO,SAAS,CAAE+E,SAAUvC,GAAO,kBAAM/C,EAAKD,MAAM+F,eAAe/C,0FAT9C,IAAA9B,EACOf,KAAKH,MAAxBgG,EADY9E,EACZ8E,WAAYjJ,EADAmE,EACAnE,IACfkJ,EAAM,IAAIxI,KAAKV,GACnBkJ,EAAIC,QAAQD,EAAIjJ,UAAYiC,EAAOkH,kBACnChB,EFvCwB,SAACiB,EAAOH,GAGlC,IAFA,IAAII,EAAK,IAAI5I,KAAK2I,GAChBE,EAAM,GACDD,GAAMJ,GACXK,EAAIlK,KAAK,CAAEmK,KAAM5J,EAAW0J,GAAKf,KAAMe,EAAGG,mBAAmB,QAAS,CAAEC,QAAS,QAAS5J,MAAO,QAASE,IAAK,cAC/GsJ,EAAGH,QAAQG,EAAGrJ,UAAY,GAE5B,OAAOsJ,EEgCEI,CAAaV,EAAYC,GAChC9F,KAAKK,SAAS,CAAC+E,SAAUxI,qCAMlB,IACCwI,EAAapF,KAAKO,MAAlB6E,SAEFoB,EAAYxB,EA1Ca9G,IAAI,SAAAuI,GAAM,IACnCL,EAAeK,EAAfL,KAAMjB,EAASsB,EAATtB,KAEd,OACEzC,EAAAC,EAAAC,cAAC8D,EAAD,CACEvB,KAAMA,EACNtC,IAAKuD,MAsCP,OACE1D,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAC+D,EAAAhE,EAAD,CACEiE,KAAMJ,EACNK,UAAWrB,EACXsB,WAAYrB,EACZL,SAAUA,EACVO,SAAU3F,KAAK2F,mBA5BDpC,wCCjClBwD,cAEJ,SAAAA,IAAc,IAAAjH,EAAA,OAAApF,OAAAqF,EAAA,EAAArF,CAAAsF,KAAA+G,IACZjH,EAAApF,OAAAuF,EAAA,EAAAvF,CAAAsF,KAAAtF,OAAAwF,EAAA,EAAAxF,CAAAqM,GAAA5G,KAAAH,QA0BFI,uBAAyB,WACvBN,EAAKO,SAAS,CAAEM,MAAOC,OAAOC,cA1B9Bf,EAAKS,MAAQ,CACXI,MAAOC,OAAOC,WACdjE,IAAK,GACLoK,QAAS,IALClH,oFASZc,OAAOU,iBAAiB,SAAUtB,KAAKI,wBACvC,IHCwB3D,EGDpBuK,EAAUhH,KAAKH,MAAM4C,MAAMwE,OAAOrK,IAIpCoK,GHHsBvK,EGAL,IAAIa,KAAK0J,cHCV1J,OAAS4J,MAAMzK,GGErB,IAAIa,KAAK0J,GAFT,IAAI1J,KAIhB0C,KAAKK,SAAS,CAAE2G,QAASA,EAASpK,IAAKJ,EAAWwK,KAElDhH,KAAKmH,OAASnH,KAAKmH,OAAOC,KAAKpH,qDAM/BY,OAAO0C,oBAAoB,SAAUtD,KAAKI,uDAOrCiH,GACL,IAAM5K,EAAI,IAAIa,KAAK+J,GACnBrH,KAAKK,SAAS,CAAC2G,QAASvK,EAAGG,IAAKJ,EAAWC,sCAGpC,IAAA0E,EAAAnB,KACCW,EAAUX,KAAKO,MAAfI,MACJ2G,EAAoB,IAAIhK,KAM5B,GADkBqD,GAASxG,EAAOoN,gBACpB,CACZD,EAAkBvB,QAAQuB,EAAkBzK,UAAY1C,EAAOqN,0BAC/D,IAAMC,EAAWtN,EAAO6B,WAAWkC,IAAK,SAACwB,GACvC,OACEgD,EAAAC,EAAAC,cAAA,OAAKC,IAAKnD,EAAOpF,GAAI,QAAUoF,GAC7BgD,EAAAC,EAAAC,cAAA,SAAOE,UAAU,SACfJ,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,MAAIE,UAAU,YACZJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,iBAAgBJ,EAAAC,EAAAC,cAAC8E,EAAD,OAC9BhF,EAAAC,EAAAC,cAAA,MAAIE,UAAU,SACZJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,eAAepD,GAC/BgD,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAMC,GAAI,CAACC,SAAU,yBAA0B5C,MAAO,CAAC6C,EAAG1D,EAAOjD,EAAG0E,EAAKZ,MAAM3D,IAAKyG,GAAI,SAAUX,EAAAC,EAAAC,cAAA,OAAME,UAAU,4BAA4B6E,IAAI,iBAAiBC,IAAI,oBAEzKlF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACiF,EAAD,CAAOnI,MAAOA,EAAO9C,IAAKuE,EAAKZ,MAAM3D,IAAKnC,YAAa0G,EAAKtB,MAAMpF,YAAa+H,WAAW,YAS1G,OACEE,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACkF,EAAD,CAAWjC,WAAYyB,EAAmB1K,IAAKoD,KAAKO,MAAM3D,IAAKgJ,eAAgB5F,KAAKmH,SACpFzE,EAAAC,EAAAC,cAACmF,EAAApF,EAAD,KACG8E,GAEH/E,EAAAC,EAAAC,cAACoF,EAAD,OAIJV,EAAkBvB,QAAQuB,EAAkBzK,UAAY1C,EAAO8N,8BAC/D,IAAMR,EAAWtN,EAAO6B,WAAWkC,IAAK,SAACwB,GACvC,OAAQgD,EAAAC,EAAAC,cAAA,MAAIC,IAAKnD,EAAOpF,GAAI,QAAUoF,EAAOoD,UAAU,SACrDJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,eACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,8BAA8BpD,GAC9CgD,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAMC,GAAI,CAACC,SAAU,yBAA0B5C,MAAO,CAAC6C,EAAG1D,EAAOjD,EAAG0E,EAAKZ,MAAM3D,IAAKyG,GAAI,SAAUX,EAAAC,EAAAC,cAAA,OAAME,UAAU,4BAA4B6E,IAAI,iBAAiBC,IAAI,oBAEzKlF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACiF,EAAD,CAAOnI,MAAOA,EAAO9C,IAAKuE,EAAKZ,MAAM3D,IAAKnC,YAAa0G,EAAKtB,MAAMpF,YAAa+H,WAAW,SAMlG,OACEE,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACkF,EAAD,CAAWjC,WAAYyB,EAAmB1K,IAAKoD,KAAKO,MAAM3D,IAAKgJ,eAAgB5F,KAAKmH,SACpFzE,EAAAC,EAAAC,cAAA,SAAOE,UAAU,SACfJ,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,MAAIE,UAAU,YACZJ,EAAAC,EAAAC,cAAA,MAAIE,UAAU,iBAAgBJ,EAAAC,EAAAC,cAAC8E,EAAD,MAA9B,KACCD,KAIP/E,EAAAC,EAAAC,cAACoF,EAAD,cA1GiBzE,aAiHrB2E,EAAa,WAEjB,IADA,IAAItM,EAAO,GACF6I,EAAItK,EAAOgO,eAAgB1D,GAAKtK,EAAOiO,aAAc3D,IAC5D,IAAK,IAAI4D,EAAI,EAAGA,EAAI,GAAIA,GAAI,GAC1BzM,EAAKK,KAAMwI,EAAE6D,WAAWC,SAAS,EAAG,KAAO,IAAMF,EAAEC,WAAWC,SAAS,EAAG,MAG9E,OACE7F,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cAEXlH,EAAKsC,IAAI,SAACyG,EAAG6D,GAAJ,OACP9F,EAAAC,EAAAC,cAACF,EAAAC,EAAM8F,SAAP,CAAgB5F,IAAK2F,GACnB9F,EAAAC,EAAAC,cAAA,OAAKE,UAAU,UAASJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cAAc6B,IACrDjC,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACfJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kBACfJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,uBAQrB4F,EAAU,WACd,OACEhG,EAAAC,EAAAC,cAAA,OAAKE,UAAU,aACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,mCAAf,iBACAJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,8BAAf,WACAJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,oCAAf,iBACAJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,kCAAf,eACAJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,+BAAf,cAMSiE,oECwZA4B,eA9iBb,SAAAA,EAAY9I,GAAO,IAAAC,EAAApF,OAAAqF,EAAA,EAAArF,CAAAsF,KAAA2I,IACjB7I,EAAApF,OAAAuF,EAAA,EAAAvF,CAAAsF,KAAAtF,OAAAwF,EAAA,EAAAxF,CAAAiO,GAAAxI,KAAAH,KAAMH,KACD+I,aAAe9I,EAAK8I,aAAaxB,KAAlB1M,OAAAmO,EAAA,EAAAnO,QAAAmO,EAAA,EAAAnO,CAAAoF,KACpBA,EAAKgJ,WAAahJ,EAAKgJ,WAAW1B,KAAhB1M,OAAAmO,EAAA,EAAAnO,QAAAmO,EAAA,EAAAnO,CAAAoF,KAClBA,EAAKiJ,aAAejJ,EAAKiJ,aAAa3B,KAAlB1M,OAAAmO,EAAA,EAAAnO,QAAAmO,EAAA,EAAAnO,CAAAoF,KAJH,IAMTmC,EAAMpC,EAANoC,EANS+G,EAQF/G,EAAE5C,UAAUpB,MAAM,KARhBgL,EAAAvO,OAAAwO,EAAA,EAAAxO,CAAAsO,EAAA,GAQZG,EARYF,EAAA,GAQRG,EARQH,EAAA,GASbI,EAAM,IAAI/L,KAAK6L,GACfG,EAAM3L,IACV0L,EAAI1K,SAAS,EAAG,EAAG,EAAG,GACtB2K,EAAI3K,SAAS,EAAG,EAAG,EAAG,GAEtB,IAAM4K,EAAeF,EAAIG,YAAcF,EAAIE,UAGrC5E,EAAkC,KAAnB3C,EAAEK,aAAwBiH,EAAc,YAAc,aAAgBtH,EAAEK,aAEvFmH,EADgB,CAAChM,OAAO,CAACwE,EAAEyH,UAAUjM,OAAO,CAACwE,EAAE0H,OAAOlM,OAAO,CAACwE,EAAE2H,OAAOnM,OAAO,CAACwE,EAAE4H,OAAOpM,OAAO,CAACwE,EAAE6H,QAAQC,SAAStM,OAAOqC,EAAKD,MAAMmK,UACnGC,EAAY3N,YAAc2N,EAAY3N,SAAWwD,EAAKD,MAAMpF,aAnBnFyP,EAqBFjI,EAAE1C,QAAQtB,MAAM,KArBdkM,EAAAzP,OAAAwO,EAAA,EAAAxO,CAAAwP,EAAA,GAqBZE,EArBYD,EAAA,GAqBRE,EArBQF,EAAA,GAsBbG,EAAMnB,EAAGlL,MAAM,KAtBF,OAuBjB6B,EAAKS,MAAQ,CACX0B,EAAGA,EACHsI,SAAUD,EAAI,GAAK,IAAMA,EAAI,GAAK,IAAMA,EAAI,GAC5CE,aAAcrB,EACdsB,WAAYL,EACZM,SAAUtB,EAAGrG,UAAU,EAAG,GAC1B4H,OAAQN,EAAGtH,UAAU,EAAG,GACxB6B,YAAaA,EACb5B,QAA+B,qBAAdf,EAAEe,QAA2B,GAAKf,EAAEe,QACrD4H,GAAgB,IAAX3I,EAAE0H,KAAalM,OAAOqC,EAAKD,MAAMmK,QAAWvM,OAAOwE,EAAE0H,MAC1DkB,GAAIpN,OAAOwE,EAAE2H,MACbkB,GAAIrN,OAAOwE,EAAE4H,MACbkB,GAAItN,OAAOwE,EAAE6H,MACbkB,OAAQ/I,EAAE2B,WACVqH,OAAQhJ,EAAE+B,WACVkH,OAAQjJ,EAAEmC,WACV+G,OAAQlJ,EAAEuC,WACVtC,QAAS,GACTkJ,kBAAmB,GACnB1L,MAA2B,qBAAZuC,EAAEvC,MAAyB,KAAOuC,EAAEvC,MACnD2L,UAAU,EACVC,YAAY,EACZ7B,aAAcA,EACd8B,YAAY,EACZC,OAAO,EACPjC,YAAaA,EACbkC,YAAY,EACZC,QAAQ,EACRC,sBAAsB,EACtB/M,UAAW,GACXgN,YAAY,EACZC,YAAY,EACZC,YAAa,IAvDEhM,mFA4DC,IAAAqB,EAAAnB,KAEdqB,EAAMvC,EAAOjE,UAAYiE,EAAOlE,SAAW,0BAC/CoF,KAAKK,SAAS,CAAEuL,YAAY,IAC5BrK,MAAMF,EAAK,CAAEG,YAAa,gBACvBC,KAAK,SAAAC,GACJ,GAAIA,EAAOC,GAET,OAAOD,EAAOK,OAEd,MAAM,IAAIgK,MAAM,wCAGnBtK,KAAK,SAAAC,GACJ,IAAIQ,EAAUR,EAAOM,QAErBb,EAAKd,SAAS,CAAE6B,QAASA,EAAS0J,YAAY,MAE/CI,MAAM,SAAAtL,GAAK,OAAIS,EAAKd,SAAS,CAAEK,QAAOkL,YAAY,MAGrDvK,EAAMvC,EAAOjE,UAAYiE,EAAOlE,SAAW,oCAC3CoF,KAAKK,SAAS,CAAEwL,YAAY,IAC5BtK,MAAMF,EAAK,CAAEG,YAAa,gBACvBC,KAAK,SAAAC,GACJ,GAAIA,EAAOC,GAET,OAAOD,EAAOK,OAEd,MAAM,IAAIgK,MAAM,0CAGnBtK,KAAK,SAAAC,GAGJP,EAAKd,SAAS,CAAEzB,UAAWJ,EAAakD,EAAOM,SAAU6J,YAAY,MAGtEG,MAAM,SAAAtL,GAAK,OAAIS,EAAKd,SAAS,CAAEK,QAAOmL,YAAY,uCAI9C,IAAAI,EAAAjM,KAAAkM,EAC4BlM,KAAKO,MAAhCqL,EADDM,EACCN,WAAYC,EADbK,EACaL,WACpB,GAAID,GAAcC,EAChB,OAAOnJ,EAAAC,EAAAC,cAAA,uBAET,IAA4B,IAAxB5C,KAAKO,MAAM8K,SACb,OAAO3I,EAAAC,EAAAC,cAACuJ,EAAA,EAAD,CAAUjJ,GAAI,CAAEC,SAAU,iBAAkB5C,MAAOP,KAAKO,MAAMiK,gBAEvE,IAAM4B,EAAUnC,EAAY9N,sBAAwB8N,EAAY9N,mBAAqB6D,KAAKH,MAAMpF,aAChG,OACEiI,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,uBAAe5C,KAAKO,MAAMgK,UAC1B7H,EAAAC,EAAAC,cAAA,QAAME,UAAU,eACdJ,EAAAC,EAAAC,cAAA,YAAUE,UAAU,UAClBJ,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,+BACH5C,KAAKO,MAAMgJ,aACX7G,EAAAC,EAAAC,cAAA,qEAEFF,EAAAC,EAAAC,cAAA,UAAQtI,GAAG,cAAcwI,UAAU,eAAeuJ,SAAUrM,KAAK4I,aAAc0D,MAAOtM,KAAKO,MAAMqE,aAC/FlC,EAAAC,EAAAC,cAAA,UAAQ2J,UAAWvM,KAAKO,MAAMgJ,YAAa+C,MAAM,aAAjD,UACA5J,EAAAC,EAAAC,cAAA,UAAQ2J,UAAWvM,KAAKO,MAAMgJ,YAAa+C,MAAM,aAAjD,UACA5J,EAAAC,EAAAC,cAAA,UAAQ0J,MAAM,cAAd,WACA5J,EAAAC,EAAAC,cAAA,UAAQ2J,UAAWH,EAAQE,MAAM,oBAAjC,iBACA5J,EAAAC,EAAAC,cAAA,UAAQ2J,UAAWH,EAAQE,MAAM,eAAjC,YACA5J,EAAAC,EAAAC,cAAA,UAAQ2J,UAAWH,EAAQE,MAAM,kBAAjC,gBAEF5J,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,uBAAL,IAA4BF,EAAAC,EAAAC,cAAA,QAAMtI,GAAG,cAAcwI,UAAW9C,KAAKO,MAAMiM,kBAAmBxM,KAAKO,MAAMkM,iBACvG/J,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cACbJ,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAA,UAAQtI,GAAG,WAAWwI,UAAW,gBAAkB9C,KAAKO,MAAMiM,iBAAkBH,SAAUrM,KAAK4I,aAAc0D,MAAOtM,KAAKO,MAAMmK,UAE3HhQ,OAAOgS,KAAK1M,KAAKO,MAAM3B,WAAWV,IAAI,SAAAyO,GAEpC,OACEjK,EAAAC,EAAAC,cAAA,UAAQC,IAAK8J,EAAKL,MAAOK,GACtBA,EADH,UAEUV,EAAK1L,MAAM3B,UAAU+N,GAAK,GAFpC,QAGUV,EAAK1L,MAAM3B,UAAU+N,GAAK,GAHpC,QAIUV,EAAK1L,MAAM3B,UAAU+N,GAAK,GAJpC,QAKUV,EAAK1L,MAAM3B,UAAU+N,GAAK,GALpC,QAMUV,EAAK1L,MAAM3B,UAAU+N,GAAK,GANpC,QAOUV,EAAK1L,MAAM3B,UAAU+N,GAAK,SAQhDjK,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,wBACHF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cACbJ,EAAAC,EAAAC,cAAA,UAAQtI,GAAG,QAAQwI,UAAU,eAAeuJ,SAAUrM,KAAK4I,aAAc0D,MAAOtM,KAAKO,MAAMb,OACzFgD,EAAAC,EAAAC,cAAA,UAAQ0J,MAAM,MAAd,MACA5J,EAAAC,EAAAC,cAAA,UAAQ2J,SAAUvM,KAAKO,MAAMuL,YAAY,GAAIQ,MAAM,KAAnD,KACA5J,EAAAC,EAAAC,cAAA,UAAQ2J,SAAUvM,KAAKO,MAAMuL,YAAY,GAAIQ,MAAM,KAAnD,KACA5J,EAAAC,EAAAC,cAAA,UAAQ2J,SAAUvM,KAAKO,MAAMuL,YAAY,GAAIQ,MAAM,KAAnD,KACA5J,EAAAC,EAAAC,cAAA,UAAQ2J,SAAUvM,KAAKO,MAAMuL,YAAY,GAAIQ,MAAM,KAAnD,KACA5J,EAAAC,EAAAC,cAAA,UAAQ2J,SAAUvM,KAAKO,MAAMuL,YAAY,GAAIQ,MAAM,KAAnD,KACA5J,EAAAC,EAAAC,cAAA,UAAQ2J,SAAUvM,KAAKO,MAAMuL,YAAY,GAAIQ,MAAM,KAAnD,OAGR5J,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,uBACFF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cACfJ,EAAAC,EAAAC,cAAA,WACGF,EAAAC,EAAAC,cAAA,UAAQtI,GAAG,SAASwI,UAAW,gBAAkB9C,KAAKO,MAAMiM,iBAAkBH,SAAUrM,KAAK4I,aAAc0D,MAAOtM,KAAKO,MAAMoK,QAEzHjQ,OAAOgS,KAAK1M,KAAKO,MAAM3B,WAAWV,IAAI,SAAAyO,GACpC,OACEjK,EAAAC,EAAAC,cAAA,UAAQ2J,UAAWN,EAAK1L,MAAMgL,WAAY1I,IAAK8J,EAAKL,MAAOK,GACxDA,EADH,UAgBZjK,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,cAAU5C,KAAKO,MAAMqE,YAAYnC,MAAM,0CAA6C,UAAY,oBAArG,IAAkIC,EAAAC,EAAAC,cAAA,QAAMtI,GAAG,QAAQwI,UAAW9C,KAAKO,MAAMqM,YAAa5M,KAAKO,MAAMsM,WACjMnK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,YACbJ,EAAAC,EAAAC,cAAA,UAAQtI,GAAG,KAAKwI,UAAW,gBAAkB9C,KAAKO,MAAMuM,cAAeT,SAAUrM,KAAK4I,aAAc0D,MAAOtM,KAAKO,MAAMqK,IACpHlI,EAAAC,EAAAC,cAAA,UAAQ0J,MAAM,KAAd,0BACCtM,KAAKO,MAAM2B,QAAQhE,IAAI,SAAA+D,GACtB,OACES,EAAAC,EAAAC,cAAA,UAAQC,IAAK,KAAOZ,EAAE3H,GAAIgS,MAAOrK,EAAE3H,IAAK2H,EAAEC,QAAUhF,EAAc+E,EAAE9E,aAAc8E,EAAE7E,eAIxF4C,KAAKO,MAAMqE,YAAYnC,MAAM,0CAC7BC,EAAAC,EAAAC,cAAA,UAAQtI,GAAG,KAAKwI,UAAW,gBAAkB9C,KAAKO,MAAMuM,cAAeT,SAAUrM,KAAK4I,aAAc0D,MAAOtM,KAAKO,MAAMsK,IACpHnI,EAAAC,EAAAC,cAAA,UAAQ0J,MAAM,KAAd,0BACCtM,KAAKO,MAAM2B,QAAQhE,IAAI,SAAA+D,GACtB,OACES,EAAAC,EAAAC,cAAA,UAAQC,IAAK,KAAOZ,EAAE3H,GAAIgS,MAAOrK,EAAE3H,IAAK2H,EAAEC,QAAUhF,EAAc+E,EAAE9E,aAAc8E,EAAE7E,eAIxF,IAGNsF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,YACgB,cAA3B9C,KAAKO,MAAMqE,YACXlC,EAAAC,EAAAC,cAAA,UAAQtI,GAAG,KAAKwI,UAAW,gBAAkB9C,KAAKO,MAAMuM,cAAeT,SAAUrM,KAAK4I,aAAc0D,MAAOtM,KAAKO,MAAMuK,IACpHpI,EAAAC,EAAAC,cAAA,UAAQ0J,MAAM,KAAd,0BACCtM,KAAKO,MAAM2B,QAAQhE,IAAI,SAAA+D,GACtB,OACES,EAAAC,EAAAC,cAAA,UAAQC,IAAK,KAAOZ,EAAE3H,GAAIgS,MAAOrK,EAAE3H,IAAK2H,EAAEC,QAAUhF,EAAc+E,EAAE9E,aAAc8E,EAAE7E,eAIxF,GAEyB,cAA3B4C,KAAKO,MAAMqE,YACXlC,EAAAC,EAAAC,cAAA,UAAQtI,GAAG,KAAKwI,UAAW,gBAAkB9C,KAAKO,MAAMuM,cAAeT,SAAUrM,KAAK4I,aAAc0D,MAAOtM,KAAKO,MAAMwK,IACpHrI,EAAAC,EAAAC,cAAA,UAAQ0J,MAAM,KAAd,0BACCtM,KAAKO,MAAM2B,QAAQhE,IAAI,SAAA+D,GACtB,OACES,EAAAC,EAAAC,cAAA,UAAQC,IAAK,KAAOZ,EAAE3H,GAAIgS,MAAOrK,EAAE3H,IAAK2H,EAAEC,QAAUhF,EAAc+E,EAAE9E,aAAc8E,EAAE7E,eAIxF,IAINsF,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,2BAAL,IAAgCF,EAAAC,EAAAC,cAAA,QAAMtI,GAAG,aAAawI,UAAW9C,KAAKO,MAAMwM,iBAAkB/M,KAAKO,MAAMyM,gBACzGtK,EAAAC,EAAAC,cAAA,OAAKE,UAAU,cACbJ,EAAAC,EAAAC,cAAA,SAAOqK,KAAK,OAAO3S,GAAG,UAAUwI,UAAW,sBAAwB9C,KAAKO,MAAMuM,cAAeT,SAAUrM,KAAK4I,aAAc0D,MAAOtM,KAAKO,MAAMyC,QAASkK,YAAY,kCAGnKxK,EAAAC,EAAAC,cAAA,UAAQqK,KAAK,SAASE,QAAS,SAAAxI,GAAOsH,EAAKnD,WAAWnE,IAAM7B,UAAU,sBAAsByJ,UAAWvM,KAAKO,MAAM+K,YAAlH,aACA5I,EAAAC,EAAAC,cAAA,UAAQqK,KAAK,SAASE,QAAS,SAAAxI,GAAOsH,EAAKlD,aAAapE,IAAM7B,UAAU,sBAAsByJ,UAAWvM,KAAKO,MAAMkJ,cAApH,oDAOC9E,GAAG,IAAAyI,EAAApN,KACZ2E,EAAE0I,iBAEF,IAAM5I,EAAI,CAEVA,eAAmB,GACnBA,iBAAqB,GACrBA,YAAe,EACfA,cAAkB,IAEd6I,EACF,cACYtN,KAAKO,MAAM0B,EAAE3H,GACvB,OAAS0F,KAAKO,MAAMiK,aAAe,IAAMxK,KAAKO,MAAMmK,SACpD,OAAS1K,KAAKO,MAAMkK,WAAa,IAAMzK,KAAKO,MAAMoK,OAClD,QAAU3K,KAAKH,MAAMmK,OACrB,OAAShK,KAAKO,MAAMqK,GACpB,OAAS5K,KAAKO,MAAMsK,GACpB,OAAS7K,KAAKO,MAAMuK,GACpB,OAAS9K,KAAKO,MAAMwK,GACpB,MAAQ/K,KAAKO,MAAMb,MACnB,MAAQM,KAAKO,MAAMqE,YACnB,QAAU5E,KAAKO,MAAMyC,QACrB,QAEA3B,EAAMvC,EAAOjE,UAAYiE,EAAOlE,SAChC,wBACA0S,EAEJ/L,MAAMF,EAAK,CAAEG,YAAa,gBACvBC,KAAK,SAAAC,GACJ,GAAIA,EAAOC,GACT,OAAOD,EAAOK,OAEd,MAAM,IAAIgK,MAAM,4CAA8CqB,EAAK7M,MAAM0B,EAAE3H,MAG9EmH,KAAK,SAAAC,GACJ,IAAI6L,EAAK7L,EAAOM,QAAQ,GAAGwL,WAC3B,GAAW,OAAPD,EAAa,CAEf,IAAIE,EACF3O,EAAOjE,UACLiE,EAAOlE,SACPkE,EAAO4O,aACPJ,EACJ/L,MAAMkM,EAAQ,CAAEjM,YAAa,gBAC7B4L,EAAK/M,SAAS,CAAEgL,UAAU,SACrB,GAAW,mBAAPkC,EAAyB,KAAAI,EAAAjT,OAAAwO,EAAA,EAAAxO,CAEqBkT,EAAS/R,YAF9B,GAEjC4I,EAAE+H,iBAF+BmB,EAAA,GAEblJ,EAAE6G,WAFWqC,EAAA,GAEClJ,EAAEgI,eAFHkB,EAAA,QAKlC/M,OAAOiB,SAASC,KAAOhD,EAAOhE,UAGhCsS,EAAK/M,SAASoE,0CAIPE,GAAG,IAAAkJ,EAAA7N,KAER8N,EAAQ9N,KAAKO,MAAMiK,aAAe,IAAMxK,KAAKO,MAAMmK,SAAW,IAC9DvB,EAAK,IAAI7L,KAAKwQ,GACdC,EAAQ,IAAIzQ,KAIlB,GAFAqH,EAAE0I,iBAEElE,GAAM4E,GAAU9D,EAAY3N,SAAW0D,KAAKH,MAAMpF,YAAc,CAClE,IAAI6S,EACF,aACYtN,KAAKO,MAAM0B,EAAE3H,GACvB,QAAU0F,KAAKH,MAAMmK,OACrB3I,EACFvC,EAAOjE,UACLiE,EAAOlE,SACPkE,EAAOkP,eACPV,EACJ/L,MAAMF,EAAK,CAAEG,YAAa,gBACvBC,KAAK,SAAAC,GACJ,GAAIA,EAAOC,GAAI,CAEb,IAAI8L,EAAS3O,EAAOjE,UAAYiE,EAAOlE,SACnCkE,EAAO4O,aACPJ,EACJ/L,MAAMkM,EAAQ,CAAEjM,YAAa,gBAC7BqM,EAAKxN,SAAS,CAAEgL,UAAU,YAIhCrL,KAAKK,SAAS,CAAEgL,UAAU,IAE5B1G,EAAE0I,sDAIS1I,GAAG,IAAAsJ,EAAAjO,KACd2E,EAAE0I,iBAEFrN,KAAKK,SAAL3F,OAAAC,EAAA,EAAAD,CAAA,GAAiBiK,EAAEuJ,OAAO5T,GAAKqK,EAAEuJ,OAAO5B,OAAS,WAC/C,IAAM7H,EAAI,CAGVA,SAAa,GACbA,WAAe,GACfA,eAAmB,GACnBA,iBAAqB,GACrBA,cAAkB,GAClBA,gBAAoB,GAEpBA,YAAe,EACfA,cAAiB,EACjBA,YAAe,EACfA,cAAkB,GAClBA,YAAe,GACfA,EAAEiG,SAAWuD,EAAK1N,MAAMmK,SAIxBjG,EAAE7F,UAAYqP,EAAK1N,MAAM3B,UAEzB6F,EAAEqH,YAAcrH,EAAE7F,UAAU6F,EAAEiG,UAAUxM,IAAK,SAAAkF,GAAC,OAAIA,IAAMtE,EAAOa,cAG/D,IAAIwO,EAAgBF,EAAK1N,MAAMmK,SAAS3H,UAAU,EAAG,GACjDqL,EAAYH,EAAK1N,MAAMoK,OAAO5H,UAAU,EAAG,GAChB,cAA3BkL,EAAK1N,MAAMqE,YACbwJ,GAAa3Q,OAAOwQ,EAAK1N,MAAMmK,SAAS3H,UAAU,EAAG,IAAM,GAAGsL,eAAe,QAAS,CAACC,qBAAsB,EAAGC,aAAa,IAEtHN,EAAK1N,MAAMqE,YAAYnC,MAAM,gCACpC2L,GAAa3Q,OAAOwQ,EAAK1N,MAAMmK,SAAS3H,UAAU,EAAG,IAAM,GAAGsL,eAAe,QAAS,CAACC,qBAAsB,EAAGC,aAAa,KAE/H9J,EAAEkG,OAASyD,EAAY,IAAMD,EAG7B,IAAIK,GAAc,EACdC,GAAkB,EAClBC,GAAwB,EACxBC,GAAsB,EACtBC,GAAqB,EAEnBC,EAAaZ,EAAK1N,MAAMiK,aAAe,IAAMyD,EAAK1N,MAAMmK,SAAW,IACnEvB,EAAK,IAAI7L,KAAKuR,GACdC,EAAK,IAAIC,KACfD,EAAGE,KAAK,KAAM,MACd,IACMC,IADeH,EAAGI,UAAU/F,IAC6B,IAAhBA,EAAGgG,UAAoC,IAAhBhG,EAAGgG,SASnElJ,EAA6C,GAArCxI,OAAOgH,EAAEiG,SAAS3H,UAAU,EAAG,IAAWtF,OAAOgH,EAAEiG,SAAS3H,UAAU,EAAG,IACnFqM,EAA0C,GAAnC3R,OAAOgH,EAAEkG,OAAO5H,UAAU,EAAG,IAAWtF,OAAOgH,EAAEkG,OAAO5H,UAAU,EAAG,IAE1EsM,EAAQ,CAAC5R,OAAOwQ,EAAK1N,MAAMqK,IAAKnN,OAAOwQ,EAAK1N,MAAMsK,IAAKpN,OAAOwQ,EAAK1N,MAAMuK,IAAKrN,OAAOwQ,EAAK1N,MAAMwK,KAItGsE,EAAMC,QAAQ,SAACC,GACJ,MAALA,IAEEA,IAAM9R,OAAOwQ,EAAKpO,MAAMmK,UAC1B4E,GAAqB,GACdW,IAAMzQ,EAAO0Q,SACpBhB,GAAc,GACPe,IAAMzQ,EAAO2Q,aACpBhB,GAAkB,MAKxBG,EAAqBA,GAAsBX,EAAKpO,MAAMmK,SAAWiE,EAAK1N,MAAM0B,EAAEyH,QAK9E2F,EAAMnR,IAAI,SAAAiE,GACR,GAAS,MAALA,EAKF,MAHgE,OJ7Y9C,SAAChF,GAC3B,GAA8B,qBAAlBA,GAAkD,OAAjBA,EAC3C,OAAO,EAET,IAAIE,EAAgB,IAAIC,KACxBD,EAAgBA,EAAcN,cAC9B,IAAIQ,EAAc,IAAID,KAAKH,GAI3B,OAFiBE,GADjBE,EAAcA,EAAYR,eACsB,GIqYjC2S,CAAevN,EAAC,eAAqBA,EAAC,aAC3CuM,GAAwB,GAEnBvM,EAAC,eAKZ,IAAIwN,GAAmB,EAGvB,GAAI1B,EAAK1N,MAAMqE,YAAYnC,MAAM,6DAA8D,CAE7F,GAA8B,IAA1BhF,OAAOwQ,EAAK1N,MAAMqK,IAAW,KAAAgF,EAAAlV,OAAAwO,EAAA,EAAAxO,CACYkT,EAASvS,cADrB,GAC9BoJ,EAAEoL,WAD4BD,EAAA,GAChBnL,EAAE6G,WADcsE,EAAA,GACFnL,EAAEoI,SADA+C,EAAA,GAE/BnL,EAAEqI,cAAgB,aAGpBrI,EAAEoG,GAAKpG,EAAEqG,GAAKrG,EAAEsG,GAAK,EAGvB,GADA4E,GAAyC,IAArBA,GAA6BlL,EAAE6G,WAC/C2C,EAAK1N,MAAMqE,YAAYnC,MAAM,8BAA+B,CAE9D,GAA8B,IAA1BhF,OAAOwQ,EAAK1N,MAAMqK,KAAuC,IAA1BnN,OAAOwQ,EAAK1N,MAAMsK,IAAW,KAAAiF,EAAApV,OAAAwO,EAAA,EAAAxO,CACnBkT,EAASvS,cADU,GAC7DoJ,EAAEoL,WAD2DC,EAAA,GAC/CrL,EAAE6G,WAD6CwE,EAAA,GACjCrL,EAAEoI,SAD+BiD,EAAA,GAE9DrL,EAAEqI,cAAgB,kBACb,GAAImB,EAAK1N,MAAMqK,KAAOqD,EAAK1N,MAAMsK,GAAI,CAE1C8D,GAAsB,EAFoB,IAAAoB,EAAArV,OAAAwO,EAAA,EAAAxO,CAGCkT,EAASvS,cAHV,GAGzCoJ,EAAEoL,WAHuCE,EAAA,GAG3BtL,EAAE6G,WAHyByE,EAAA,GAGbtL,EAAEoI,SAHWkD,EAAA,GAI1CtL,EAAEqI,cAAgB,aAGpBrI,EAAEqG,GAAKrG,EAAEsG,GAAK,EAGhB,GADA4E,GAAyC,IAArBA,GAA6BlL,EAAE6G,WACpB,cAA3B2C,EAAK1N,MAAMqE,cAGb+J,EAAuBqB,IAAEC,KAAK,CAAChC,EAAK1N,MAAMqK,GAAIqD,EAAK1N,MAAMsK,GAAIoD,EAAK1N,MAAMuK,GAAImD,EAAK1N,MAAMwK,KAAK/N,OAAS,GAEhGwR,IACCG,GAAkD,IAA1BlR,OAAOwQ,EAAK1N,MAAMuK,KAAuC,IAA1BrN,OAAOwQ,EAAK1N,MAAMwK,MAAY,KAAAmF,EAAAxV,OAAAwO,EAAA,EAAAxO,CAC5CkT,EAASvS,cADmC,GACtFoJ,EAAEmI,WADoFsD,EAAA,GACxEzL,EAAE6G,WADsE4E,EAAA,GAC1DzL,EAAEoI,SADwDqD,EAAA,GAEvFzL,EAAEqI,cAAgB,aAKxB,GADA6C,GAAyC,IAArBA,GAA6BlL,EAAE6G,WAC/CkD,GAAeC,EACjB,GAAIR,EAAK1N,MAAMqE,YAAYnC,MAAM,8BAE/B,GAAIwL,EAAK1N,MAAMyC,QAAQhG,OAAS,EAAG,KAAAkI,EACoBsJ,EAAcZ,EAAS1S,KAAO0S,EAASzS,SAD3DoK,EAAA7K,OAAAwO,EAAA,EAAAxO,CAAAwK,EAAA,GAChCT,EAAEsI,gBAD8BxH,EAAA,GACbd,EAAE6G,WADW/F,EAAA,GACCd,EAAEuI,cADHzH,EAAA,GAEjCd,EAAEqI,cAAgB,kBAGjB,KAAAqD,EAAAzV,OAAAwO,EAAA,EAAAxO,CACwCkT,EAASvS,cADjD,GACFoJ,EAAEmI,WADAuD,EAAA,GACY1L,EAAE6G,WADd6E,EAAA,GAC0B1L,EAAEoI,SAD5BsD,EAAA,GAEH1L,EAAEqI,cAAgB,aAGtB,GAA+B,qBAA3BmB,EAAK1N,MAAMqE,YAAoC,KAAAwL,EAAA1V,OAAAwO,EAAA,EAAAxO,CACIkT,EAASxS,cADb,GAChDqJ,EAAEsI,gBAD8CqD,EAAA,GAC7B3L,EAAE6G,WAD2B8E,EAAA,GACf3L,EAAEuI,cADaoD,EAAA,GAKnD,GAFAT,GAAyC,IAArBA,GAA6BlL,EAAE6G,WAE/C2C,EAAK1N,MAAMqE,YAAYnC,MAAM,6BAA8B,CAG7D,IAAM4N,EAAS,IAAI/S,KAInB,GAAK2I,GADsB,GAFhBoK,EAAOC,WACPD,EAAOE,cAEWzR,EAAO0R,qBAAuB9B,IAA0BO,GAAwBG,EAAQtQ,EAAO2R,YAAc,IAAM,GAAK,KAAAC,EAAAhW,OAAAwO,EAAA,EAAAxO,CAC5FkT,EAASrS,oBADmF,GAClJkJ,EAAE+H,iBADgJkE,EAAA,GAC9HjM,EAAE6G,WAD4HoF,EAAA,GAChHjM,EAAEgI,eAD8GiE,EAAA,GAEnJjM,EAAEgH,YAAa,GAMnB,GAHAkE,GAAyC,IAArBA,GAA6BlL,EAAE6G,WAG/CrF,GAASmJ,EAAM,KAAAuB,EAAAjW,OAAAwO,EAAA,EAAAxO,CACsCkT,EAAShS,KAD/C,GAChB6I,EAAE+H,iBADcmE,EAAA,GACIlM,EAAE6G,WADNqF,EAAA,GACkBlM,EAAEgI,eADpBkE,EAAA,QAGd,GAA+B,cAA3B1C,EAAK1N,MAAMqE,aAClB,GAAKwK,EAAOnJ,EAASnH,EAAO8R,WAAY,KAAAC,EAAAnW,OAAAwO,EAAA,EAAAxO,CACiBkT,EAASpS,YAD1B,GACrCiJ,EAAE+H,iBADmCqE,EAAA,GACjBpM,EAAE6G,WADeuF,EAAA,GACHpM,EAAEgI,eADCoE,EAAA,SAIrC,GAA+B,cAA3B5C,EAAK1N,MAAMqE,aAClB,GAAKwK,EAAOnJ,EAASnH,EAAOgS,WAAY,KAAAC,EAAArW,OAAAwO,EAAA,EAAAxO,CACiBkT,EAASnS,YAD1B,GACrCgJ,EAAE+H,iBADmCuE,EAAA,GACjBtM,EAAE6G,WADeyF,EAAA,GACHtM,EAAEgI,eADCsE,EAAA,SAIrC,GAA+B,eAA3B9C,EAAK1N,MAAMqE,YAClB,GAAKwK,EAAOnJ,IAAWnH,EAAOkS,YAAa,KAAAC,EAAAvW,OAAAwO,EAAA,EAAAxO,CACckT,EAASjS,kBADvB,GACxC8I,EAAE+H,iBADsCyE,EAAA,GACpBxM,EAAE6G,WADkB2F,EAAA,GACNxM,EAAEgI,eADIwE,EAAA,OAEpC,KAAAC,EAAAxW,OAAAwO,EAAA,EAAAxO,CACkDkT,EAASlS,QAD3D,GACJ+I,EAAE+H,iBADE0E,EAAA,GACgBzM,EAAE6G,WADlB4F,EAAA,GAC8BzM,EAAEgI,eADhCyE,EAAA,GAyBT,OArBAvB,GAAyC,IAArBA,GAA6BlL,EAAE6G,WAG/C2C,EAAK1N,MAAMqE,YAAYnC,MAAM,4CAC/BgC,EAAE6G,WAAasD,GAAuB3E,EAAY3N,YAAc2N,EAAY3N,SAAW2R,EAAKpO,MAAMpF,aAClGgK,EAAEgF,aAAemF,GAAuB3E,EAAY3N,YAAc2N,EAAY3N,SAAW2R,EAAKpO,MAAMpF,aACpGgK,EAAE8G,YAAa,GAEb0C,EAAK1N,MAAMqE,YAAYnC,MAAM,gFAC/BgC,EAAE6G,WAAcrB,EAAY9N,sBAAwB8N,EAAY9N,mBAAqB8R,EAAKpO,MAAMpF,aAChGgK,EAAE8G,YAAa,GAEb0C,EAAK1N,MAAMqE,YAAYnC,MAAM,gFAC/BgC,EAAEgF,aAAgBQ,EAAY9N,sBAAwB8N,EAAY9N,mBAAqB8R,EAAKpO,MAAMpF,cAEpGkV,GAAyC,IAArBA,GAA6BlL,EAAE6G,WAEnD7G,EAAE6G,WAAaqE,EAIRlL,WA1iBSlB,aCwFP4N,mBAzFb,SAAAA,EAAYtR,GAAO,IAAAC,EAAA,OAAApF,OAAAqF,EAAA,EAAArF,CAAAsF,KAAAmR,IACjBrR,EAAApF,OAAAuF,EAAA,EAAAvF,CAAAsF,KAAAtF,OAAAwF,EAAA,EAAAxF,CAAAyW,GAAAhR,KAAAH,KAAMH,KAEDU,MAAQ,CACX6Q,SAAW,GACX3Q,WAAY,EACZC,OAAQ,GANOZ,oFASE,IACZuD,EAAMrD,KAAKH,MAAMgC,SAAStB,MAA1B8C,GACP,GAAW,WAAPA,EAAiB,KAAAgO,EACJrR,KAAKH,MAAMgC,SAAStB,MAA5BzE,EADYuV,EACZvV,EAAGW,EADS4U,EACT5U,EACVuD,KAAKsR,UAAUxV,EAAGW,QACb,GAAW,QAAP4G,EAAc,KAAAkO,EACRvR,KAAKH,MAAMgC,SAAStB,MAA5B6C,EADgBmO,EAChBnO,EAAG3G,EADa8U,EACb9U,EACVuD,KAAKwR,OAAOpO,EAAG3G,sCAITnC,EAAIsC,GAAK,IAAAuE,EAAAnB,KACXqB,EAAMvC,EAAOjE,UAAYiE,EAAOlE,SAAW,kCAAoCN,EAErF0F,KAAKK,SAAS,CAACI,WAAY,IAE3Bc,MAAMF,EAAK,CAACG,YAAa,gBACxBC,KAAK,SAAAC,GACJ,GAAIA,EAAOC,GAKT,OAJID,EAAOE,aACT6P,QAAQC,IAAI,qDACZ9Q,OAAOiB,SAASC,KAAOJ,EAAOL,KAEzBK,EAAOK,OAEd,MAAM,IAAIgK,MAAM,gDAGnBtK,KAAK,SAAAC,GACJ,IAAI0P,EAAW1P,EAAOM,QAAQ9D,IAAK,SAAA+D,GACjC,OACES,EAAAC,EAAAC,cAAA,OAAKC,IAAKZ,EAAE3H,GAAIwI,UAAU,OACtBJ,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAMC,GAAI,CAAEC,SAAU,iBAAkB5C,MAAO,CAAC9D,EAAGG,KAAQ8F,EAAAC,EAAAC,cAAA,KAAGE,UAAU,qBAAb,cAC3DJ,EAAAC,EAAAC,cAAC+O,GAAD,CAAS1P,EAAGA,EAAG+H,OAAQ7I,EAAKtB,MAAMmK,OAAQvP,YAAa0G,EAAKtB,MAAMpF,iBAI1E0G,EAAKd,SAAS,CAAE+Q,SAAUA,MAE3BpF,MAAM,SAAAtL,GAAK,OAAIS,EAAKd,SAAS,CAAEK,QAAOD,WAAW,qCAG7Cf,EAAO9C,GAEZ,IAAIqF,EAiBR,SAAqBvC,EAAO9C,GAC1B,MAAO,CACLtC,GAAI,EACJoP,QAAS,EACTkB,GAAI,GACJC,GAAI,GACJC,GAAI,GACJC,GAAI,GACJrL,MAAOA,EACPL,UAAWzC,EAAM,YACjB2C,QAAS3C,EAAM,YACf0F,aAAc,GACdnF,aAAc,aACdwM,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,GAjCE8H,CAAYlS,EAAO9C,GACvBwU,EAAW,CACX1O,EAAAC,EAAAC,cAAA,OAAKC,KAAM,EAAGC,UAAU,OACpBJ,EAAAC,EAAAC,cAACK,EAAA,EAAD,CAAMC,GAAI,CAAEC,SAAU,iBAAkB5C,MAAO,CAAC9D,EAAGG,KAAQ8F,EAAAC,EAAAC,cAAA,KAAGE,UAAU,qBAAb,cAC3DJ,EAAAC,EAAAC,cAAC+O,GAAD,CAAS1P,EAAGA,EAAG+H,OAAQhK,KAAKH,MAAMmK,OAAQvP,YAAauF,KAAKH,MAAMpF,gBAG1EuF,KAAKK,SAAS,CAAE+Q,SAAUA,qCAI1B,OACE1O,EAAAC,EAAAC,cAAA,WAAM5C,KAAKO,MAAM6Q,iBAnEA7N,aCaRsO,oLAXF,IAAA/R,EAAAE,KACP,OACE0C,EAAAC,EAAAC,cAACkP,EAAA,EAAD,KACEpP,EAAAC,EAAAC,cAACmP,EAAA,EAAD,CAAOC,OAAK,EAACC,KAAK,yBAAyBC,OAAQ,SAACrS,GAAD,OAAW6C,EAAAC,EAAAC,cAACuP,GAADzX,OAAA0X,OAAA,GAAcvS,EAAd,CAAqBmK,OAAQlK,EAAKD,MAAMmK,OAAQvP,YAAaqF,EAAKD,MAAMpF,kBACtIiI,EAAAC,EAAAC,cAACmP,EAAA,EAAD,CAAOG,OAAQ,SAACrS,GAAD,OAAW6C,EAAAC,EAAAC,cAACyP,EAAD3X,OAAA0X,OAAA,GAAkBvS,EAAlB,CAAyBmK,OAAQlK,EAAKD,MAAMmK,OAAQvP,YAAaqF,EAAKD,MAAMpF,0BAL1F8I,aCkGP+O,eAjGb,SAAAA,EAAYzS,GAAO,IAAAC,EAAA,OAAApF,OAAAqF,EAAA,EAAArF,CAAAsF,KAAAsS,IACjBxS,EAAApF,OAAAuF,EAAA,EAAAvF,CAAAsF,KAAAtF,OAAAwF,EAAA,EAAAxF,CAAA4X,GAAAnS,KAAAH,KAAMH,KAEDU,MAAQ,CACXgS,KAAM,GACNC,YAAY,EACZ/X,YAAa,EACbgY,WAAY,GACZ7G,YAAY,EACZC,YAAY,GATG/L,mFAejBE,KAAKK,SAAS,iBAAO,CAAEuL,YAAY,EAAOC,YAAY,KAClD/M,EAAO/D,MAETiF,KAAK0S,YACL1S,KAAK2S,iBAKL3S,KAAKK,SAAS,iBAAO,CAACkS,KAAMzT,EAAOzE,SAAUI,YAAaqE,EAAOzE,SAASI,mDAQ9E,IAAA0G,EAAAnB,KACQqB,EAAMvC,EAAOjE,UAAYiE,EAAOlE,SAAW,4BACjD2G,MAAMF,EAAK,CAACG,YAAa,gBACxBC,KAAM,SAACmR,GACFA,EAAIjR,IACNiR,EAAI7Q,OACHN,KAAM,SAAC8Q,GACe,OAAjBA,EAAKM,QACP1R,EAAKd,SAAS,iBAAO,CAACkS,KAAMA,EAAKA,KAAM3G,YAAY,KAGnDhL,OAAOiB,SAASC,KAAOhD,EAAOjE,UAAYiE,EAAOlE,SAAWkE,EAAOhE,sDAQ7E,IAAAmR,EAAAjM,KACQqB,EAAMvC,EAAOjE,UAAYiE,EAAOlE,SAAW,kCAEjD2G,MAAMF,EAAK,CAACG,YAAa,gBACxBC,KAAM,SAACmR,GACFA,EAAIjR,IACNiR,EAAI7Q,OACHN,KAAM,SAAChH,GAENwR,EAAK5L,SAAS,iBAAO,CAAC5F,YAAaA,EAAYoY,QAAShH,YAAY,0CAO5E,IAAAK,EACqClM,KAAKO,MAAhCqL,EADVM,EACUN,WAAYC,EADtBK,EACsBL,WACpB,OAAI/M,EAAO/D,OAAS6Q,GAAcC,GACzBnJ,EAAAC,EAAAC,cAAA,uBAGLF,EAAAC,EAAAC,cAACF,EAAAC,EAAM8F,SAAP,KACE/F,EAAAC,EAAAC,cAAA,OAAKE,UAAU,aACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,iBACbJ,EAAAC,EAAAC,cAAA,OAAK+E,IAAI,4BAA4BC,IAAI,eAE3ClF,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,uBAAsBJ,EAAAC,EAAAC,cAAA,KAAGd,KAAK,iBAAiBxH,GAAG,WAA5B,iBACtCoI,EAAAC,EAAAC,cAAA,QAAME,UAAU,oBAAmBJ,EAAAC,EAAAC,cAAA,kBAAU5C,KAAKO,MAAMgS,KAAKhY,QAAU,IAAMyF,KAAKO,MAAMgS,KAAK/X,SAA1D,OAErCkI,EAAAC,EAAAC,cAAA,OAAKE,UAAU,OACbJ,EAAAC,EAAAC,cAAA,OAAKE,UAAU,sBAAqBJ,EAAAC,EAAAC,cAAA,QAAME,UAAU,QAAOJ,EAAAC,EAAAC,cAAA,KAAGd,KAAK,sBAAqBY,EAAAC,EAAAC,cAAA,OAAK+E,IAAI,qBAAqBC,IAAI,iBAKhIlF,EAAAC,EAAAC,cAACkQ,GAAD,CAAS9I,OAAUhK,KAAKO,MAAMgS,KAAKjY,GAAIG,YAAeuF,KAAKO,MAAM9F,cACjEiI,EAAAC,EAAAC,cAAA,UAAQE,UAAU,qBAAlB,uGA5FQS,aCElBwP,IAASb,OACPxP,EAAAC,EAAAC,cAACoQ,EAAA,EAAD,KACEtQ,EAAAC,EAAAC,cAACqQ,GAAD,OAEDnV,SAASoV,eAAe","file":"static/js/main.ea41783b.chunk.js","sourcesContent":["\r\n// ****** Konfigurationsdaten *******\r\n\r\nexport const hostLocal = true\r\n\r\nconst config = {\r\n  testuser: {id:211, vorname:'Hart', nachname:'VerdrahtetAdm', permissions: 65535}, // mit Adminrechten\r\n  // testuser: {id:211, vorname:'Hart', nachname:'VerdrahtetUsr', permissions: 0}, // mit normalen Benutzerrechten\r\n   testuser: {id:357, vorname:'Hart', nachname:'VerdrahtetUsr2', permissions: 432}, // mit normalen Benutzerrechten\r\n  stringSeparator: ' ',\r\n  smartphoneWidth: 578,\r\n  anzahlPlaetze: 6,\r\n  platzArray: [],\r\n  daypickerMaxDays: 180,\r\n  daypickerDaysBeforeToday: 3, \r\n  daypickerDaysBeforeTodayWide: 9, \r\n  buchungenlog: '/intern/api/buchungenlog.php',\r\n  platzbuchungen: '/intern/api/platz.php',\r\n\r\n  dailyStartTime: 8,\r\n  dailyEndTime: 20,\r\n  eveningTime: 1700,  // 17:00 Uhr, alte Platzordnung war 18:00 Uhr\r\n  maxMinutesDistance: 15, // Gäste und Jugendliche dürfen abends erst kurz vor der Spielzeit buchen\r\n  singleTime: 60, // = 1 Stunde\r\n  doubleTime: 120, // = 2 Stunden \r\n  turnierTime: 120, // = 2 Stunden \r\n  gastId: 1,\r\n  mitgliedId: 25,\r\n  platzLeer: \"\\u00A0\\u00A0\",\r\n  platzBelegt: \"\\u29EB\",\r\n  slotMinimalMinutes: 1800000, // = 30 Minuten\r\n  delimiter: \"§§§\"\r\n}\r\nif (hostLocal) {\r\n  config.hostname = 'localhost'\r\n  config.protokoll = 'http://'\r\n  config.loginPage = '/intern/login.php'\r\n  config.prod = false\r\n} else {    \r\n  config.hostname = 'www.tcolching.de'\r\n  config.protokoll = 'https://'\r\n  config.loginPage = '/intern/login.php'\r\n  config.prod = true\r\n}\r\n\r\nconst IMPORTANT = \"text-danger\"\r\nconst MSG = \"text-info\"\r\nconst NOSAVE = false\r\nconst SAVE = true\r\n\r\nexport const messages = {\r\n  gast: [IMPORTANT, NOSAVE, '- Bitte den Gastnamen ins Kommentarfeld schreiben und die Gebühr innerhalb einer Woche überweisen!'],\r\n  mitglied: [IMPORTANT, NOSAVE, '- Bitte nur für Mitglieder ohne Email verwenden und den Namen ins Kommentarfeld schreiben!'],\r\n  veranstaltung: [IMPORTANT, SAVE, '- Bitte den Veranstaltungsanlass ins Kommentarfeld schreiben und den Vorstand informieren!'],\r\n  spieleranzahl: [IMPORTANT, NOSAVE, '- Bitte alle Personen eintragen!'],\r\n  jugendvorrecht: [MSG, SAVE, '- Achtung: Jugendliche haben auf Platz 6 zu dieser Zeit Vorrecht!'],\r\n  erwachsenenvorrecht: [IMPORTANT, NOSAVE, '- Buchung erst 15 Minuten vor Spielbeginn möglich, da erwachsene Vollmitglieder abends ab 17:00 Uhr Vorrecht haben.'],\r\n  einzeldauer: [IMPORTANT, NOSAVE, '- Für ein Einzel maximal 60 Minuten buchen'],\r\n  doppeldauer: [IMPORTANT, NOSAVE, '- Für ein Doppel maximal 120 Minuten buchen'],\r\n  turnier: [MSG, SAVE, '- Turnierspiele 120 Minuten. Falls möglich auf Platz 1 buchen. Parallel sollte ein Platz auf der Anlage nicht durch Turniere oder Training belegt sein! Wer Mannschaftstraining hat, darf nur auf den Plätzen der Mannschaft Turnier spielen.'],\r\n  turnierspieldauer: [IMPORTANT, NOSAVE, '- Turnierspiele 120 Minuten. Falls möglich auf Platz 1 buchen. Parallel sollte ein Platz auf der Anlage nicht durch Turniere oder Training belegt sein! Wer Mannschaftstraining hat, darf nur auf den Plätzen der Mannschaft Turnier spielen.'],\r\n  zeit: [IMPORTANT, NOSAVE, '- Der Start muss vor dem Ende liegen!'],\r\n  platzbelegt:  [IMPORTANT, NOSAVE, '- Platz bereits belegt!'],\r\n};\r\nfor (let i = 1; i <= config.anzahlPlaetze; i++) {\r\n  config.platzArray.push(i);\r\n}\r\n\r\n// ******* Rechtevergabe **********\r\nexport const permissions = {\r\n  // Es gibt 16 Rechte. Übereinandergelegt\r\n  \r\n  // Recht:        1 2 3 4  5  6  7   8   9  10   11   12   13   14    15    16\r\n  // Dezimalwert:  1 2 4 8 16 32 64 128 256 512 1024 2048 4096 8192 16384 32768 \r\n  //\r\n  // Summen daraus sind kombinierte Rechte, z.B. \r\n  //                3 ist Recht 1 und Recht 2\r\n  //               15 ist Recht 1, 2, 3, 4 (1+2+4+8)\r\n  //              128 ist Recht 8\r\n  //              143 ist Recht 1,2,3,4,8\r\n    NONE : 0,\r\n    MANNSCHAFTSFUEHRER : 32,\r\n    WIRT : 64,\r\n    T_ALL_PERMISSIONS : 128,    // Turnierverantwortliche\r\n    VORSTAND : 496,             // kombiniert 16, 32, 64, 128, 256\r\n    ADMINISTRATOR : 65535,\r\n};\r\n\r\nexport default config;\r\n","import Config from './Defaults';\r\n\r\nexport const formatDate = (d) => {\r\n  var month = '' + (d.getMonth() + 1),\r\n    day = '' + d.getDate(),\r\n    year = d.getFullYear();\r\n\r\n  if (month.length < 2) month = '0' + month;\r\n  if (day.length < 2) day = '0' + day;\r\n\r\n  return [year, month, day].join('-');\r\n}\r\n\r\n// ***** date array \r\nexport const getDateArray = (start, end) => {\r\n  let dt = new Date(start),\r\n    arr = [];\r\n  while (dt <= end) {\r\n    arr.push({ name: formatDate(dt), text: dt.toLocaleDateString(\"de-DE\", { weekday: 'short', month: 'short', day: 'numeric' }) });\r\n    dt.setDate(dt.getDate() + 1);\r\n  }\r\n  return arr;\r\n}\r\n\r\nexport const isValidDate = (d) => {\r\n  return d instanceof Date && !isNaN(d);\r\n}\r\n\r\nexport const spielerzusatz = (geburtsdatum, schnupper) => {\r\n  let aktuellesJahr = new Date();\r\n  aktuellesJahr = aktuellesJahr.getFullYear();\r\n  let geburtsjahr = new Date(geburtsdatum);\r\n  geburtsjahr = geburtsjahr.getFullYear();\r\n  const jugend = (aktuellesJahr - geburtsjahr) < 18 ? true : false;\r\n  // console.log(`${geburtsdatum} ${geburtsjahr} ${aktuellesJahr} ${jugend}` );\r\n  let zusatz = ' (' + (jugend ? 'Jug' : '') + (Number(schnupper) === 1 ? ',Schn' : '') + ')'\r\n  zusatz = zusatz.replace('(,', '(')\r\n  zusatz = zusatz.replace('()', '')\r\n  return zusatz\r\n}\r\n\r\n// jugendlicher = nicht voll Berechtigt\r\nexport const jugendlicher = (geburtsdatum) => {\r\n  if (typeof (geburtsdatum) === 'undefined' || geburtsdatum === null) {\r\n    return false;\r\n  }\r\n  let aktuellesJahr = new Date();\r\n  aktuellesJahr = aktuellesJahr.getFullYear();\r\n  let geburtsjahr = new Date(geburtsdatum);\r\n  geburtsjahr = geburtsjahr.getFullYear();\r\n  const jugend = ((aktuellesJahr - geburtsjahr) < 18) ? true : false;\r\n  // console.log(`${geburtsdatum} ${geburtsjahr} ${aktuellesJahr} ${jugend}` );\r\n  return jugend;\r\n}\r\n\r\n// Serverzeit?\r\nexport const servertimeNow = () => {\r\n  const cookies = parseCookie(document.cookie)\r\n  const servertime = cookies['servertime']\r\n  const st = new Date(Number(servertime))\r\n  return st\r\n}\r\n\r\n//#Source https://bit.ly/2neWfJ2 \r\nconst parseCookie = str =>\r\n  str\r\n    .split(';')\r\n    .map(v => v.split('='))\r\n    .reduce((acc, v) => {\r\n      acc[decodeURIComponent(v[0].trim())] = decodeURIComponent(v[1].trim());\r\n      return acc;\r\n    }, {});\r\n\r\n\r\n// Setze alle Zeiten auf false, die nicht als Start verwendet werden dürfen\r\nexport function getBookableTimes(tt) {\r\n  // Zu welchem Slot kann auf einem Platz gestartet werden?\r\n  let startBooking = ['--', '--', '--', '--', '--', '--']\r\n  for (let slot in tt) {  // Iteration über die Indizes der Slots\r\n    for (let p in tt[slot]) { // Iteration über die Indizes (0 - 5) der Plätze je Viertelstunden\r\n      if (startBooking[p] === '--' && tt[slot][p] === Config.platzBelegt) {  // Wenn ein Platz an einer Stelle nicht buchbar ist, ist er \"..\"\r\n        startBooking[p] = slot.substr(19, 2) // Merke dir die Minuten des Slots. An Pos 19 sind die Minuten\r\n      }\r\n    }\r\n  }\r\n  // Alle Plätze nur zu möglichen Startzeiten erlauben, andere Zeiten sperren (\"--\")\r\n  // z. B. Wenn eine Buchung um xx:30 Uhr besteht, dann sind keine Buchungen zur vollen Stunde erlaubt, \r\n  // um nicht Lücken entstehen zu lassen\r\n  // *****************  DERZEIT INAKTIV!!! ******************\r\n  const timetable = []\r\n  for (let slot in tt) {  // Iteration über die Indizes der Viertelstunden (0..51)\r\n    timetable[slot] = []\r\n    for (let p in tt[slot]) { // Iteration über die Indizes (0 - 5) der Plätze je Viertelstunden\r\n      // console.log(\"p, tt[slot][p]: \", p, tt[slot][p])\r\n      if (startBooking[p] === '--') { // Auf diesem Platz p gibt es an diesem Tag noch keine Buchung\r\n        timetable[slot][p] = tt[slot][p]  // Platzziffer übernehmen\r\n      }\r\n      else {\r\n        if ((startBooking[p] === slot.substr(19, 2) || tt[slot][p] === Config.platzBelegt)) {  // Das ist eine gültige Zeit für einen Platz\r\n          timetable[slot][p] = tt[slot][p] // Platzziffer (oder eben Sperrzeichen) übernehmen\r\n        } else {\r\n          timetable[slot][p] = Config.platzLeer\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return timetable\r\n}\r\n\r\n// Liefere die Daten für einen HTML-SELECT mit belegten und freien Zeiten\r\nexport function getTimetable(belegungen) {\r\n  // Erzeuge alle Zeiten als Timestamps für den HTML-Select in einem zweidimensionalen Objekt\r\n  // mit Uhrzeiten im Slot-Takt (z. B. 30 oder 15 Minutene, je nach Config)\r\n  // in der Form {<uhrzeit> : {platz: <platz>, <aktiv|inaktiv>}}\r\n\r\n  let zeit = new Date();\r\n  let endeTag = new Date();\r\n\r\n  // Die Timetable erzeugen, alle Plätze und Zeiten \"frei\", also Anzeige der Platznummer\r\n  zeit.setHours(8, 0, 0, 0);\r\n  endeTag.setHours(21, 0, 0, 0);\r\n  const timetable = [];\r\n  for (; zeit <= endeTag; zeit = new Date(zeit.getTime() + Config.slotMinimalMinutes)) {\r\n    const tagesZeit = zeit.toTimeString().substr(0, 5)\r\n    timetable[tagesZeit] = [];\r\n    for (let i = 1; i <= Config.anzahlPlaetze; i++) {\r\n      timetable[tagesZeit].push(i);\r\n    }\r\n  }\r\n\r\n  // Jetzt belegte Zeiten mit \"X\" belegen\r\n  // Wir haben 2 Objekte: \r\n  // 1. Wir iterieren über die Belegungen, sortiert nach Anfangszeit und Platz. \r\n  // 2. timetable, auf das wir direkt über die Zeit zugreifen\r\n  // console.log(belegungen)\r\n  for (let bKey in belegungen) {\r\n    let sa = new Date(belegungen[bKey].starts_at);\r\n    let ea = new Date(belegungen[bKey].ends_at);\r\n    // console.log(belegungen[bKey].starts_at + \", \" + belegungen[bKey].ends_at)\r\n    let anzahlSlots = (ea - sa) / Config.slotMinimalMinutes;\r\n    for (let i = 0; i < anzahlSlots; i++) {\r\n      let saTmp = new Date(sa.getTime() + (i * Config.slotMinimalMinutes));\r\n      let cTmp = Number(belegungen[bKey].court) - 1;\r\n      timetable[saTmp.toTimeString().substr(0, 5)][cTmp] = Config.platzBelegt;\r\n      // console.log(saTmp, timetable[saTmp][cTmp], ', court: ', cTmp)\r\n    }\r\n  }\r\n  return timetable;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n///////////////////////// KANN DAS FUNKTIONIEREN??? //////////////////////\r\n// const Model = () => {\r\n//   let liste = {};\r\n//   registerListener(callback) {\r\n//     liste                               ;\r\n//   }\r\n//   unregisterListener(callback) {\r\n//     callback.setTafelDatum(this.tafelDatum)///////////////////////////////////\r\n//   }\r\n// }\r\n\r\n// Auswahl über Mausposition???\r\n// handleClick (e) {\r\n\r\n//   var offset = $(this).offset();\r\n//   var hoehe = $(this).height(); \r\n//   var relativeX = (e.pageX - offset.left);\r\n//   var relativeY = (e.pageY - offset.top);\r\n//   var halbeStdHoehe = (hoehe - 30)/13;     \r\n//   var std = relativeY/halbeStdHoehe;\r\n//   var minuten = Math.round((std - Math.floor(std))) * 30;\r\n//   std = Math.floor(std) + 7;\r\n\r\n//   alert(\"X: \" + relativeX + \"  Y: \" + relativeY + \" Zeit: \" + std + \":\" + minuten + \" h, Höhe: \" + hoehe);\r\n\r\n// };\r\n","import React, { Component } from 'react';\r\nimport classNames from 'classnames';\r\nimport { Link } from 'react-router-dom';\r\nimport { spielerzusatz } from './functions';\r\nimport Config, { permissions } from './Defaults';\r\n\r\n\r\n// Alle Belegungen an diesem Tag für einen Platz\r\n\r\nclass Platz extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = { \r\n      courtData: [],\r\n      isLoading : false,\r\n      error : false,\r\n      width: window.innerWidth,\r\n      zumBelegungstag: false,\r\n    };\r\n  }\r\n  \r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.day !== prevProps.day) {\r\n      const {court, day, permissions} = this.props;\r\n      this.fetchPlatz(court, day, permissions);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { court, day, permissions } = this.props;\r\n    this.fetchPlatz(court, day, permissions);\r\n  }\r\n  \r\n  fetchPlatz(court, day, uPermissions) {\r\n    const userIsAllowed = ((permissions.MANNSCHAFTSFUEHRER & uPermissions) > 0);\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/platz.php?op=ra&p=\" + court + \"&ds=\" + day + \"&de=\" + day;\r\n    window.addEventListener('resize', this.handleWindowSizeChange);\r\n    \r\n    this.setState({isLoading : true});\r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then(result => {\r\n      if (result.ok) {\r\n        if (result.redirected) {\r\n          // console.log(\"Platz.js/Checkuser: Authentifizierungsfehler\")\r\n          window.location.href = result.url\r\n        }\r\n        return result.json();\r\n        } else {\r\n          // In diesem Fall haben wir einen neuen, noch unbebuchten Tag\r\n          this.setState({isLoading : false});\r\n        }\r\n      })\r\n    .then (result => {\r\n      let courtData = result.records.map ( r => {\r\n        let k = r.id\r\n        let spieler\r\n        let cn = computeBelClasses (r.starts_at, r.ends_at, r.booking_type);\r\n        spieler = formatSpieler(r, this.props.platzWide)\r\n\r\n        if ( !userIsAllowed && (r.booking_type.match(/(ts-training)|(ts-punktspiele)|(ts-nichtreservierbar)|(ts-veranstaltung)/ig)))\r\n        {\r\n          return ( \r\n            <div key={k} className={cn}>\r\n              <strong>{r.starts_at.substring(11,16)}</strong> {spieler} \r\n              <div> {r.comment} </div>\r\n            </div>\r\n          )\r\n        } else {\r\n          return ( \r\n            <Link key={k} className={cn} to={{ pathname: '/intern/tafel/belegung', state: {c: court, i: r.id, d: day, op: 'update'} }}>\r\n              <strong>{r.starts_at.substring(11,16)}</strong> {spieler}\r\n              <div> {r.comment} </div>\r\n            </Link>\r\n          )\r\n        }\r\n      })\r\n      this.setState({courtData: courtData});\r\n      this.setState({isLoading : false});\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.handleWindowSizeChange);\r\n  }\r\n\r\n  handleWindowSizeChange = () => {\r\n    // this.setState({ width: window.innerWidth });\r\n    this.setState({ zumBelegungstag: true });\r\n  };\r\n  \r\n  render() {\r\n    return this.state.courtData;\r\n  }\r\n}\r\n\r\n// Spielernamen bilden\r\nconst formatSpieler = (r, platzWide) =>\r\n{\r\n  let spieler = []\r\n  \r\n  // Vorname und Name verketten. Vorname bei wenig Platz abkürzen\r\n  spieler[0] = (r.p1vn ? (platzWide ? r.p1vn : r.p1vn.charAt(0) + '.') + ' ' + r.p1nn : (r.p1nn) ? r.p1nn : '') + spielerzusatz(r.p1geb, r.schnupper1)\r\n  spieler[1] = (r.p2vn ? (platzWide ? r.p2vn : r.p2vn.charAt(0) + '.') + ' ' + r.p2nn : (r.p2nn) ? r.p2nn : '') + spielerzusatz(r.p2geb, r.schnupper2)\r\n  spieler[2] = (r.p3vn ? (platzWide ? r.p3vn : r.p3vn.charAt(0) + '.') + ' ' + r.p3nn : (r.p3nn) ? r.p3nn : '') + spielerzusatz(r.p3geb, r.schnupper3)\r\n  spieler[3] = (r.p4vn ? (platzWide ? r.p4vn : r.p4vn.charAt(0) + '.') + ' ' + r.p4nn : (r.p4nn) ? r.p4nn : '') + spielerzusatz(r.p4geb, r.schnupper4)\r\n  \r\n  // Führende Punkt und Whitespace entfernen, falls es sowas gibt\r\n  spieler = spieler.map( s => s.replace(new RegExp(/^[\\.\\s]+/g), '') )\r\n  \r\n  spieler = spieler.join(', ')\r\n\r\n  // ... und trailing Kommas, Whitespaces entfernen\r\n  spieler = spieler.replace(new RegExp(/[,\\s]*$/g), '')\r\n\r\n  return spieler\r\n\r\n}\r\n\r\n// CSS-Klassen bilden für die Positionierung und Höhe einer Belegung auf der Tafel\r\nconst computeBelClasses = (s, e, bookingType) =>\r\n{\r\n  // Dauer berechnen, also z. B. '2019-05-02 16:00:00' - '2019-05-02 14:00:00' = 120\r\n  const dauer = (Number(e.substring(11,13))*60 + Number(e.substring(14,16))) - (Number(s.substring(11,13))*60 + Number(s.substring(14,16)));\r\n  const bt = bookingType\r\n  let cn = classNames(\r\n    'D-' + dauer,\r\n    'ts', \r\n    'T-' + s.substring(11, 16).replace(':', '-'),\r\n    bt\r\n    );\r\n  return cn;\r\n}\r\n\r\nexport default Platz;\r\n","import React, { Component } from 'react';\r\nimport ScrollMenu from 'react-horizontal-scrolling-menu';\r\nimport {getDateArray} from \"./functions\";\r\nimport Config from './Defaults';\r\n\r\n\r\n// Das ist das Array mit den Tagen\r\nlet list = [];\r\n\r\n// One item component\r\n// selected prop will be passed\r\nconst MenuItem = ({ text, selected }) => {\r\n  return (\r\n    <div className={`dateBtn ${selected ? 'aktiv' : ''}`}>\r\n      {text}\r\n    </div>\r\n  );\r\n};\r\n\r\n// All items component\r\n// Important! add unique key\r\nexport const Menu = (list) => list.map(el => {\r\n  const { name, text } = el;\r\n\r\n  return (\r\n    <MenuItem\r\n      text={text}\r\n      key={name}\r\n    />\r\n  );\r\n});\r\n\r\nconst Arrow = ({ text, className }) => {\r\n  return (\r\n    <div\r\n      // className={className}\r\n      className=\"dateBtn arrowPicker\"\r\n    >{text}</div>\r\n  );\r\n};\r\n\r\nconst ArrowLeft = Arrow({ text: '<', className: 'arrow-prev' });\r\nconst ArrowRight = Arrow({ text: '>', className: 'arrow-next' });\r\n\r\nclass DayPicker extends Component {\r\n  state = {\r\n    selected: 0\r\n  };\r\n\r\n  componentWillMount() {\r\n    const {startswith, day} = this.props;\r\n    let end = new Date(day);\r\n    end.setDate(end.getDate() + Config.daypickerMaxDays);\r\n    list = getDateArray(startswith, end);\r\n    this.setState({selected: day});\r\n  }\r\n\r\n  onSelect = key => {\r\n    this.setState({ selected: key }, () => this.props.onClickHandler(key));\r\n  }\r\n  render() {\r\n    const { selected } = this.state;\r\n    // Create menu from items\r\n    const menu = Menu(list, selected);\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <ScrollMenu\r\n          data={menu}\r\n          arrowLeft={ArrowLeft}\r\n          arrowRight={ArrowRight}\r\n          selected={selected}\r\n          onSelect={this.onSelect}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default DayPicker;\r\n  \r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport Platz from \"./Platz\";\r\nimport DayPicker from \"./DayPicker\";\r\nimport \"./tafel.css\";\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport config from './Defaults';\r\nimport {formatDate, isValidDate} from \"./functions\";\r\nimport { Link } from 'react-router-dom';\r\n\r\n// Layout eines Tages\r\n\r\nclass Belegungstag extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      width: window.innerWidth,\r\n      day: '',\r\n      dayDate: '',\r\n    };\r\n  }    \r\n  componentWillMount() {\r\n    window.addEventListener('resize', this.handleWindowSizeChange);\r\n    let dayDate = this.props.match.params.day;\r\n    if ( ! isValidDate(new Date(dayDate)) ) {\r\n      dayDate = new Date();\r\n    } else {\r\n      dayDate = new Date(dayDate);\r\n    }\r\n    this.setState({ dayDate: dayDate, day: formatDate(dayDate) });\r\n    // let day = \"2019-05-02\";\r\n    this.setDay = this.setDay.bind(this);\r\n  }\r\n\r\n  // make sure to remove the listener\r\n  // when the component is not mounted anymore\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.handleWindowSizeChange);\r\n  }\r\n\r\n  handleWindowSizeChange = () => {\r\n    this.setState({ width: window.innerWidth });\r\n  };\r\n\r\n  setDay(dString) {\r\n    const d = new Date(dString);\r\n    this.setState({dayDate: d, day: formatDate(d)});\r\n  }\r\n    \r\n  render() {\r\n    const { width } = this.state;\r\n    let firstDaypickerDay = new Date();\r\n\r\n    // //### TESTDATEN ###################\r\n    // firstDaypickerDay = new Date(2020, 4, 22);\r\n    \r\n    const isMobile = (width <= config.smartphoneWidth);\r\n    if (isMobile) {\r\n      firstDaypickerDay.setDate(firstDaypickerDay.getDate() - config.daypickerDaysBeforeToday);\r\n      const courtDiv = config.platzArray.map( (court) => {\r\n        return (\r\n          <div key={court} id={\"platz\" + court}>\r\n            <table className=\"table\">\r\n              <tbody>\r\n                <tr className=\"platzDim\">\r\n                  <td className=\"zeitleisteCol\"><Zeitleiste /></td>\r\n                  <td className=\"platz\">\r\n                    <div className=\"platznummer\">\r\n                      <span className=\"platzziffer\">{court}</span> \r\n                      <Link to={{pathname: '/intern/tafel/belegung', state: {c: court, d: this.state.day, op: 'new'} }}><img  className=\"neuBtn p-1 rounded-circle\" src=\"images/add.png\" alt=\"Neue Belegung\" /></Link> \r\n                    </div>\r\n                    <div>\r\n                      <Platz court={court} day={this.state.day} permissions={this.props.permissions} platzWide={true} />\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )\r\n      })\r\n      return (\r\n        <div>\r\n          <DayPicker startswith={firstDaypickerDay} day={this.state.day} onClickHandler={this.setDay} />\r\n          <SwipeableViews>\r\n            {courtDiv}\r\n          </SwipeableViews>\r\n          <Legende />\r\n        </div>\r\n      )\r\n    } else {\r\n      firstDaypickerDay.setDate(firstDaypickerDay.getDate() - config.daypickerDaysBeforeTodayWide);\r\n      const courtDiv = config.platzArray.map( (court) => {\r\n        return (<td key={court} id={\"platz\" + court} className=\"platz\">\r\n          <div>\r\n            <div className=\"platznummer\">\r\n              <span className=\"platzziffer rounded-circle\">{court}</span> \r\n              <Link to={{pathname: '/intern/tafel/belegung', state: {c: court, d: this.state.day, op: 'new'} }}><img  className=\"neuBtn p-1 rounded-circle\" src=\"images/add.png\" alt=\"Neue Belegung\" /></Link> \r\n            </div>\r\n            <div>            \r\n              <Platz court={court} day={this.state.day} permissions={this.props.permissions} platzWide={false} />\r\n              </div>\r\n            </div>\r\n          </td>\r\n        )\r\n      })\r\n      return (\r\n        <div>\r\n          <DayPicker startswith={firstDaypickerDay} day={this.state.day} onClickHandler={this.setDay} />\r\n          <table className=\"table\">\r\n            <tbody>\r\n              <tr className=\"platzDim\">\r\n                <td className=\"zeitleisteCol\"><Zeitleiste /> </td>\r\n                {courtDiv}\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          <Legende />\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nconst Zeitleiste = () => {\r\n  let zeit = [];\r\n  for (let s = config.dailyStartTime; s <= config.dailyEndTime; s++) {\r\n    for (let m = 0; m < 60; m=m+60) {\r\n      zeit.push (s.toString().padStart(2, '0') + ':' + m.toString().padStart(2, '0'));\r\n    }\r\n  } \r\n  return (\r\n    <div className=\"zeitleiste\">\r\n      {\r\n        zeit.map((e, index) => \r\n          <React.Fragment key={index}>\r\n            <div className=\"stunde\"><div className=\"stundetext\">{e}</div></div>\r\n            <div className=\"viertelstunde\"></div>\r\n            <div className=\"viertelstunde\"></div>\r\n            <div className=\"viertelstunde\"></div>\r\n          </React.Fragment>\r\n        )\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Legende = () => {\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row l-einzeldoppel p-0 pl-1 m-1\">Einzel/Doppel</div>\r\n      <div className=\"row l-turnier p-0 pl-1 m-1\">Turnier</div>\r\n      <div className=\"row l-veranstaltung p-0 pl-1 m-1\">Veranstaltung</div>\r\n      <div className=\"row l-punktspiele p-0 pl-1 m-1\">Punktspiele</div>\r\n      <div className=\"row l-training p-0 pl-1 m-1\">Training</div>\r\n      {/* <div className=\"row l-nichtreservierbar p-0 pl-1 m-1\">Frei verfügbar / Anderes</div> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Belegungstag;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","//\r\nimport React, { Component } from 'react';\r\nimport Config, { messages as Messages, permissions as Permissions } from './Defaults';\r\nimport { Redirect } from 'react-router';\r\nimport { spielerzusatz, servertimeNow, jugendlicher as isJugendlicher, getTimetable } from './functions';\r\nimport _ from 'lodash';\r\nimport Holidays from 'date-holidays';\r\n\r\nclass BelForm extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSave = this.handleSave.bind(this);\r\n    this.handleDelete = this.handleDelete.bind(this);\r\n\r\n    const { r } = props;\r\n    // Daten für Datum, Start und Ende extrahieren\r\n    let [sd, st] = r.starts_at.split(' ')\r\n    let scd = new Date(sd)\r\n    let ssd = servertimeNow()\r\n    scd.setHours(0, 0, 0, 0)\r\n    ssd.setHours(0, 0, 0, 0)\r\n\r\n    const dateIsToday = (scd.valueOf() === ssd.valueOf())\r\n\r\n    // Initialer Wert für neue Buchungen. Wenn Einzel/Doppel erlaubt/nicht erlaubt sind, hier ändern\r\n    const bookingType = (r.booking_type === '') ? (dateIsToday ? 'ts-einzel' : 'ts-turnier') : r.booking_type\r\n    const userDarfAlles = [Number([r.user_id]),Number([r.p1id]),Number([r.p2id]),Number([r.p3id]),Number([r.p4id])].includes(Number(this.props.userId)) \r\n    const deleteActive =  userDarfAlles || (Permissions.VORSTAND === (Permissions.VORSTAND & this.props.permissions))\r\n      \r\n    let [ed, et] = r.ends_at.split(' ');\r\n    let sdA = sd.split('-');\r\n    this.state = {\r\n      r: r,\r\n      spieltag: sdA[2] + '.' + sdA[1] + '.' + sdA[0],\r\n      startsAtDate: sd,\r\n      endsAtDate: ed,\r\n      startsAt: st.substring(0, 5),\r\n      endsAt: et.substring(0, 5),\r\n      bookingType: bookingType,\r\n      comment: (typeof r.comment === \"undefined\") ? \"\" : r.comment,\r\n      p1: (r.p1id === 0 ? Number(this.props.userId) :  Number(r.p1id)),\r\n      p2: Number(r.p2id),\r\n      p3: Number(r.p3id),\r\n      p4: Number(r.p4id),\r\n      p1Schn: r.schnupper1,\r\n      p2Schn: r.schnupper2,\r\n      p3Schn: r.schnupper3,\r\n      p4Schn: r.schnupper4,\r\n      spieler: [],\r\n      belegungenAbJetzt: [],\r\n      court: (typeof r.court === \"undefined\") ? \"--\" : r.court,\r\n      zurTafel: false,\r\n      saveActive: false,\r\n      deleteActive: deleteActive,\r\n      endeActive: false,\r\n      admin: false,\r\n      dateIsToday: dateIsToday,\r\n      overbooked: false,\r\n      jugend: false,\r\n      nichtVollBerechtigte: false,\r\n      timetable: [],\r\n      isLoading1: true,\r\n      isLoading2: true,\r\n      courtBelegt: [],\r\n    };\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n    // Alle Spieler für die Select-Auswahl laden    \r\n    let url = Config.protokoll + Config.hostname + \"/intern/api/spieler.php\";\r\n    this.setState({ isLoading1: true });\r\n    fetch(url, { credentials: 'same-origin' })\r\n      .then(result => {\r\n        if (result.ok) {\r\n          // console.log(result);\r\n          return result.json();\r\n        } else {\r\n          throw new Error('Fehler beim Laden der Spielerdaten');\r\n        }\r\n      })\r\n      .then(result => {\r\n        let spieler = result.records;\r\n        // console.log(spieler);\r\n        this.setState({ spieler: spieler, isLoading1: false })\r\n      })\r\n      .catch(error => this.setState({ error, isLoading1: false }));\r\n\r\n    // Alle Belegungen des Tages für die Belegungsprüfung laden\r\n    url = Config.protokoll + Config.hostname + \"/intern/api/belegungenabjetzt.php\";\r\n    this.setState({ isLoading2: true });\r\n    fetch(url, { credentials: 'same-origin' })\r\n      .then(result => {\r\n        if (result.ok) {\r\n          // console.log(result);\r\n          return result.json();\r\n        } else {\r\n          throw new Error('Fehler beim Laden der Belegungsdaten');\r\n        }\r\n      })\r\n      .then(result => {\r\n        // console.log(result.records)\r\n        // this.setState({ timetable: getBookableTimes(getTimetable(result.records)), isLoading2: false }); \r\n        this.setState({ timetable: getTimetable(result.records), isLoading2: false });\r\n\r\n      })\r\n      .catch(error => this.setState({ error, isLoading2: false }));\r\n\r\n  }\r\n\r\n  render() {\r\n    const { isLoading1, isLoading2 } = this.state;\r\n    if (isLoading1 || isLoading2) {\r\n      return <p>Loading...</p>\r\n    }\r\n    if (this.state.zurTafel === true) {\r\n      return <Redirect to={{ pathname: \"/intern/tafel/\", state: this.state.startsAtDate }} />\r\n    }\r\n    const condMF = (Permissions.MANNSCHAFTSFUEHRER === (Permissions.MANNSCHAFTSFUEHRER & this.props.permissions))\r\n    return (\r\n      <div>\r\n        <h1>Spieltag: {this.state.spieltag}</h1>\r\n        <form className=\"form-inline\">\r\n          <fieldset className=\"fields\">\r\n            <div><strong>Buchungstyp</strong></div>\r\n            {!this.state.dateIsToday &&\r\n              <div>Einzel-/Doppel-Buchung nur am aktuellen Tag möglich</div>\r\n            }\r\n            <select id=\"bookingType\" className=\"form-control\" onChange={this.handleChange} value={this.state.bookingType}>\r\n              <option disabled={!this.state.dateIsToday} value=\"ts-einzel\">Einzel</option>\r\n              <option disabled={!this.state.dateIsToday} value=\"ts-doppel\">Doppel</option>\r\n              <option value=\"ts-turnier\">Turnier</option>\r\n              <option disabled={!condMF} value=\"ts-veranstaltung\">Veranstaltung</option>\r\n              <option disabled={!condMF} value=\"ts-training\">Training</option>\r\n              <option disabled={!condMF} value=\"ts-punktspiele\">Punktspiele</option>\r\n            </select>\r\n            <div><strong>Start</strong> <span id=\"startsAtMsg\" className={this.state.startsAtMsgClass}>{this.state.startsAtMsgTxt}</span></div>\r\n            <div className=\"form-group\">\r\n              <div>\r\n                <select id=\"startsAt\" className={'form-control ' + this.state.startsAtMsgClass} onChange={this.handleChange} value={this.state.startsAt}>\r\n                  {\r\n                    Object.keys(this.state.timetable).map(ttl => {\r\n\r\n                      return (\r\n                        <option key={ttl} value={ttl}>\r\n                          {ttl}h \r\n                          &nbsp; {this.state.timetable[ttl][0]} \r\n                          &nbsp; {this.state.timetable[ttl][1]} \r\n                          &nbsp; {this.state.timetable[ttl][2]} \r\n                          &nbsp; {this.state.timetable[ttl][3]} \r\n                          &nbsp; {this.state.timetable[ttl][4]} \r\n                          &nbsp; {this.state.timetable[ttl][5]}\r\n                        </option>\r\n                      )\r\n                    })\r\n                  }\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div><strong>Platz</strong></div>\r\n              <div className=\"form-group\">\r\n                <select id=\"court\" className=\"form-control\" onChange={this.handleChange} value={this.state.court}>\r\n                  <option value=\"--\">--</option>\r\n                  <option disabled={this.state.courtBelegt[0]} value=\"1\">1</option>\r\n                  <option disabled={this.state.courtBelegt[1]} value=\"2\">2</option>\r\n                  <option disabled={this.state.courtBelegt[2]} value=\"3\">3</option>\r\n                  <option disabled={this.state.courtBelegt[3]} value=\"4\">4</option>\r\n                  <option disabled={this.state.courtBelegt[4]} value=\"5\">5</option>\r\n                  <option disabled={this.state.courtBelegt[5]} value=\"6\">6</option>\r\n                </select>\r\n              </div>\r\n          <div><strong>Ende</strong></div>\r\n             <div className=\"form-group\">\r\n             <div>\r\n                <select id=\"endsAt\" className={'form-control ' + this.state.startsAtMsgClass} onChange={this.handleChange} value={this.state.endsAt}>\r\n                  {\r\n                    Object.keys(this.state.timetable).map(ttl => {\r\n                      return (\r\n                        <option disabled={!this.state.endeActive} key={ttl} value={ttl}>\r\n                          {ttl}h \r\n                          {/* &nbsp; {this.state.timetable[ttl][0]} \r\n                          &nbsp; {this.state.timetable[ttl][1]} \r\n                          &nbsp; {this.state.timetable[ttl][2]} \r\n                          &nbsp; {this.state.timetable[ttl][3]} \r\n                          &nbsp; {this.state.timetable[ttl][4]} \r\n                          &nbsp; {this.state.timetable[ttl][5]} */}\r\n                        </option>\r\n                      )\r\n                    })\r\n                  }\r\n                </select>\r\n              </div>\r\n\r\n            </div>\r\n            <div><strong>{(this.state.bookingType.match(/(ts-einzel)|(ts-doppel)|(ts-turnier)/ig)) ? 'Spieler' : 'Verantwortlicher'}</strong> <span id=\"p1Msg\" className={this.state.p1MsgClass}>{this.state.p1MsgTxt}</span></div>\r\n            <div className=\"form-row\">\r\n              <select id=\"p1\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p1}>\r\n                <option value=\"0\">- Bitte auswählen -</option>\r\n                {this.state.spieler.map(r => {\r\n                  return (\r\n                    <option key={'p1' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum, r.schnupper)}</option>\r\n                  )\r\n                })}\r\n              </select>\r\n              {(this.state.bookingType.match(/(ts-einzel)|(ts-turnier)|(ts-doppel)/ig)) ?\r\n                <select id=\"p2\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p2}>\r\n                  <option value=\"0\">- Bitte auswählen -</option>\r\n                  {this.state.spieler.map(r => {\r\n                    return (\r\n                      <option key={'p2' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum, r.schnupper)}</option>\r\n                    )\r\n                  })}\r\n                </select>\r\n                : ''\r\n              }\r\n            </div>\r\n            <div className=\"form-row\">\r\n              {(this.state.bookingType === \"ts-doppel\") ?\r\n                <select id=\"p3\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p3}>\r\n                  <option value=\"0\">- Bitte auswählen -</option>\r\n                  {this.state.spieler.map(r => {\r\n                    return (\r\n                      <option key={'p3' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum, r.schnupper)}</option>\r\n                    )\r\n                  })}\r\n                </select>\r\n                : ''\r\n              }\r\n              {(this.state.bookingType === \"ts-doppel\") ?\r\n                <select id=\"p4\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p4}>\r\n                  <option value=\"0\">- Bitte auswählen -</option>\r\n                  {this.state.spieler.map(r => {\r\n                    return (\r\n                      <option key={'p4' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum, r.schnupper)}</option>\r\n                    )\r\n                  })}\r\n                </select>\r\n                : ''\r\n              }\r\n            </div>\r\n\r\n            <div><strong>Bemerkung</strong> <span id=\"commentMsg\" className={this.state.commentMsgClass}>{this.state.commentMsgTxt}</span></div>\r\n            <div className=\"form-group\">\r\n              <input type=\"text\" id=\"comment\" className={'form-control w-100 ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.comment} placeholder=\"Spielergebnis, Gastname, ...\" />\r\n            </div>\r\n\r\n            <button type=\"submit\" onClick={e => { this.handleSave(e) }} className=\"btn btn-primary m-1\" disabled={!this.state.saveActive}>Speichern</button>\r\n            <button type=\"submit\" onClick={e => { this.handleDelete(e) }} className=\"btn btn-primary m-2\" disabled={!this.state.deleteActive}>Löschen</button>\r\n          </fieldset>\r\n        </form>\r\n      </div >\r\n    )\r\n  }\r\n\r\n  handleSave(e) {\r\n    e.preventDefault();\r\n    // console.log(\"SAVE FORM DATA NOW!\");\r\n    const s = {}\r\n    // Meldungen zurücksetzen\r\n    s.startsAtMsgTxt = ''\r\n    s.startsAtMsgClass = ''\r\n    s.saveActive = true\r\n    s.p1MsgFormCtrl = ''\r\n\r\n    let parameters =\r\n      '?op=cu'\r\n      + '&rid=' + this.state.r.id\r\n      + '&ds=' + this.state.startsAtDate + ' ' + this.state.startsAt\r\n      + '&de=' + this.state.endsAtDate + ' ' + this.state.endsAt\r\n      + '&uid=' + this.props.userId\r\n      + '&p1=' + this.state.p1\r\n      + '&p2=' + this.state.p2\r\n      + '&p3=' + this.state.p3\r\n      + '&p4=' + this.state.p4\r\n      + '&c=' + this.state.court\r\n      + '&t=' + this.state.bookingType\r\n      + '&cmt=' + this.state.comment\r\n      + '&pr=0'\r\n      ;\r\n    let url = Config.protokoll + Config.hostname\r\n      + '/intern/api/platz.php'\r\n      + parameters;\r\n    // console.log(url);\r\n    fetch(url, { credentials: 'same-origin' })\r\n      .then(result => {\r\n        if (result.ok) {\r\n          return result.json()\r\n        } else {\r\n          throw new Error('Fehler beim Erzeugen/Updaten der Belegung' + this.state.r.id);\r\n        }\r\n      })\r\n      .then(result => {\r\n        let rc = result.records[0].returncode;\r\n        if (rc === 'ok') {\r\n          // Logging der Buchung\r\n          let logurl =\r\n            Config.protokoll\r\n            + Config.hostname\r\n            + Config.buchungenlog\r\n            + parameters;\r\n          fetch(logurl, { credentials: 'same-origin' }); // Wenn Logging fehlschlagen sollte, dann verzichten wir eben darauf\r\n          this.setState({ zurTafel: true })\r\n        } else if (rc === 'bereits belegt') {\r\n          // Fehlermeldung\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.platzbelegt;\r\n        } else {\r\n          // User nicht authentifiziert oder etwas stimmt generell nicht\r\n          window.location.href = Config.loginPage\r\n        }\r\n        // Alle Ergebnisse in den State\r\n        this.setState(s)\r\n      })\r\n  }\r\n\r\n  handleDelete(e) {\r\n\r\n    const sdStr = this.state.startsAtDate + 'T' + this.state.startsAt + \"Z\";\r\n    const sd = new Date(sdStr);\r\n    const jetzt = new Date();\r\n\r\n    e.preventDefault();\r\n\r\n    if (sd >= jetzt || (Permissions.VORSTAND & this.props.permissions)) {\r\n      let parameters =\r\n        '?op=d'\r\n        + '&rid=' + this.state.r.id\r\n        + '&uid=' + this.props.userId;\r\n      let url =\r\n        Config.protokoll\r\n        + Config.hostname\r\n        + Config.platzbuchungen\r\n        + parameters;\r\n      fetch(url, { credentials: 'same-origin' })\r\n        .then(result => {\r\n          if (result.ok) {\r\n            // Logging der Buchung\r\n            let logurl = Config.protokoll + Config.hostname\r\n              + Config.buchungenlog\r\n              + parameters;\r\n            fetch(logurl, { credentials: 'same-origin' });\r\n            this.setState({ zurTafel: true });\r\n          }\r\n        })\r\n    } else {\r\n      this.setState({ zurTafel: true });\r\n    }\r\n    e.preventDefault();\r\n\r\n  }\r\n\r\n  handleChange(e) {\r\n    e.preventDefault();\r\n\r\n    this.setState({ [e.target.id]: e.target.value }, () => {\r\n      const s = {}\r\n\r\n      // Meldungen zurücksetzen\r\n      s.p1MsgTxt = ''\r\n      s.p1MsgClass = ''\r\n      s.startsAtMsgTxt = ''\r\n      s.startsAtMsgClass = ''\r\n      s.commentMsgTxt = ''\r\n      s.commentMsgClass = ''\r\n\r\n      s.saveActive = true\r\n      s.deleteActive = true\r\n      s.endeActive = false\r\n      s.p1MsgFormCtrl = ''\r\n      s.overbooked = false\r\n      s.startsAt = this.state.startsAt\r\n\r\n      // Alle nicht buchbaren Zeiten der Timetable deaktivieren\r\n      // s.timetable = getBookableTimes(this.state.timetable)\r\n      s.timetable = this.state.timetable\r\n      // Belegte Plätze im Select disablen\r\n      s.courtBelegt = s.timetable[s.startsAt].map( c => c === Config.platzBelegt )\r\n\r\n      // Endezeit errechnen\r\n      let endsAtViertel = this.state.startsAt.substring(3, 5)\r\n      let endsAtStd = this.state.endsAt.substring(0, 2)\r\n      if (this.state.bookingType === \"ts-einzel\") {\r\n        endsAtStd = (Number(this.state.startsAt.substring(0, 2)) + 1).toLocaleString('de-DE', {minimumIntegerDigits: 2, useGrouping: false})\r\n      } \r\n      else if (this.state.bookingType.match(/(ts-turnier)|(ts-doppel)/ig)) {\r\n        endsAtStd = (Number(this.state.startsAt.substring(0, 2)) + 2).toLocaleString('de-DE', {minimumIntegerDigits: 2, useGrouping: false})\r\n      }\r\n      s.endsAt = endsAtStd + \":\" + endsAtViertel\r\n\r\n      // Bedingungen\r\n      let condEinGast = false\r\n      let condEinMitglied = false\r\n      let condEinSpielerErwVoll = false\r\n      let condDoppelteSpieler = false\r\n      let condUserIstSpieler = false\r\n\r\n      const datestring = this.state.startsAtDate + 'T' + this.state.startsAt + \"Z\"\r\n      const sd = new Date(datestring)\r\n      const hd = new Holidays()\r\n      hd.init('DE', 'BY')\r\n      const condFeiertag = hd.isHoliday(sd) ? true : false\r\n      const condSonnOderFeiertag = (condFeiertag || (sd.getDay() === 0) || (sd.getDay() === 6))\r\n      // const condPlatz6 = (Number(this.state.court) === 6)\r\n\r\n      // Validierung\r\n      // -----------\r\n      // Es wird validiert, ob Erwachsene, Schnuppermitglieder und Jugendliche \r\n      // wirklich spielberechtigt sind und ob die eingetragenen Zeiten stimmen\r\n\r\n      // Buchungszeiten in Minuten\r\n      const start = Number(s.startsAt.substring(0, 2)) * 60 + Number(s.startsAt.substring(3, 5))\r\n      let ende = Number(s.endsAt.substring(0, 2)) * 60 + Number(s.endsAt.substring(3, 5))\r\n\r\n      const pKeys = [Number(this.state.p1), Number(this.state.p2), Number(this.state.p3), Number(this.state.p4)]\r\n\r\n      // Haben wir einen GAST oder ein Mitglied ohne Namen?\r\n      // Ist der aktuelle User auch Spieler?\r\n      pKeys.forEach((p) => {\r\n        if (p != null) // \r\n        {\r\n          if (p === Number(this.props.userId)) {\r\n            condUserIstSpieler = true\r\n          }    if (p === Config.gastId) {\r\n            condEinGast = true\r\n          }    if (p === Config.mitgliedId) {\r\n            condEinMitglied = true\r\n          }\r\n        }\r\n      })\r\n      // Auch der Ersteller der Buchung ist zu allem berechtigt\r\n      condUserIstSpieler = condUserIstSpieler || this.props.userId === this.state.r.user_id\r\n\r\n\r\n      // Ist ein erwachsenes Vollmitglied dabei?\r\n      // Welche Geburtsdaten haben die Spieler?\r\n      pKeys.map(k => {\r\n        if (k != null) // \r\n        {\r\n          if (!((isJugendlicher(k['geburtsdatum']) || k['schnupper']) === \"0\")) {\r\n            condEinSpielerErwVoll = true\r\n          }\r\n          return k['geburtsdatum']\r\n        }\r\n        return undefined\r\n      })\r\n\r\n      let saveActiveMerker = true\r\n      // Message an der Spielzeit\r\n      // Formal müssen Spieler korrekt eingetragen sein\r\n      if (this.state.bookingType.match(/(ts-veranstaltung)|(ts-training)|(ts-nichtreservierbar)/ig)) {\r\n        // Ein Spieler muss eingetragen werden\r\n        if (Number(this.state.p1) === 0) {\r\n          [s.p1msgClass, s.saveActive, s.p1MsgTxt] = Messages.spieleranzahl\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        }\r\n        // Spieler 2 bis 4 werden \"gelöscht\"\r\n        s.p2 = s.p3 = s.p4 = 0\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n      if (this.state.bookingType.match(/(ts-turnier)|(ts-einzel)/ig)) {\r\n        // Zwei Spieler müssen eingetragen werden, beide nicht 0 und unterschiedlich\r\n        if (Number(this.state.p1) === 0 || Number(this.state.p2) === 0) {\r\n          [s.p1msgClass, s.saveActive, s.p1MsgTxt] = Messages.spieleranzahl;\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        } else if (this.state.p1 === this.state.p2) {\r\n          // Sind die Spieler doppelt?\r\n          condDoppelteSpieler = true;\r\n          [s.p1msgClass, s.saveActive, s.p1MsgTxt] = Messages.spieleranzahl;\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        }\r\n        // Spieler 3 bis 4 werden \"gelöscht\"\r\n        s.p3 = s.p4 = 0\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n      if (this.state.bookingType === \"ts-doppel\") {\r\n        // Vier Spieler\r\n        // Sind unter 4 Spielern welche doppelt?\r\n        condDoppelteSpieler = (_.uniq([this.state.p1, this.state.p2, this.state.p3, this.state.p4]).length < 4)\r\n\r\n        if (!condEinGast) {\r\n          if (condDoppelteSpieler || (Number(this.state.p3) === 0 || Number(this.state.p4) === 0)) {\r\n            [s.p1MsgClass, s.saveActive, s.p1MsgTxt] = Messages.spieleranzahl;\r\n            s.p1MsgFormCtrl = 'is-invalid'\r\n          }\r\n        }\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n      if (condEinGast || condEinMitglied) {\r\n        if (this.state.bookingType.match(/(ts-einzel)|(ts-doppel)/ig)) {\r\n          // Gäste und unbenannte Mitglieder müssen einen Kommentar/Namen vermerken. Mind. 2 Zeichen\r\n          if (this.state.comment.length < 2) {\r\n            [s.commentMsgClass, s.saveActive, s.commentMsgTxt] = condEinGast ? Messages.gast : Messages.mitglied\r\n            s.p1MsgFormCtrl = 'is-invalid'\r\n          }\r\n        }\r\n        else {\r\n          [s.p1MsgClass, s.saveActive, s.p1MsgTxt] = Messages.spieleranzahl;\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        }\r\n      }\r\n      if (this.state.bookingType === \"ts-veranstaltung\") {\r\n        [s.commentMsgClass, s.saveActive, s.commentMsgTxt] = Messages.veranstaltung\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n\r\n      if (this.state.bookingType.match(/(ts-einzel)|(ts-doppel)/ig)) {\r\n        // Jetzt die Berechtigungen nach Alter, Status, Zeitpunkt. Message an der Spielzeit\r\n        // Diese Bedingungen sind von der Entscheidungstabelle (Dokumentation, Excel) abgeleitet\r\n        const dToday = new Date()\r\n        const dH = dToday.getHours()\r\n        const dM = dToday.getMinutes()\r\n        const minutesToday = (dH * 60 + dM)\r\n        if ((start - minutesToday) > Config.maxMinutesDistance && !condEinSpielerErwVoll && !condSonnOderFeiertag && ende > (Config.eveningTime / 100 * 60)) {\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.erwachsenenvorrecht;\r\n          s.overbooked = true\r\n        }\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n\r\n      // Auswertung Spielzeit formal, Message an der Spielzeit\r\n      if (start >= ende) {\r\n        [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.zeit;\r\n      }\r\n      else if (this.state.bookingType === \"ts-einzel\") {\r\n        if ((ende - start) > Config.singleTime) {\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.einzeldauer;\r\n        }\r\n      }\r\n      else if (this.state.bookingType === \"ts-doppel\") {\r\n        if ((ende - start) > Config.doubleTime) {\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.doppeldauer;\r\n        }\r\n      }\r\n      else if (this.state.bookingType === \"ts-turnier\") {\r\n        if ((ende - start) !== Config.turnierTime) {\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.turnierspieldauer;\r\n        } else {\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.turnier;\r\n        }\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n\r\n      // Berechtigung zum Speichern und Löschen und flexible Endezeit\r\n      if (this.state.bookingType.match(/(ts-einzel)|(ts-doppel)|(ts-turnier)/ig)) {\r\n        s.saveActive = condUserIstSpieler || (Permissions.VORSTAND === (Permissions.VORSTAND & this.props.permissions))\r\n        s.deleteActive = condUserIstSpieler || (Permissions.VORSTAND === (Permissions.VORSTAND & this.props.permissions))\r\n        s.endeActive = false\r\n      }\r\n      if (this.state.bookingType.match(/(ts-training)|(ts-punktspiele)|(ts-nichtreservierbar)|(ts-veranstaltung)/ig)) {\r\n        s.saveActive = (Permissions.MANNSCHAFTSFUEHRER === (Permissions.MANNSCHAFTSFUEHRER & this.props.permissions))\r\n        s.endeActive = true\r\n      }\r\n      if (this.state.bookingType.match(/(ts-training)|(ts-punktspiele)|(ts-nichtreservierbar)|(ts-veranstaltung)/ig)) {\r\n        s.deleteActive = (Permissions.MANNSCHAFTSFUEHRER === (Permissions.MANNSCHAFTSFUEHRER & this.props.permissions))\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n\r\n      s.saveActive = saveActiveMerker\r\n\r\n      // Alle Ergebnisse in den State\r\n      // this.setState(s)\r\n      return s;\r\n\r\n    });\r\n  }\r\n}\r\n\r\nexport default BelForm;\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport BelForm from './BelForm';\r\nimport { Link } from 'react-router-dom';\r\nimport Config from './Defaults';\r\n\r\nclass Belegung extends Component {\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = { \r\n      belegung : [],\r\n      isLoading : false,\r\n      error : false,\r\n    };\r\n  }  \r\n  componentWillMount() {\r\n    const {op} = this.props.location.state;\r\n    if (op === \"update\") {\r\n      const {i, d} = this.props.location.state;\r\n      this.updateBel(i, d);\r\n    } else if (op === \"new\") {\r\n      const {c, d} = this.props.location.state;\r\n      this.newBel(c, d);\r\n    }\r\n  }\r\n  \r\n  updateBel(id, day) {\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/platz.php?op=r&rid=\" + id;\r\n  \r\n    this.setState({isLoading : true});\r\n    \r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then(result => {\r\n      if (result.ok) {\r\n        if (result.redirected) {\r\n          console.log(\"BelDetails.js/Checkuser: Authentifizierungsfehler\")\r\n          window.location.href = result.url\r\n        }\r\n        return result.json();\r\n      } else {\r\n        throw new Error('Fehler beim Laden der Platzbuchungsdetails');\r\n      }\r\n    })\r\n    .then(result => {\r\n      let belegung = result.records.map( r => {\r\n        return (\r\n          <div key={r.id} className=\"p-2\">\r\n              <Link to={{ pathname: '/intern/tafel/', state: {d: day} }}><p className=\"btn btn-secondary\">Zurück</p></Link>\r\n              <BelForm r={r} userId={this.props.userId} permissions={this.props.permissions} />\r\n          </div>\r\n        )\r\n      })\r\n      this.setState({ belegung: belegung })\r\n    })\r\n    .catch(error => this.setState({ error, isLoading: false }));\r\n  }\r\n  \r\n  newBel(court, day)\r\n  {\r\n    let r = getEmptyBel(court, day);\r\n    let belegung = [\r\n        <div key={-1} className=\"p-2\">\r\n            <Link to={{ pathname: '/intern/tafel/', state: {d: day} }}><p className=\"btn btn-secondary\">Zurück</p></Link>\r\n            <BelForm r={r} userId={this.props.userId} permissions={this.props.permissions} />\r\n        </div>\r\n    ];\r\n    this.setState({ belegung: belegung })\r\n  }\r\n  \r\n  render() {\r\n    return (\r\n      <div>{this.state.belegung}</div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction getEmptyBel(court, day) {\r\n  return {\r\n    id: 0,\r\n    user_id: 0,\r\n    p1: '',\r\n    p2: '',\r\n    p3: '',\r\n    p4: '',\r\n    court: court,\r\n    starts_at: day + ' 08:00:00',\r\n    ends_at: day + ' 09:00:00',\r\n    booking_type: '',\r\n    geburtsdatum: '0000-00-00',\r\n    p1id: 0,\r\n    p2id: 0,\r\n    p3id: 0,\r\n    p4id: 0,    \r\n  }\r\n}\r\nexport default Belegung;\r\n  ","import React, { Component } from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport Belegungstag from './Belegungstag';\r\nimport Belegung from './Belegung';\r\n\r\n\r\nclass Routing extends Component {\r\n    render() {\r\n      return (\r\n        <Switch>\r\n          <Route exact path='/intern/tafel/belegung' render={(props) => <Belegung {...props} userId={this.props.userId} permissions={this.props.permissions} />} />\r\n          <Route render={(props) => <Belegungstag {...props} userId={this.props.userId} permissions={this.props.permissions} />} />\r\n        </Switch>\r\n      )\r\n    }\r\n}\r\n\r\n\r\nexport default Routing;\r\n  ","import React, { Component } from 'react';\r\nimport Routing from \"./Routing\";\r\nimport Config from \"./Defaults\";\r\n\r\n\r\nclass App extends Component \r\n{\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = { \r\n      user: {},\r\n      isLoggedIn: false,\r\n      permissions: 0,\r\n      renderData: [],\r\n      isLoading1: true,\r\n      isLoading2: true,\r\n    };\r\n  }\r\n  \r\n  componentDidMount()\r\n  {\r\n    this.setState(() => ({ isLoading1: true , isLoading2: true}));\r\n    if (Config.prod) \r\n    { \r\n      this.checkUser();\r\n      this.setPermission();\r\n    } \r\n    else \r\n    {\r\n      // In der Testumgebung simulierter User\r\n      this.setState(() => ({user: Config.testuser, permissions: Config.testuser.permissions}));\r\n\r\n      // Re-rendering - sollte nur auf passiv genutzten Geräten (z. B. Monitor an Platz) verwendet werden\r\n      // this.interval = setInterval(()  => this.forceUpdate(), 1000)\r\n    }\r\n  }\r\n\r\n  checkUser() \r\n  {\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/checkuser.php\";\r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then( (res) => {\r\n      if (res.ok) {\r\n        res.json()\r\n        .then( (user) => {\r\n          if (user.retcode === 'OK') {\r\n            this.setState(() => ({user: user.user, isLoading1: false}));\r\n          } else {\r\n            // console.log(\"App.js/Checkuser: Authentifizierungsfehler\")\r\n            window.location.href = Config.protokoll + Config.hostname + Config.loginPage;\r\n          }\r\n        });\r\n      }\r\n    })\r\n  }\r\n  \r\n  setPermission() \r\n  {\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/checkpermission.php\";\r\n    // console.log(url)\r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then( (res) => {\r\n      if (res.ok) {\r\n        res.json()\r\n        .then( (permissions) => {\r\n          // console.log(permitted.retcode)\r\n          this.setState(() => ({permissions: permissions.retcode, isLoading2: false}))\r\n        })\r\n      }\r\n    })\r\n  }\r\n  \r\n  render() \r\n  {\r\n    const { isLoading1, isLoading2 } = this.state;\r\n    if (Config.prod && (isLoading1 || isLoading2)) {\r\n      return <p>Loading...</p>\r\n    } else {\r\n      return (\r\n        <React.Fragment>\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              <div className=\"col text-left\">\r\n                <img src=\"/images/tcoplain_0,1x.png\" alt=\"TCO -Logo\" />\r\n              </div>\r\n              <div className=\"col\">\r\n                <span className=\"h6 text-center ml-2\"><a href=\"/intern/tafel/\" id=\"appname\">Platzbuchung</a></span> \r\n                <span className=\"text-center ml-2\"><small> ({this.state.user.vorname + ' ' + this.state.user.nachname})</small></span>\r\n              </div>\r\n              <div className=\"col\">\r\n                <div className=\"small align-bottom\"><span className=\"pl-5\"><a href=\"/intern/logout.php\"><img src=\"/images/logout.png\" alt=\"Logout\" /></a></span></div> \r\n              </div>\r\n            </div>\r\n          </div>\r\n              \r\n          <Routing userId = {this.state.user.id} permissions = {this.state.permissions}/>\r\n          <footer className=\"blockquote-footer\">(c) 2019 by Conny Roloff. Dem TC Olching zur kostenlosen Nutzung zur Verfügung gestellt.</footer>\r\n        </React.Fragment>\r\n      )}\r\n    }\r\n  }\r\n\r\n\r\nexport default App;\r\n  ","import 'babel-polyfill'; \r\nimport 'react-app-polyfill/ie11';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport App from './components/App';\r\n\r\nReactDOM.render((\r\n  <Router>\r\n    <App />\r\n  </Router>\r\n), document.getElementById('root'));\r\n\r\n// import index from \"./js/index\";\r\n"],"sourceRoot":""}