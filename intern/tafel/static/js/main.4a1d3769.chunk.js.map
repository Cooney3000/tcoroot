{"version":3,"sources":["components/Defaults.js","components/functions.js","components/Platz.js","components/DayPicker.js","components/Belegungstag.js","components/BelForm.js","components/Belegung.js","components/Routing.js","components/App.js","index.js"],"names":["config","testuser","id","vorname","nachname","permissions","stringSeparator","smartphoneWidth","anzahlPlaetze","platzArray","daypickerMaxDays","daypickerDaysBeforeToday","daypickerDaysBeforeTodayWide","buchungenlog","platzbuchungen","dailyStartTime","dailyEndTime","eveningTime","maxMinutesDistance","singleTime","doubleTime","turnierTime","gastId","mitgliedId","gastJugId","mitgliedJugId","platzLeer","platzBelegt","slotMinimalMinutes","delimiter","IMPORTANT","messages","gast","mitglied","veranstaltung","spieleranzahl","jugendvorrecht","erwachsenenvorrecht","einzeldauer","doppeldauer","turnier","turnierspieldauer","zeit","platzbelegt","i","push","NONE","MANNSCHAFTSFUEHRER","WIRT","T_ALL_PERMISSIONS","VORSTAND","ADMINISTRATOR","formatDate","d","month","getMonth","day","getDate","year","getFullYear","length","join","spielerzusatz","geburtsdatum","schnupper","aktuellesJahr","Date","geburtsjahr","zusatz","Number","replace","servertimeNow","servertime","parseCookie","document","cookie","str","split","map","v","reduce","acc","decodeURIComponent","trim","getTimetable","belegungen","endeTag","setHours","timetable","getTime","Config","tagesZeit","toTimeString","substr","bKey","sa","starts_at","anzahlSlots","ends_at","saTmp","cTmp","court","Platz","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleWindowSizeChange","setState","zumBelegungstag","state","courtData","isLoading","error","width","window","innerWidth","prevProps","_this$props","fetchPlatz","_this$props2","uPermissions","_this2","userIsAllowed","url","protokoll","hostname","addEventListener","fetch","credentials","then","result","ok","redirected","location","href","json","records","r","spieler","k","cn","computeBelClasses","booking_type","formatSpieler","platzWide","match","react_default","a","createElement","key","className","substring","comment","Link","to","pathname","c","op","removeEventListener","Component","p1vn","p1nn","p1geb","schnupper1","p2vn","p2nn","p2geb","schnupper2","p3vn","p3nn","p3geb","schnupper3","p4vn","p4nn","p4geb","schnupper4","s","RegExp","e","bookingType","dauer","bt","classNames","list","MenuItem","_ref","text","selected","concat","Arrow","_ref2","ArrowLeft","ArrowRight","DayPicker","onSelect","onClickHandler","startswith","end","setDate","start","dt","arr","name","toLocaleDateString","weekday","getDateArray","menu","el","DayPicker_MenuItem","build_default","data","arrowLeft","arrowRight","Belegungstag","dayDate","params","isNaN","setDay","bind","dString","firstDaypickerDay","courtDiv","Belegungstag_Zeitleiste","src","alt","components_Platz","components_DayPicker","react_swipeable_views_lib_default","Belegungstag_Legende","Zeitleiste","m","toString","padStart","index","Fragment","Legende","BelForm","handleChange","assertThisInitialized","handleSave","handleDelete","_r$starts_at$split","_r$starts_at$split2","slicedToArray","sd","st","scd","ssd","dateIsToday","valueOf","deleteActive","user_id","p1id","p2id","p3id","p4id","includes","userId","Permissions","_r$ends_at$split","_r$ends_at$split2","ed","et","sdA","spieltag","startsAtDate","endsAtDate","startsAt","endsAt","p1","p2","p3","p4","belegungenAbJetzt","zurTafel","saveActive","endeActive","admin","overbooked","jugend","nichtVollBerechtigte","isLoading1","isLoading2","courtBelegt","Error","catch","_this3","_this$state","Redirect","condMF","onChange","value","disabled","startsAtMsgClass","startsAtMsgTxt","keys","ttl","p1MsgClass","p1MsgTxt","p1MsgFormCtrl","commentMsgClass","commentMsgTxt","type","placeholder","onClick","_this4","preventDefault","parameters","rc","returncode","logurl","_Messages$platzbelegt","Messages","loginPage","_this5","sdStr","jetzt","_this6","defineProperty","target","endsAtViertel","endsAtStd","toLocaleString","minimumIntegerDigits","useGrouping","condEinGast","condEinMitglied","condEinSpielerErwVoll","condDoppelteSpieler","condUserIstSpieler","datestring","hd","Holidays","init","condSonnOderFeiertag","isHoliday","getDay","ende","pKeys","forEach","p","pAttr","find","o","isJugendlicher","saveActiveMerker","_Messages$spieleranza","p1msgClass","_Messages$spieleranza2","_Messages$spieleranza3","_","uniq","_Messages$spieleranza4","_Messages$spieleranza5","_Messages$veranstaltu","dToday","getHours","getMinutes","_Messages$erwachsenen","_Messages$zeit","_Messages$einzeldauer","_Messages$doppeldauer","_Messages$turnierspie","_Messages$turnier","Belegung","belegung","_this$props$location$","updateBel","_this$props$location$2","newBel","console","log","components_BelForm","getEmptyBel","Routing","Switch","Route","exact","path","render","components_Belegung","assign","components_Belegungstag","App","user","isLoggedIn","renderData","prod","checkUser","setPermission","res","retcode","components_Routing","ReactDOM","BrowserRouter","components_App","getElementById"],"mappings":"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","file":"static/js/main.4a1d3769.chunk.js","sourcesContent":["\r\n// ****** Konfigurationsdaten *******\r\n\r\nexport const hostLocal = false\r\n\r\nconst config = {\r\n  testuser: {id:211, vorname:'Hart', nachname:'VerdrahtetAdm', permissions: 65535}, // mit Adminrechten\r\n  // testuser: {id:211, vorname:'Hart', nachname:'VerdrahtetUsr', permissions: 0}, // mit normalen Benutzerrechten\r\n  //  testuser: {id:357, vorname:'Hart', nachname:'VerdrahtetUsr2', permissions: 432}, // mit normalen Benutzerrechten\r\n  stringSeparator: ' ',\r\n  smartphoneWidth: 578,\r\n  anzahlPlaetze: 6,\r\n  platzArray: [],\r\n  daypickerMaxDays: 180,\r\n  daypickerDaysBeforeToday: 3, \r\n  daypickerDaysBeforeTodayWide: 9, \r\n  buchungenlog: '/intern/api/buchungenlog.php',\r\n  platzbuchungen: '/intern/api/platz.php',\r\n\r\n  dailyStartTime: 8,\r\n  dailyEndTime: 20,\r\n  eveningTime: 1700,  // 17:00 Uhr, alte Platzordnung war 18:00 Uhr\r\n  maxMinutesDistance: 15, // Gäste und Jugendliche dürfen abends erst kurz vor der Spielzeit buchen\r\n  singleTime: 60, // = 1 Stunde\r\n  doubleTime: 120, // = 2 Stunden \r\n  turnierTime: 120, // = 2 Stunden \r\n  gastId: 1,\r\n  mitgliedId: 25,\r\n  gastJugId: 28,\r\n  mitgliedJugId: 29,\r\n  platzLeer: \"\\u00A0\\u00A0\",\r\n  platzBelegt: \"\\u29EB\",\r\n  slotMinimalMinutes: 1800000, // = 30 Minuten\r\n  delimiter: \"§§§\"\r\n}\r\nif (hostLocal) {\r\n  config.hostname = 'localhost'\r\n  config.protokoll = 'http://'\r\n  config.loginPage = '/intern/login.php'\r\n  config.prod = false\r\n} else {    \r\n  config.hostname = 'www.tcolching.de'\r\n  config.protokoll = 'https://'\r\n  config.loginPage = '/intern/login.php'\r\n  config.prod = true\r\n}\r\n\r\nconst IMPORTANT = \"text-danger\"\r\nconst MSG = \"text-info\"\r\nconst NOSAVE = false\r\nconst SAVE = true\r\n\r\nexport const messages = {\r\n  gast: [IMPORTANT, NOSAVE, '- Bitte den Gastnamen ins Kommentarfeld schreiben und die Gebühr innerhalb einer Woche überweisen!'],\r\n  mitglied: [IMPORTANT, NOSAVE, '- Bitte nur für Mitglieder ohne Email verwenden und den Namen ins Kommentarfeld schreiben!'],\r\n  veranstaltung: [IMPORTANT, SAVE, '- Bitte den Veranstaltungsanlass ins Kommentarfeld schreiben und den Vorstand informieren!'],\r\n  spieleranzahl: [IMPORTANT, NOSAVE, '- Bitte alle Personen eintragen!'],\r\n  jugendvorrecht: [MSG, SAVE, '- Achtung: Jugendliche haben auf Platz 6 zu dieser Zeit Vorrecht!'],\r\n  erwachsenenvorrecht: [IMPORTANT, NOSAVE, '- Buchung erst 15 Minuten vor Spielbeginn möglich, da werktags ab 17:00 Uhr ein erw. Vollmitglied mitspielen muss.'],\r\n  einzeldauer: [IMPORTANT, NOSAVE, '- Für ein Einzel maximal 60 Minuten buchen'],\r\n  doppeldauer: [IMPORTANT, NOSAVE, '- Für ein Doppel maximal 120 Minuten buchen'],\r\n  turnier: [MSG, SAVE, '- Turnierspiele 120 Minuten. Falls möglich auf Platz 1 buchen. Parallel sollte ein Platz auf der Anlage nicht durch Turniere oder Training belegt sein! Wer Mannschaftstraining hat, darf nur auf den Plätzen der Mannschaft Turnier spielen.'],\r\n  turnierspieldauer: [IMPORTANT, NOSAVE, '- Turnierspiele 120 Minuten. Falls möglich auf Platz 1 buchen. Parallel sollte ein Platz auf der Anlage nicht durch Turniere oder Training belegt sein! Wer Mannschaftstraining hat, darf nur auf den Plätzen der Mannschaft Turnier spielen.'],\r\n  zeit: [IMPORTANT, NOSAVE, '- Der Start muss vor dem Ende liegen!'],\r\n  platzbelegt:  [IMPORTANT, NOSAVE, '- Platz bereits belegt!'],\r\n};\r\nfor (let i = 1; i <= config.anzahlPlaetze; i++) {\r\n  config.platzArray.push(i);\r\n}\r\n\r\n// ******* Rechtevergabe **********\r\nexport const permissions = {\r\n  // Es gibt 16 Rechte. Übereinandergelegt\r\n  \r\n  // Recht:        1 2 3 4  5  6  7   8   9  10   11   12   13   14    15    16\r\n  // Dezimalwert:  1 2 4 8 16 32 64 128 256 512 1024 2048 4096 8192 16384 32768 \r\n  //\r\n  // Summen daraus sind kombinierte Rechte, z.B. \r\n  //                3 ist Recht 1 und Recht 2\r\n  //               15 ist Recht 1, 2, 3, 4 (1+2+4+8)\r\n  //              128 ist Recht 8\r\n  //              143 ist Recht 1,2,3,4,8\r\n    NONE : 0,\r\n    MANNSCHAFTSFUEHRER : 32,\r\n    WIRT : 64,\r\n    T_ALL_PERMISSIONS : 128,    // Turnierverantwortliche\r\n    VORSTAND : 496,             // kombiniert 16, 32, 64, 128, 256\r\n    ADMINISTRATOR : 65535,\r\n};\r\n\r\nexport default config;\r\n","import Config from './Defaults';\r\n\r\nexport const formatDate = (d) => {\r\n  var month = '' + (d.getMonth() + 1),\r\n    day = '' + d.getDate(),\r\n    year = d.getFullYear();\r\n\r\n  if (month.length < 2) month = '0' + month;\r\n  if (day.length < 2) day = '0' + day;\r\n\r\n  return [year, month, day].join('-');\r\n}\r\n\r\n// ***** date array \r\nexport const getDateArray = (start, end) => {\r\n  let dt = new Date(start),\r\n    arr = [];\r\n  while (dt <= end) {\r\n    arr.push({ name: formatDate(dt), text: dt.toLocaleDateString(\"de-DE\", { weekday: 'short', month: 'short', day: 'numeric' }) });\r\n    dt.setDate(dt.getDate() + 1);\r\n  }\r\n  return arr;\r\n}\r\n\r\nexport const isValidDate = (d) => {\r\n  return d instanceof Date && !isNaN(d);\r\n}\r\n\r\nexport const spielerzusatz = (geburtsdatum, schnupper) => {\r\n  let aktuellesJahr = new Date();\r\n  aktuellesJahr = aktuellesJahr.getFullYear();\r\n  let geburtsjahr = new Date(geburtsdatum);\r\n  geburtsjahr = geburtsjahr.getFullYear();\r\n  const jugend = (aktuellesJahr - geburtsjahr) < 18 ? true : false;\r\n  // console.log(`${geburtsdatum} ${geburtsjahr} ${aktuellesJahr} ${jugend}` );\r\n  let zusatz = ' (' + (jugend ? 'Jug' : '') + (Number(schnupper) === 1 ? ',Schn' : '') + ')'\r\n  zusatz = zusatz.replace('(,', '(')\r\n  zusatz = zusatz.replace('()', '')\r\n  return zusatz\r\n}\r\n\r\n// jugendlicher = nicht voll Berechtigt\r\nexport const jugendlicher = (geburtsdatum) => {\r\n  if (typeof (geburtsdatum) === 'undefined' || geburtsdatum === null) {\r\n    return false;\r\n  }\r\n  let aktuellesJahr = new Date();\r\n  aktuellesJahr = aktuellesJahr.getFullYear();\r\n  let geburtsjahr = new Date(geburtsdatum);\r\n  geburtsjahr = geburtsjahr.getFullYear();\r\n  const jugend = ((aktuellesJahr - geburtsjahr) < 18) ? true : false;\r\n  // console.log(`${geburtsdatum} ${geburtsjahr} ${aktuellesJahr} ${jugend}` );\r\n  return jugend;\r\n}\r\n\r\n// Serverzeit?\r\nexport const servertimeNow = () => {\r\n  const cookies = parseCookie(document.cookie)\r\n  const servertime = cookies['servertime']\r\n  const st = new Date(Number(servertime))\r\n  return st\r\n}\r\n\r\n//#Source https://bit.ly/2neWfJ2 \r\nconst parseCookie = str =>\r\n  str\r\n    .split(';')\r\n    .map(v => v.split('='))\r\n    .reduce((acc, v) => {\r\n      acc[decodeURIComponent(v[0].trim())] = decodeURIComponent(v[1].trim());\r\n      return acc;\r\n    }, {});\r\n\r\n\r\n// Setze alle Zeiten auf false, die nicht als Start verwendet werden dürfen\r\nexport function getBookableTimes(tt) {\r\n  // Zu welchem Slot kann auf einem Platz gestartet werden?\r\n  let startBooking = ['--', '--', '--', '--', '--', '--']\r\n  for (let slot in tt) {  // Iteration über die Indizes der Slots\r\n    for (let p in tt[slot]) { // Iteration über die Indizes (0 - 5) der Plätze je Viertelstunden\r\n      if (startBooking[p] === '--' && tt[slot][p] === Config.platzBelegt) {  // Wenn ein Platz an einer Stelle nicht buchbar ist, ist er \"..\"\r\n        startBooking[p] = slot.substr(19, 2) // Merke dir die Minuten des Slots. An Pos 19 sind die Minuten\r\n      }\r\n    }\r\n  }\r\n  // Alle Plätze nur zu möglichen Startzeiten erlauben, andere Zeiten sperren (\"--\")\r\n  // z. B. Wenn eine Buchung um xx:30 Uhr besteht, dann sind keine Buchungen zur vollen Stunde erlaubt, \r\n  // um nicht Lücken entstehen zu lassen\r\n  // *****************  DERZEIT INAKTIV!!! ******************\r\n  const timetable = []\r\n  for (let slot in tt) {  // Iteration über die Indizes der Viertelstunden (0..51)\r\n    timetable[slot] = []\r\n    for (let p in tt[slot]) { // Iteration über die Indizes (0 - 5) der Plätze je Viertelstunden\r\n      // console.log(\"p, tt[slot][p]: \", p, tt[slot][p])\r\n      if (startBooking[p] === '--') { // Auf diesem Platz p gibt es an diesem Tag noch keine Buchung\r\n        timetable[slot][p] = tt[slot][p]  // Platzziffer übernehmen\r\n      }\r\n      else {\r\n        if ((startBooking[p] === slot.substr(19, 2) || tt[slot][p] === Config.platzBelegt)) {  // Das ist eine gültige Zeit für einen Platz\r\n          timetable[slot][p] = tt[slot][p] // Platzziffer (oder eben Sperrzeichen) übernehmen\r\n        } else {\r\n          timetable[slot][p] = Config.platzLeer\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return timetable\r\n}\r\n\r\n// Liefere die Daten für einen HTML-SELECT mit belegten und freien Zeiten\r\nexport function getTimetable(belegungen) {\r\n  // Erzeuge alle Zeiten als Timestamps für den HTML-Select in einem zweidimensionalen Objekt\r\n  // mit Uhrzeiten im Slot-Takt (z. B. 30 oder 15 Minutene, je nach Config)\r\n  // in der Form {<uhrzeit> : {platz: <platz>, <aktiv|inaktiv>}}\r\n\r\n  let zeit = new Date();\r\n  let endeTag = new Date();\r\n\r\n  // Die Timetable erzeugen, alle Plätze und Zeiten \"frei\", also Anzeige der Platznummer\r\n  zeit.setHours(8, 0, 0, 0);\r\n  endeTag.setHours(21, 0, 0, 0);\r\n  const timetable = [];\r\n  for (; zeit <= endeTag; zeit = new Date(zeit.getTime() + Config.slotMinimalMinutes)) {\r\n    const tagesZeit = zeit.toTimeString().substr(0, 5)\r\n    timetable[tagesZeit] = [];\r\n    for (let i = 1; i <= Config.anzahlPlaetze; i++) {\r\n      timetable[tagesZeit].push(i);\r\n    }\r\n  }\r\n\r\n  // Jetzt belegte Zeiten mit \"X\" belegen\r\n  // Wir haben 2 Objekte: \r\n  // 1. Wir iterieren über die Belegungen, sortiert nach Anfangszeit und Platz. \r\n  // 2. timetable, auf das wir direkt über die Zeit zugreifen\r\n  // console.log(belegungen)\r\n  for (let bKey in belegungen) {\r\n    let sa = new Date(belegungen[bKey].starts_at);\r\n    let ea = new Date(belegungen[bKey].ends_at);\r\n    // console.log(belegungen[bKey].starts_at + \", \" + belegungen[bKey].ends_at)\r\n    let anzahlSlots = (ea - sa) / Config.slotMinimalMinutes;\r\n    for (let i = 0; i < anzahlSlots; i++) {\r\n      let saTmp = new Date(sa.getTime() + (i * Config.slotMinimalMinutes));\r\n      let cTmp = Number(belegungen[bKey].court) - 1;\r\n      timetable[saTmp.toTimeString().substr(0, 5)][cTmp] = Config.platzBelegt;\r\n      // console.log(saTmp, timetable[saTmp][cTmp], ', court: ', cTmp)\r\n    }\r\n  }\r\n  return timetable;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n///////////////////////// KANN DAS FUNKTIONIEREN??? //////////////////////\r\n// const Model = () => {\r\n//   let liste = {};\r\n//   registerListener(callback) {\r\n//     liste                               ;\r\n//   }\r\n//   unregisterListener(callback) {\r\n//     callback.setTafelDatum(this.tafelDatum)///////////////////////////////////\r\n//   }\r\n// }\r\n\r\n// Auswahl über Mausposition???\r\n// handleClick (e) {\r\n\r\n//   var offset = $(this).offset();\r\n//   var hoehe = $(this).height(); \r\n//   var relativeX = (e.pageX - offset.left);\r\n//   var relativeY = (e.pageY - offset.top);\r\n//   var halbeStdHoehe = (hoehe - 30)/13;     \r\n//   var std = relativeY/halbeStdHoehe;\r\n//   var minuten = Math.round((std - Math.floor(std))) * 30;\r\n//   std = Math.floor(std) + 7;\r\n\r\n//   alert(\"X: \" + relativeX + \"  Y: \" + relativeY + \" Zeit: \" + std + \":\" + minuten + \" h, Höhe: \" + hoehe);\r\n\r\n// };\r\n","import React, { Component } from 'react';\r\nimport classNames from 'classnames';\r\nimport { Link } from 'react-router-dom';\r\nimport { spielerzusatz } from './functions';\r\nimport Config, { permissions } from './Defaults';\r\n\r\n\r\n// Alle Belegungen an diesem Tag für einen Platz\r\n\r\nclass Platz extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = { \r\n      courtData: [],\r\n      isLoading : false,\r\n      error : false,\r\n      width: window.innerWidth,\r\n      zumBelegungstag: false,\r\n    };\r\n  }\r\n  \r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.day !== prevProps.day) {\r\n      const {court, day, permissions} = this.props;\r\n      this.fetchPlatz(court, day, permissions);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { court, day, permissions } = this.props;\r\n    this.fetchPlatz(court, day, permissions);\r\n  }\r\n  \r\n  fetchPlatz(court, day, uPermissions) {\r\n    const userIsAllowed = ((permissions.MANNSCHAFTSFUEHRER & uPermissions) > 0);\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/platz.php?op=ra&p=\" + court + \"&ds=\" + day + \"&de=\" + day;\r\n    window.addEventListener('resize', this.handleWindowSizeChange);\r\n    \r\n    this.setState({isLoading : true});\r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then(result => {\r\n      if (result.ok) {\r\n        if (result.redirected) {\r\n          // console.log(\"Platz.js/Checkuser: Authentifizierungsfehler\")\r\n          window.location.href = result.url\r\n        }\r\n        return result.json();\r\n        } else {\r\n          // In diesem Fall haben wir einen neuen, noch unbebuchten Tag\r\n          this.setState({isLoading : false});\r\n        }\r\n      })\r\n    .then (result => {\r\n      let courtData = result.records.map ( r => {\r\n        let k = r.id\r\n        let spieler\r\n        let cn = computeBelClasses (r.starts_at, r.ends_at, r.booking_type);\r\n        spieler = formatSpieler(r, this.props.platzWide)\r\n\r\n        if ( !userIsAllowed && (r.booking_type.match(/(ts-training)|(ts-punktspiele)|(ts-nichtreservierbar)|(ts-veranstaltung)/ig)))\r\n        {\r\n          return ( \r\n            <div key={k} className={cn}>\r\n              <strong>{r.starts_at.substring(11,16)}</strong> {spieler} \r\n              <div> {r.comment} </div>\r\n            </div>\r\n          )\r\n        } else {\r\n          return ( \r\n            <Link key={k} className={cn} to={{ pathname: '/intern/tafel/belegung', state: {c: court, i: r.id, d: day, op: 'update'} }}>\r\n              <strong>{r.starts_at.substring(11,16)}</strong> {spieler}\r\n              <div> {r.comment} </div>\r\n            </Link>\r\n          )\r\n        }\r\n      })\r\n      this.setState({courtData: courtData});\r\n      this.setState({isLoading : false});\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.handleWindowSizeChange);\r\n  }\r\n\r\n  handleWindowSizeChange = () => {\r\n    // this.setState({ width: window.innerWidth });\r\n    this.setState({ zumBelegungstag: true });\r\n  };\r\n  \r\n  render() {\r\n    return this.state.courtData;\r\n  }\r\n}\r\n\r\n// Spielernamen bilden\r\nconst formatSpieler = (r, platzWide) =>\r\n{\r\n  let spieler = []\r\n  \r\n  // Vorname und Name verketten. Vorname bei wenig Platz abkürzen\r\n  // spieler[0] = (r.p1vn ? (platzWide ? r.p1vn : r.p1vn.charAt(0) + '.') + ' ' + r.p1nn : (r.p1nn) ? r.p1nn : '') + spielerzusatz(r.p1geb, r.schnupper1)\r\n  // spieler[1] = (r.p2vn ? (platzWide ? r.p2vn : r.p2vn.charAt(0) + '.') + ' ' + r.p2nn : (r.p2nn) ? r.p2nn : '') + spielerzusatz(r.p2geb, r.schnupper2)\r\n  // spieler[2] = (r.p3vn ? (platzWide ? r.p3vn : r.p3vn.charAt(0) + '.') + ' ' + r.p3nn : (r.p3nn) ? r.p3nn : '') + spielerzusatz(r.p3geb, r.schnupper3)\r\n  // spieler[3] = (r.p4vn ? (platzWide ? r.p4vn : r.p4vn.charAt(0) + '.') + ' ' + r.p4nn : (r.p4nn) ? r.p4nn : '') + spielerzusatz(r.p4geb, r.schnupper4)\r\n  \r\n  // Vorname und Name verketten. Vorname bei wenig Platz abkürzen\r\n  spieler[0] = (r.p1vn ? r.p1vn + ' ' + r.p1nn : (r.p1nn) ? r.p1nn : '') + spielerzusatz(r.p1geb, r.schnupper1)\r\n  spieler[1] = (r.p2vn ? r.p2vn + ' ' + r.p2nn : (r.p2nn) ? r.p2nn : '') + spielerzusatz(r.p2geb, r.schnupper2)\r\n  spieler[2] = (r.p3vn ? r.p3vn + ' ' + r.p3nn : (r.p3nn) ? r.p3nn : '') + spielerzusatz(r.p3geb, r.schnupper3)\r\n  spieler[3] = (r.p4vn ? r.p4vn + ' ' + r.p4nn : (r.p4nn) ? r.p4nn : '') + spielerzusatz(r.p4geb, r.schnupper4)\r\n  \r\n  // Führende Punkt und Whitespace entfernen, falls es sowas gibt\r\n  spieler = spieler.map( s => s.replace(new RegExp(/^[\\.\\s]+/g), '') )\r\n  \r\n  spieler = spieler.join(', ')\r\n\r\n  // ... und trailing Kommas, Whitespaces entfernen\r\n  spieler = spieler.replace(new RegExp(/[,\\s]*$/g), '')\r\n\r\n  return spieler\r\n\r\n}\r\n\r\n// CSS-Klassen bilden für die Positionierung und Höhe einer Belegung auf der Tafel\r\nconst computeBelClasses = (s, e, bookingType) =>\r\n{\r\n  // Dauer berechnen, also z. B. '2019-05-02 16:00:00' - '2019-05-02 14:00:00' = 120\r\n  const dauer = (Number(e.substring(11,13))*60 + Number(e.substring(14,16))) - (Number(s.substring(11,13))*60 + Number(s.substring(14,16)));\r\n  const bt = bookingType\r\n  let cn = classNames(\r\n    'D-' + dauer,\r\n    'ts', \r\n    'T-' + s.substring(11, 16).replace(':', '-'),\r\n    bt\r\n    );\r\n  return cn;\r\n}\r\n\r\nexport default Platz;\r\n","import React, { Component } from 'react';\r\nimport ScrollMenu from 'react-horizontal-scrolling-menu';\r\nimport {getDateArray} from \"./functions\";\r\nimport Config from './Defaults';\r\n\r\n\r\n// Das ist das Array mit den Tagen\r\nlet list = [];\r\n\r\n// One item component\r\n// selected prop will be passed\r\nconst MenuItem = ({ text, selected }) => {\r\n  return (\r\n    <div className={`dateBtn ${selected ? 'aktiv' : ''}`}>\r\n      {text}\r\n    </div>\r\n  );\r\n};\r\n\r\n// All items component\r\n// Important! add unique key\r\nexport const Menu = (list) => list.map(el => {\r\n  const { name, text } = el;\r\n\r\n  return (\r\n    <MenuItem\r\n      text={text}\r\n      key={name}\r\n    />\r\n  );\r\n});\r\n\r\nconst Arrow = ({ text, className }) => {\r\n  return (\r\n    <div\r\n      // className={className}\r\n      className=\"dateBtn arrowPicker\"\r\n    >{text}</div>\r\n  );\r\n};\r\n\r\nconst ArrowLeft = Arrow({ text: '<', className: 'arrow-prev' });\r\nconst ArrowRight = Arrow({ text: '>', className: 'arrow-next' });\r\n\r\nclass DayPicker extends Component {\r\n  state = {\r\n    selected: 0\r\n  };\r\n\r\n  componentWillMount() {\r\n    const {startswith, day} = this.props;\r\n    let end = new Date(day);\r\n    end.setDate(end.getDate() + Config.daypickerMaxDays);\r\n    list = getDateArray(startswith, end);\r\n    this.setState({selected: day});\r\n  }\r\n\r\n  onSelect = key => {\r\n    this.setState({ selected: key }, () => this.props.onClickHandler(key));\r\n  }\r\n  render() {\r\n    const { selected } = this.state;\r\n    // Create menu from items\r\n    const menu = Menu(list, selected);\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <ScrollMenu\r\n          data={menu}\r\n          arrowLeft={ArrowLeft}\r\n          arrowRight={ArrowRight}\r\n          selected={selected}\r\n          onSelect={this.onSelect}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default DayPicker;\r\n  \r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport Platz from \"./Platz\";\r\nimport DayPicker from \"./DayPicker\";\r\nimport \"./tafel.css\";\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport config from './Defaults';\r\nimport {formatDate, isValidDate} from \"./functions\";\r\nimport { Link } from 'react-router-dom';\r\n\r\n// Layout eines Tages\r\n\r\nclass Belegungstag extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      width: window.innerWidth,\r\n      day: '',\r\n      dayDate: '',\r\n    };\r\n  }    \r\n  componentWillMount() {\r\n    window.addEventListener('resize', this.handleWindowSizeChange);\r\n    let dayDate = this.props.match.params.day;\r\n    if ( ! isValidDate(new Date(dayDate)) ) {\r\n      dayDate = new Date();\r\n    } else {\r\n      dayDate = new Date(dayDate);\r\n    }\r\n    this.setState({ dayDate: dayDate, day: formatDate(dayDate) });\r\n    // let day = \"2019-05-02\";\r\n    this.setDay = this.setDay.bind(this);\r\n  }\r\n\r\n  // make sure to remove the listener\r\n  // when the component is not mounted anymore\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.handleWindowSizeChange);\r\n  }\r\n\r\n  handleWindowSizeChange = () => {\r\n    this.setState({ width: window.innerWidth });\r\n  };\r\n\r\n  setDay(dString) {\r\n    const d = new Date(dString);\r\n    this.setState({dayDate: d, day: formatDate(d)});\r\n  }\r\n    \r\n  render() {\r\n    const { width } = this.state;\r\n    let firstDaypickerDay = new Date();\r\n\r\n    // //### TESTDATEN ###################\r\n    // firstDaypickerDay = new Date(2020, 4, 22);\r\n    \r\n    const isMobile = (width <= config.smartphoneWidth);\r\n    if (isMobile) {\r\n      firstDaypickerDay.setDate(firstDaypickerDay.getDate() - config.daypickerDaysBeforeToday);\r\n      const courtDiv = config.platzArray.map( (court) => {\r\n        return (\r\n          <div key={court} id={\"platz\" + court}>\r\n            <table className=\"table\">\r\n              <tbody>\r\n                <tr className=\"platzDim\">\r\n                  <td className=\"zeitleisteCol\"><Zeitleiste /></td>\r\n                  <td className=\"platz\">\r\n                    <div className=\"platznummer\">\r\n                      <span className=\"platzziffer\">{court}</span> \r\n                      <Link to={{pathname: '/intern/tafel/belegung', state: {c: court, d: this.state.day, op: 'new'} }}><img  className=\"neuBtn p-1 rounded-circle\" src=\"images/add.png\" alt=\"Neue Belegung\" /></Link> \r\n                    </div>\r\n                    <div>\r\n                      <Platz court={court} day={this.state.day} permissions={this.props.permissions} platzWide={true} />\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )\r\n      })\r\n      return (\r\n        <div>\r\n          <DayPicker startswith={firstDaypickerDay} day={this.state.day} onClickHandler={this.setDay} />\r\n          <SwipeableViews>\r\n            {courtDiv}\r\n          </SwipeableViews>\r\n          <Legende />\r\n        </div>\r\n      )\r\n    } else {\r\n      firstDaypickerDay.setDate(firstDaypickerDay.getDate() - config.daypickerDaysBeforeTodayWide);\r\n      const courtDiv = config.platzArray.map( (court) => {\r\n        return (<td key={court} id={\"platz\" + court} className=\"platz\">\r\n          <div>\r\n            <div className=\"platznummer\">\r\n              <span className=\"platzziffer rounded-circle\">{court}</span> \r\n              <Link to={{pathname: '/intern/tafel/belegung', state: {c: court, d: this.state.day, op: 'new'} }}><img  className=\"neuBtn p-1 rounded-circle\" src=\"images/add.png\" alt=\"Neue Belegung\" /></Link> \r\n            </div>\r\n            <div>            \r\n              <Platz court={court} day={this.state.day} permissions={this.props.permissions} platzWide={false} />\r\n              </div>\r\n            </div>\r\n          </td>\r\n        )\r\n      })\r\n      return (\r\n        <div>\r\n          <DayPicker startswith={firstDaypickerDay} day={this.state.day} onClickHandler={this.setDay} />\r\n          <table className=\"table\">\r\n            <tbody>\r\n              <tr className=\"platzDim\">\r\n                <td className=\"zeitleisteCol\"><Zeitleiste /> </td>\r\n                {courtDiv}\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          <Legende />\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nconst Zeitleiste = () => {\r\n  let zeit = [];\r\n  for (let s = config.dailyStartTime; s <= config.dailyEndTime; s++) {\r\n    for (let m = 0; m < 60; m=m+60) {\r\n      zeit.push (s.toString().padStart(2, '0') + ':' + m.toString().padStart(2, '0'));\r\n    }\r\n  } \r\n  return (\r\n    <div className=\"zeitleiste\">\r\n      {\r\n        zeit.map((e, index) => \r\n          <React.Fragment key={index}>\r\n            <div className=\"stunde\"><div className=\"stundetext\">{e}</div></div>\r\n            <div className=\"viertelstunde\"></div>\r\n            <div className=\"viertelstunde\"></div>\r\n            <div className=\"viertelstunde\"></div>\r\n          </React.Fragment>\r\n        )\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Legende = () => {\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row l-einzeldoppel p-0 pl-1 m-1\">Einzel/Doppel</div>\r\n      <div className=\"row l-turnier p-0 pl-1 m-1\">Turnier</div>\r\n      <div className=\"row l-veranstaltung p-0 pl-1 m-1\">Veranstaltung</div>\r\n      <div className=\"row l-punktspiele p-0 pl-1 m-1\">Punktspiele</div>\r\n      <div className=\"row l-training p-0 pl-1 m-1\">Training</div>\r\n      {/* <div className=\"row l-nichtreservierbar p-0 pl-1 m-1\">Frei verfügbar / Anderes</div> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Belegungstag;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","//\r\nimport React, { Component } from 'react';\r\nimport Config, { messages as Messages, permissions as Permissions } from './Defaults';\r\nimport { Redirect } from 'react-router';\r\nimport { spielerzusatz, servertimeNow, jugendlicher as isJugendlicher, getTimetable } from './functions';\r\nimport _ from 'lodash';\r\nimport Holidays from 'date-holidays';\r\n\r\nclass BelForm extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSave = this.handleSave.bind(this);\r\n    this.handleDelete = this.handleDelete.bind(this);\r\n\r\n    const { r } = props;\r\n    // Daten für Datum, Start und Ende extrahieren\r\n    let [sd, st] = r.starts_at.split(' ')\r\n    let scd = new Date(sd)\r\n    let ssd = servertimeNow()\r\n    scd.setHours(0, 0, 0, 0)\r\n    ssd.setHours(0, 0, 0, 0)\r\n\r\n    const dateIsToday = (scd.valueOf() === ssd.valueOf())\r\n\r\n    // Initialer Wert für neue Buchungen. Wenn Einzel/Doppel erlaubt/nicht erlaubt sind, hier ändern\r\n    const bookingType = (r.booking_type === '') ? (dateIsToday ? 'ts-einzel' : 'ts-turnier') : r.booking_type\r\n    const userDarfAlles = [Number([r.user_id]),Number([r.p1id]),Number([r.p2id]),Number([r.p3id]),Number([r.p4id])].includes(Number(this.props.userId)) \r\n    const deleteActive =  userDarfAlles || (Permissions.VORSTAND === (Permissions.VORSTAND & this.props.permissions))\r\n      \r\n    let [ed, et] = r.ends_at.split(' ');\r\n    let sdA = sd.split('-');\r\n    this.state = {\r\n      r: r,\r\n      spieltag: sdA[2] + '.' + sdA[1] + '.' + sdA[0],\r\n      startsAtDate: sd,\r\n      endsAtDate: ed,\r\n      startsAt: st.substring(0, 5),\r\n      endsAt: et.substring(0, 5),\r\n      bookingType: bookingType,\r\n      comment: (typeof r.comment === \"undefined\") ? \"\" : r.comment,\r\n      p1: (r.p1id === 0 ? Number(this.props.userId) :  Number(r.p1id)),\r\n      p2: Number(r.p2id),\r\n      p3: Number(r.p3id),\r\n      p4: Number(r.p4id),\r\n      spieler: [],\r\n      belegungenAbJetzt: [],\r\n      court: (typeof r.court === \"undefined\") ? \"--\" : r.court,\r\n      zurTafel: false,\r\n      saveActive: false,\r\n      deleteActive: deleteActive,\r\n      endeActive: false,\r\n      admin: false,\r\n      dateIsToday: dateIsToday,\r\n      overbooked: false,\r\n      jugend: false,\r\n      nichtVollBerechtigte: false,\r\n      timetable: [],\r\n      isLoading1: true,\r\n      isLoading2: true,\r\n      courtBelegt: [],\r\n    };\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n    // Alle Spieler für die Select-Auswahl laden    \r\n    let url = Config.protokoll + Config.hostname + \"/intern/api/spieler.php\";\r\n    this.setState({ isLoading1: true });\r\n    fetch(url, { credentials: 'same-origin' })\r\n      .then(result => {\r\n        if (result.ok) {\r\n          // console.log(result);\r\n          return result.json();\r\n        } else {\r\n          throw new Error('Fehler beim Laden der Spielerdaten');\r\n        }\r\n      })\r\n      .then(result => {\r\n        let spieler = result.records;\r\n        // console.log(spieler);\r\n        this.setState({ spieler: spieler, isLoading1: false })\r\n      })\r\n      .catch(error => this.setState({ error, isLoading1: false }));\r\n\r\n    // Alle Belegungen des Tages für die Belegungsprüfung laden\r\n    url = Config.protokoll + Config.hostname + \"/intern/api/belegungenabjetzt.php\";\r\n    this.setState({ isLoading2: true });\r\n    fetch(url, { credentials: 'same-origin' })\r\n      .then(result => {\r\n        if (result.ok) {\r\n          // console.log(result);\r\n          return result.json();\r\n        } else {\r\n          throw new Error('Fehler beim Laden der Belegungsdaten');\r\n        }\r\n      })\r\n      .then(result => {\r\n        // console.log(result.records)\r\n        // this.setState({ timetable: getBookableTimes(getTimetable(result.records)), isLoading2: false }); \r\n        this.setState({ timetable: getTimetable(result.records), isLoading2: false });\r\n\r\n      })\r\n      .catch(error => this.setState({ error, isLoading2: false }));\r\n\r\n  }\r\n\r\n  render() {\r\n    const { isLoading1, isLoading2 } = this.state;\r\n    if (isLoading1 || isLoading2) {\r\n      return <p>Loading...</p>\r\n    }\r\n    if (this.state.zurTafel === true) {\r\n      return <Redirect to={{ pathname: \"/intern/tafel/\", state: this.state.startsAtDate }} />\r\n    }\r\n    const condMF = (Permissions.MANNSCHAFTSFUEHRER === (Permissions.MANNSCHAFTSFUEHRER & this.props.permissions))\r\n    return (\r\n      <div>\r\n        <h1>Spieltag: {this.state.spieltag}</h1>\r\n        <form className=\"form-inline\">\r\n          <fieldset className=\"fields\">\r\n            <div><strong>Buchungstyp</strong></div>\r\n            {!this.state.dateIsToday &&\r\n              <div>Einzel-/Doppel-Buchung nur am aktuellen Tag möglich</div>\r\n            }\r\n            <select id=\"bookingType\" className=\"form-control\" onChange={this.handleChange} value={this.state.bookingType}>\r\n              <option disabled={!this.state.dateIsToday} value=\"ts-einzel\">Einzel</option>\r\n              <option disabled={!this.state.dateIsToday} value=\"ts-doppel\">Doppel</option>\r\n              <option value=\"ts-turnier\">Turnier</option>\r\n              <option disabled={!condMF} value=\"ts-veranstaltung\">Veranstaltung</option>\r\n              <option disabled={!condMF} value=\"ts-training\">Training</option>\r\n              <option disabled={!condMF} value=\"ts-punktspiele\">Punktspiele</option>\r\n            </select>\r\n            <div><strong>Start</strong> <span id=\"startsAtMsg\" className={this.state.startsAtMsgClass}>{this.state.startsAtMsgTxt}</span></div>\r\n            <div className=\"form-group\">\r\n              <div>\r\n                <select id=\"startsAt\" className={'form-control ' + this.state.startsAtMsgClass} onChange={this.handleChange} value={this.state.startsAt}>\r\n                  {\r\n                    Object.keys(this.state.timetable).map(ttl => {\r\n\r\n                      return (\r\n                        <option key={ttl} value={ttl}>\r\n                          {ttl}h \r\n                      {/*\r\n                          &nbsp; {this.state.timetable[ttl][0]} \r\n                          &nbsp; {this.state.timetable[ttl][1]} \r\n                          &nbsp; {this.state.timetable[ttl][2]} \r\n                          &nbsp; {this.state.timetable[ttl][3]} \r\n                          &nbsp; {this.state.timetable[ttl][4]} \r\n                          &nbsp; {this.state.timetable[ttl][5]}\r\n                      */}\r\n                        </option>\r\n                      )\r\n                    })\r\n                  }\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div><strong>Platz</strong></div>\r\n              <div className=\"form-group\">\r\n                <select id=\"court\" className=\"form-control\" onChange={this.handleChange} value={this.state.court}>\r\n                  <option value=\"--\">--</option>\r\n                  <option disabled={this.state.courtBelegt[0]} value=\"1\">1</option>\r\n                  <option disabled={this.state.courtBelegt[1]} value=\"2\">2</option>\r\n                  <option disabled={this.state.courtBelegt[2]} value=\"3\">3</option>\r\n                  <option disabled={this.state.courtBelegt[3]} value=\"4\">4</option>\r\n                  <option disabled={this.state.courtBelegt[4]} value=\"5\">5</option>\r\n                  <option disabled={this.state.courtBelegt[5]} value=\"6\">6</option>\r\n                </select>\r\n              </div>\r\n          <div><strong>Ende</strong></div>\r\n             <div className=\"form-group\">\r\n             <div>\r\n                <select id=\"endsAt\" className={'form-control ' + this.state.startsAtMsgClass} onChange={this.handleChange} value={this.state.endsAt}>\r\n                  {\r\n                    Object.keys(this.state.timetable).map(ttl => {\r\n                      return (\r\n                        // <option disabled={!this.state.endeActive} key={ttl} value={ttl}>\r\n                        <option key={ttl} value={ttl}>\r\n                          {ttl}h \r\n                          {/* &nbsp; {this.state.timetable[ttl][0]} \r\n                          &nbsp; {this.state.timetable[ttl][1]} \r\n                          &nbsp; {this.state.timetable[ttl][2]} \r\n                          &nbsp; {this.state.timetable[ttl][3]} \r\n                          &nbsp; {this.state.timetable[ttl][4]} \r\n                          &nbsp; {this.state.timetable[ttl][5]} */}\r\n                        </option>\r\n                      )\r\n                    })\r\n                  }\r\n                </select>\r\n              </div>\r\n\r\n            </div>\r\n            <div><strong>{(this.state.bookingType.match(/(ts-einzel)|(ts-doppel)|(ts-turnier)/ig)) ? 'Spieler' : 'Verantwortlicher'}</strong> <span id=\"p1Msg\" className={this.state.p1MsgClass}>{this.state.p1MsgTxt}</span></div>\r\n            <div className=\"form-row\">\r\n              <select id=\"p1\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p1}>\r\n                <option value=\"0\">- Bitte auswählen -</option>\r\n                {this.state.spieler.map(r => {\r\n                  return (\r\n                    <option key={'p1' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum, r.schnupper)}</option>\r\n                  )\r\n                })}\r\n              </select>\r\n              {(this.state.bookingType.match(/(ts-einzel)|(ts-turnier)|(ts-doppel)/ig)) ?\r\n                <select id=\"p2\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p2}>\r\n                  <option value=\"0\">- Bitte auswählen -</option>\r\n                  {this.state.spieler.map(r => {\r\n                    return (\r\n                      <option key={'p2' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum, r.schnupper)}</option>\r\n                    )\r\n                  })}\r\n                </select>\r\n                : ''\r\n              }\r\n            </div>\r\n            <div className=\"form-row\">\r\n              {(this.state.bookingType === \"ts-doppel\") ?\r\n                <select id=\"p3\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p3}>\r\n                  <option value=\"0\">- Bitte auswählen -</option>\r\n                  {this.state.spieler.map(r => {\r\n                    return (\r\n                      <option key={'p3' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum, r.schnupper)}</option>\r\n                    )\r\n                  })}\r\n                </select>\r\n                : ''\r\n              }\r\n              {(this.state.bookingType === \"ts-doppel\") ?\r\n                <select id=\"p4\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p4}>\r\n                  <option value=\"0\">- Bitte auswählen -</option>\r\n                  {this.state.spieler.map(r => {\r\n                    return (\r\n                      <option key={'p4' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum, r.schnupper)}</option>\r\n                    )\r\n                  })}\r\n                </select>\r\n                : ''\r\n              }\r\n            </div>\r\n\r\n            <div><strong>Bemerkung</strong> <span id=\"commentMsg\" className={this.state.commentMsgClass}>{this.state.commentMsgTxt}</span></div>\r\n            <div className=\"form-group\">\r\n              <input type=\"text\" id=\"comment\" className={'form-control w-100 ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.comment} placeholder=\"Spielergebnis, Gastname, ...\" />\r\n            </div>\r\n\r\n            <button type=\"submit\" onClick={e => { this.handleSave(e) }} className=\"btn btn-primary m-1\" disabled={!this.state.saveActive}>Speichern</button>\r\n            <button type=\"submit\" onClick={e => { this.handleDelete(e) }} className=\"btn btn-primary m-2\" disabled={!this.state.deleteActive}>Löschen</button>\r\n          </fieldset>\r\n        </form>\r\n      </div >\r\n    )\r\n  }\r\n\r\n  handleSave(e) {\r\n    e.preventDefault();\r\n    // console.log(\"SAVE FORM DATA NOW!\");\r\n    const s = {}\r\n    // Meldungen zurücksetzen\r\n    s.startsAtMsgTxt = ''\r\n    s.startsAtMsgClass = ''\r\n    s.saveActive = true\r\n    s.p1MsgFormCtrl = ''\r\n\r\n    let parameters =\r\n      '?op=cu'\r\n      + '&rid=' + this.state.r.id\r\n      + '&ds=' + this.state.startsAtDate + ' ' + this.state.startsAt\r\n      + '&de=' + this.state.endsAtDate + ' ' + this.state.endsAt\r\n      + '&uid=' + this.props.userId\r\n      + '&p1=' + this.state.p1\r\n      + '&p2=' + this.state.p2\r\n      + '&p3=' + this.state.p3\r\n      + '&p4=' + this.state.p4\r\n      + '&c=' + this.state.court\r\n      + '&t=' + this.state.bookingType\r\n      + '&cmt=' + this.state.comment\r\n      + '&pr=0'\r\n      ;\r\n    let url = Config.protokoll + Config.hostname\r\n      + '/intern/api/platz.php'\r\n      + parameters;\r\n    // console.log(url);\r\n    fetch(url, { credentials: 'same-origin' })\r\n      .then(result => {\r\n        if (result.ok) {\r\n          return result.json()\r\n        } else {\r\n          throw new Error('Fehler beim Erzeugen/Updaten der Belegung' + this.state.r.id);\r\n        }\r\n      })\r\n      .then(result => {\r\n        let rc = result.records[0].returncode;\r\n        if (rc === 'ok') {\r\n          // Logging der Buchung\r\n          let logurl =\r\n            Config.protokoll\r\n            + Config.hostname\r\n            + Config.buchungenlog\r\n            + parameters;\r\n          fetch(logurl, { credentials: 'same-origin' }); // Wenn Logging fehlschlagen sollte, dann verzichten wir eben darauf\r\n          this.setState({ zurTafel: true })\r\n        } else if (rc === 'bereits belegt') {\r\n          // Fehlermeldung\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.platzbelegt;\r\n        } else {\r\n          // User nicht authentifiziert oder etwas stimmt generell nicht\r\n          window.location.href = Config.loginPage\r\n        }\r\n        // Alle Ergebnisse in den State\r\n        this.setState(s)\r\n      })\r\n  }\r\n\r\n  handleDelete(e) {\r\n\r\n    const sdStr = this.state.startsAtDate + 'T' + this.state.startsAt + \"Z\";\r\n    const sd = new Date(sdStr);\r\n    const jetzt = new Date();\r\n\r\n    e.preventDefault();\r\n\r\n    if (sd >= jetzt || (Permissions.VORSTAND & this.props.permissions)) {\r\n      let parameters =\r\n        '?op=d'\r\n        + '&rid=' + this.state.r.id\r\n        + '&uid=' + this.props.userId;\r\n      let url =\r\n        Config.protokoll\r\n        + Config.hostname\r\n        + Config.platzbuchungen\r\n        + parameters;\r\n      fetch(url, { credentials: 'same-origin' })\r\n        .then(result => {\r\n          if (result.ok) {\r\n            // Logging der Buchung\r\n            let logurl = Config.protokoll + Config.hostname\r\n              + Config.buchungenlog\r\n              + parameters;\r\n            fetch(logurl, { credentials: 'same-origin' });\r\n            this.setState({ zurTafel: true });\r\n          }\r\n        })\r\n    } else {\r\n      this.setState({ zurTafel: true });\r\n    }\r\n    e.preventDefault();\r\n\r\n  }\r\n\r\n  handleChange(e) {\r\n    e.preventDefault();\r\n\r\n    this.setState({ [e.target.id]: e.target.value }, () => {\r\n      const s = {}\r\n\r\n      // Meldungen zurücksetzen\r\n      s.p1MsgTxt = ''\r\n      s.p1MsgClass = ''\r\n      s.startsAtMsgTxt = ''\r\n      s.startsAtMsgClass = ''\r\n      s.commentMsgTxt = ''\r\n      s.commentMsgClass = ''\r\n\r\n      s.saveActive = true\r\n      s.deleteActive = true\r\n      s.endeActive = false\r\n      s.p1MsgFormCtrl = ''\r\n      s.overbooked = false\r\n      s.startsAt = this.state.startsAt\r\n\r\n      // Alle nicht buchbaren Zeiten der Timetable deaktivieren\r\n      // s.timetable = getBookableTimes(this.state.timetable)\r\n      s.timetable = this.state.timetable\r\n      // Belegte Plätze im Select disablen\r\n      s.courtBelegt = s.timetable[s.startsAt].map( c => c === Config.platzBelegt )\r\n\r\n      // Endezeit errechnen\r\n      let endsAtViertel = this.state.startsAt.substring(3, 5)\r\n      let endsAtStd = this.state.endsAt.substring(0, 2)\r\n      if (this.state.bookingType === \"ts-einzel\") {\r\n        endsAtStd = (Number(this.state.startsAt.substring(0, 2)) + 1).toLocaleString('de-DE', {minimumIntegerDigits: 2, useGrouping: false})\r\n      } \r\n      else if (this.state.bookingType.match(/(ts-turnier)|(ts-doppel)/ig)) {\r\n        endsAtStd = (Number(this.state.startsAt.substring(0, 2)) + 2).toLocaleString('de-DE', {minimumIntegerDigits: 2, useGrouping: false})\r\n      }\r\n      s.endsAt = endsAtStd + \":\" + endsAtViertel\r\n\r\n      // Bedingungen\r\n      let condEinGast = false\r\n      let condEinMitglied = false\r\n      let condEinSpielerErwVoll = false\r\n      let condDoppelteSpieler = false\r\n      let condUserIstSpieler = false\r\n\r\n      const datestring = this.state.startsAtDate + 'T' + this.state.startsAt + \"Z\"\r\n      const sd = new Date(datestring)\r\n      const hd = new Holidays()\r\n      hd.init('DE', 'BY')\r\n      const condFeiertag = hd.isHoliday(sd) ? true : false\r\n      const condSonnOderFeiertag = (condFeiertag || (sd.getDay() === 0) || (sd.getDay() === 6))\r\n      // const condPlatz6 = (Number(this.state.court) === 6)\r\n\r\n      // Validierung\r\n      // -----------\r\n      // Es wird validiert, ob Erwachsene, Schnuppermitglieder und Jugendliche \r\n      // wirklich spielberechtigt sind und ob die eingetragenen Zeiten stimmen\r\n\r\n      // Buchungszeiten in Minuten\r\n      const start = Number(s.startsAt.substring(0, 2)) * 60 + Number(s.startsAt.substring(3, 5))\r\n      let ende = Number(s.endsAt.substring(0, 2)) * 60 + Number(s.endsAt.substring(3, 5))\r\n\r\n      const pKeys = [Number(this.state.p1), Number(this.state.p2), Number(this.state.p3), Number(this.state.p4)]\r\n\r\n      // Haben wir einen GAST oder ein Mitglied ohne Namen?\r\n      // Ist der aktuelle User auch Spieler?\r\n      // Ist ein erwachsenes Vollmitglied dabei?\r\n\r\n      const spieler = this.state.spieler;\r\n      condEinSpielerErwVoll = false\r\n      pKeys.forEach((p) => {\r\n        if (p != null && p != 0) // \r\n        {\r\n          if (p === Number(this.props.userId)) {\r\n            condUserIstSpieler = true\r\n          }    if (p === Config.gastId || p === Config.gastJugId) {\r\n            condEinGast = true\r\n          }    if (p === Config.mitgliedId) {\r\n            condEinMitglied = true\r\n          }\r\n          // Geburtsdatum und Schnupperstatus prüfen wir mittels spieler-SELECT-Array\r\n          let pAttr = spieler.find(o => o.id === p.toString())\r\n          if ( ! (isJugendlicher(pAttr['geburtsdatum']) || pAttr['schnupper'] === \"1\") ) {\r\n            condEinSpielerErwVoll = true\r\n          }\r\n        }\r\n      })\r\n      // Auch der Ersteller der Buchung ist zu allem berechtigt\r\n      condUserIstSpieler = condUserIstSpieler || this.props.userId === this.state.r.user_id\r\n\r\n      let saveActiveMerker = true\r\n      // Message an der Spielzeit\r\n      // Formal müssen Spieler korrekt eingetragen sein\r\n      if (this.state.bookingType.match(/(ts-veranstaltung)|(ts-training)|(ts-nichtreservierbar)/ig)) {\r\n        // Ein Spieler muss eingetragen werden\r\n        if (Number(this.state.p1) === 0) {\r\n          [s.p1msgClass, s.saveActive, s.p1MsgTxt] = Messages.spieleranzahl\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        }\r\n        // Spieler 2 bis 4 werden \"gelöscht\"\r\n        s.p2 = s.p3 = s.p4 = 0\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n\r\n      if (this.state.bookingType.match(/(ts-turnier)|(ts-einzel)/ig)) {\r\n        // Zwei Spieler müssen eingetragen werden, beide nicht 0 und unterschiedlich\r\n        if (Number(this.state.p1) === 0 || Number(this.state.p2) === 0) {\r\n          [s.p1msgClass, s.saveActive, s.p1MsgTxt] = Messages.spieleranzahl;\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        } else if (Number(this.state.p1) === Number(this.state.p2)) {\r\n          // Sind die Spieler doppelt?\r\n          condDoppelteSpieler = true;\r\n          [s.p1msgClass, s.saveActive, s.p1MsgTxt] = Messages.spieleranzahl;\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        }\r\n        // Spieler 3 bis 4 werden \"gelöscht\"\r\n        s.p3 = s.p4 = 0\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n\r\n      if (this.state.bookingType === \"ts-doppel\") {\r\n        // Vier Spieler\r\n        // Sind unter 4 Spielern welche doppelt?\r\n        condDoppelteSpieler = (_.uniq([this.state.p1, this.state.p2, this.state.p3, this.state.p4]).length < 4)\r\n\r\n        if (!condEinGast) {\r\n          if (condDoppelteSpieler || (Number(this.state.p3) === 0 || Number(this.state.p4) === 0)) {\r\n            [s.p1MsgClass, s.saveActive, s.p1MsgTxt] = Messages.spieleranzahl;\r\n            s.p1MsgFormCtrl = 'is-invalid'\r\n          }\r\n        }\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n\r\n      if (condEinGast || condEinMitglied) {\r\n        if (this.state.bookingType.match(/(ts-einzel)|(ts-doppel)/ig)) {\r\n          // Gäste und unbenannte Mitglieder müssen einen Kommentar/Namen vermerken. Mind. 2 Zeichen\r\n          if (this.state.comment.length < 2) {\r\n            [s.commentMsgClass, s.saveActive, s.commentMsgTxt] = condEinGast ? Messages.gast : Messages.mitglied\r\n            s.p1MsgFormCtrl = 'is-invalid'\r\n          }\r\n        }\r\n        else {\r\n          [s.p1MsgClass, s.saveActive, s.p1MsgTxt] = Messages.spieleranzahl;\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        }\r\n      }\r\n      if (this.state.bookingType === \"ts-veranstaltung\") {\r\n        [s.commentMsgClass, s.saveActive, s.commentMsgTxt] = Messages.veranstaltung\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n\r\n      if (this.state.bookingType.match(/(ts-einzel)|(ts-doppel)/ig)) {\r\n        // Jetzt die Berechtigungen nach Alter, Status, Zeitpunkt. Message an der Spielzeit\r\n        // Diese Bedingungen sind von der Entscheidungstabelle (Dokumentation, Excel) abgeleitet\r\n        const dToday = new Date()\r\n\r\n        const dH = dToday.getHours()\r\n        const dM = dToday.getMinutes()\r\n        const minutesToday = (dH * 60 + dM)\r\n        if ((start - minutesToday) > Config.maxMinutesDistance && !condEinSpielerErwVoll && !condSonnOderFeiertag && ende > (Config.eveningTime / 100 * 60)) {\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.erwachsenenvorrecht;\r\n          s.overbooked = true\r\n        }\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n\r\n      // Auswertung Spielzeit formal, Message an der Spielzeit\r\n      if (start >= ende) {\r\n        [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.zeit;\r\n      }\r\n      else if (this.state.bookingType === \"ts-einzel\") {\r\n        if ((ende - start) > Config.singleTime) {\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.einzeldauer;\r\n        }\r\n      }\r\n      else if (this.state.bookingType === \"ts-doppel\") {\r\n        if ((ende - start) > Config.doubleTime) {\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.doppeldauer;\r\n        }\r\n      }\r\n      else if (this.state.bookingType === \"ts-turnier\") {\r\n        if ((ende - start) !== Config.turnierTime) {\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.turnierspieldauer;\r\n        } else {\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.turnier;\r\n        }\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n\r\n      // Berechtigung zum Speichern und Löschen und flexible Endezeit\r\n      if (this.state.bookingType.match(/(ts-einzel)|(ts-doppel)|(ts-turnier)/ig)) {\r\n        s.saveActive = condUserIstSpieler || (Permissions.VORSTAND === (Permissions.VORSTAND & this.props.permissions))\r\n        s.deleteActive = condUserIstSpieler || (Permissions.VORSTAND === (Permissions.VORSTAND & this.props.permissions))\r\n        s.endeActive = false\r\n      }\r\n      if (this.state.bookingType.match(/(ts-training)|(ts-punktspiele)|(ts-nichtreservierbar)|(ts-veranstaltung)/ig)) {\r\n        s.saveActive = (Permissions.MANNSCHAFTSFUEHRER === (Permissions.MANNSCHAFTSFUEHRER & this.props.permissions))\r\n        s.endeActive = true\r\n      }\r\n      if (this.state.bookingType.match(/(ts-training)|(ts-punktspiele)|(ts-nichtreservierbar)|(ts-veranstaltung)/ig)) {\r\n        s.deleteActive = (Permissions.MANNSCHAFTSFUEHRER === (Permissions.MANNSCHAFTSFUEHRER & this.props.permissions))\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n\r\n      s.saveActive = saveActiveMerker\r\n\r\n      // Alle Ergebnisse in den State\r\n      this.setState(s)\r\n\r\n    });\r\n  }\r\n}\r\n\r\nexport default BelForm;\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport BelForm from './BelForm';\r\nimport { Link } from 'react-router-dom';\r\nimport Config from './Defaults';\r\n\r\nclass Belegung extends Component {\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = { \r\n      belegung : [],\r\n      isLoading : false,\r\n      error : false,\r\n    };\r\n  }  \r\n  componentWillMount() {\r\n    const {op} = this.props.location.state;\r\n    if (op === \"update\") {\r\n      const {i, d} = this.props.location.state;\r\n      this.updateBel(i, d);\r\n    } else if (op === \"new\") {\r\n      const {c, d} = this.props.location.state;\r\n      this.newBel(c, d);\r\n    }\r\n  }\r\n  \r\n  updateBel(id, day) {\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/platz.php?op=r&rid=\" + id;\r\n  \r\n    this.setState({isLoading : true});\r\n    \r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then(result => {\r\n      if (result.ok) {\r\n        if (result.redirected) {\r\n          console.log(\"BelDetails.js/Checkuser: Authentifizierungsfehler\")\r\n          window.location.href = result.url\r\n        }\r\n        return result.json();\r\n      } else {\r\n        throw new Error('Fehler beim Laden der Platzbuchungsdetails');\r\n      }\r\n    })\r\n    .then(result => {\r\n      let belegung = result.records.map( r => {\r\n        return (\r\n          <div key={r.id} className=\"p-2\">\r\n              <Link to={{ pathname: '/intern/tafel/', state: {d: day} }}><p className=\"btn btn-secondary\">Zurück</p></Link>\r\n              <BelForm r={r} userId={this.props.userId} permissions={this.props.permissions} />\r\n          </div>\r\n        )\r\n      })\r\n      this.setState({ belegung: belegung })\r\n    })\r\n    .catch(error => this.setState({ error, isLoading: false }));\r\n  }\r\n  \r\n  newBel(court, day)\r\n  {\r\n    let r = getEmptyBel(court, day);\r\n    let belegung = [\r\n        <div key={-1} className=\"p-2\">\r\n            <Link to={{ pathname: '/intern/tafel/', state: {d: day} }}><p className=\"btn btn-secondary\">Zurück</p></Link>\r\n            <BelForm r={r} userId={this.props.userId} permissions={this.props.permissions} />\r\n        </div>\r\n    ];\r\n    this.setState({ belegung: belegung })\r\n  }\r\n  \r\n  render() {\r\n    return (\r\n      <div>{this.state.belegung}</div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction getEmptyBel(court, day) {\r\n  return {\r\n    id: 0,\r\n    user_id: 0,\r\n    p1: '',\r\n    p2: '',\r\n    p3: '',\r\n    p4: '',\r\n    court: court,\r\n    starts_at: day + ' 08:00:00',\r\n    ends_at: day + ' 09:00:00',\r\n    booking_type: '',\r\n    geburtsdatum: '0000-00-00',\r\n    p1id: 0,\r\n    p2id: 0,\r\n    p3id: 0,\r\n    p4id: 0,    \r\n  }\r\n}\r\nexport default Belegung;\r\n  ","import React, { Component } from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport Belegungstag from './Belegungstag';\r\nimport Belegung from './Belegung';\r\n\r\n\r\nclass Routing extends Component {\r\n    render() {\r\n      return (\r\n        <Switch>\r\n          <Route exact path='/intern/tafel/belegung' render={(props) => <Belegung {...props} userId={this.props.userId} permissions={this.props.permissions} />} />\r\n          <Route render={(props) => <Belegungstag {...props} userId={this.props.userId} permissions={this.props.permissions} />} />\r\n        </Switch>\r\n      )\r\n    }\r\n}\r\n\r\n\r\nexport default Routing;\r\n  ","import React, { Component } from 'react';\r\nimport Routing from \"./Routing\";\r\nimport Config from \"./Defaults\";\r\n\r\n\r\nclass App extends Component \r\n{\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = { \r\n      user: {},\r\n      isLoggedIn: false,\r\n      permissions: 0,\r\n      renderData: [],\r\n      isLoading1: true,\r\n      isLoading2: true,\r\n    };\r\n  }\r\n  \r\n  componentDidMount()\r\n  {\r\n    this.setState(() => ({ isLoading1: true , isLoading2: true}));\r\n    if (Config.prod) \r\n    { \r\n      this.checkUser();\r\n      this.setPermission();\r\n    } \r\n    else \r\n    {\r\n      // In der Testumgebung simulierter User\r\n      this.setState(() => ({user: Config.testuser, permissions: Config.testuser.permissions}));\r\n\r\n      // Re-rendering - sollte nur auf passiv genutzten Geräten (z. B. Monitor an Platz) verwendet werden\r\n      // this.interval = setInterval(()  => this.forceUpdate(), 1000)\r\n    }\r\n  }\r\n\r\n  checkUser() \r\n  {\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/checkuser.php\";\r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then( (res) => {\r\n      if (res.ok) {\r\n        res.json()\r\n        .then( (user) => {\r\n          if (user.retcode === 'OK') {\r\n            this.setState(() => ({user: user.user, isLoading1: false}));\r\n          } else {\r\n            // console.log(\"App.js/Checkuser: Authentifizierungsfehler\")\r\n            window.location.href = Config.protokoll + Config.hostname + Config.loginPage;\r\n          }\r\n        });\r\n      }\r\n    })\r\n  }\r\n  \r\n  setPermission() \r\n  {\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/checkpermission.php\";\r\n    // console.log(url)\r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then( (res) => {\r\n      if (res.ok) {\r\n        res.json()\r\n        .then( (permissions) => {\r\n          // console.log(permitted.retcode)\r\n          this.setState(() => ({permissions: permissions.retcode, isLoading2: false}))\r\n        })\r\n      }\r\n    })\r\n  }\r\n  \r\n  render() \r\n  {\r\n    const { isLoading1, isLoading2 } = this.state;\r\n    if (Config.prod && (isLoading1 || isLoading2)) {\r\n      return <p>Loading...</p>\r\n    } else {\r\n      return (\r\n        <React.Fragment>\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              <div className=\"col text-left\">\r\n                <img src=\"/images/tcoplain_0,1x.png\" alt=\"TCO -Logo\" />\r\n              </div>\r\n              <div className=\"col\">\r\n                <span className=\"h6 text-center ml-2\"><a href=\"/intern/tafel/\" id=\"appname\">Platzbuchung</a></span> \r\n                <span className=\"text-center ml-2\"><small> ({this.state.user.vorname + ' ' + this.state.user.nachname})</small></span>\r\n              </div>\r\n              <div className=\"col\">\r\n                <div className=\"small align-bottom\"><span className=\"pl-5\"><a href=\"/intern/logout.php\"><img src=\"/images/logout.png\" alt=\"Logout\" /></a></span></div> \r\n              </div>\r\n            </div>\r\n          </div>\r\n              \r\n          <Routing userId = {this.state.user.id} permissions = {this.state.permissions}/>\r\n          <footer className=\"blockquote-footer\">(c) 2019 by Conny Roloff. Dem TC Olching zur kostenlosen Nutzung zur Verfügung gestellt.</footer>\r\n        </React.Fragment>\r\n      )}\r\n    }\r\n  }\r\n\r\n\r\nexport default App;\r\n  ","import 'babel-polyfill'; \r\nimport 'react-app-polyfill/ie11';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport App from './components/App';\r\n\r\nReactDOM.render((\r\n  <Router>\r\n    <App />\r\n  </Router>\r\n), document.getElementById('root'));\r\n\r\n// import index from \"./js/index\";\r\n"],"sourceRoot":""}