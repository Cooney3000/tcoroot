{"version":3,"sources":["components/Defaults.js","components/functions.js","components/Platz.js","components/DayPicker.js","components/Belegungstag.js","components/BelForm.js","components/Belegung.js","components/Routing.js","components/App.js","index.js"],"names":["config","testuser","id","vorname","nachname","permissions","stringSeparator","smartphoneWidth","anzahlPlaetze","platzArray","daypickerMaxDays","daypickerDaysBeforeToday","daypickerDaysBeforeTodayWide","buchungenlog","platzbuchungen","dailyStartTime","dailyEndTime","eveningTime","maxMinutesDistance","singleTime","doubleTime","turnierTime","gastId","mitgliedId","platzLeer","platzBelegt","slotMinimalMinutes","delimiter","IMPORTANT","messages","gast","mitglied","veranstaltung","spieleranzahl","jugendvorrecht","erwachsenenvorrecht","einzeldauer","doppeldauer","turnier","turnierspieldauer","zeit","platzbelegt","i","push","NONE","MANNSCHAFTSFUEHRER","WIRT","T_ALL_PERMISSIONS","VORSTAND","ADMINISTRATOR","formatDate","d","month","getMonth","day","getDate","year","getFullYear","length","join","spielerzusatz","geburtsdatum","schnupper","aktuellesJahr","Date","geburtsjahr","zusatz","Number","replace","servertimeNow","servertime","parseCookie","document","cookie","str","split","map","v","reduce","acc","decodeURIComponent","trim","getTimetable","belegungen","endeTag","setHours","timetable","getTime","Config","tagesZeit","toTimeString","substr","bKey","sa","starts_at","anzahlSlots","ends_at","saTmp","cTmp","court","Platz","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","handleWindowSizeChange","setState","zumBelegungstag","state","courtData","isLoading","error","width","window","innerWidth","prevProps","_this$props","fetchPlatz","_this$props2","uPermissions","_this2","userIsAllowed","url","protokoll","hostname","addEventListener","fetch","credentials","then","result","ok","redirected","location","href","json","records","r","spieler","k","cn","computeBelClasses","booking_type","formatSpieler","platzWide","match","react_default","a","createElement","key","className","substring","comment","Link","to","pathname","c","op","removeEventListener","Component","p1vn","charAt","p1nn","p1geb","schnupper1","p2vn","p2nn","p2geb","schnupper2","p3vn","p3nn","p3geb","schnupper3","p4vn","p4nn","p4geb","schnupper4","s","RegExp","e","bookingType","dauer","bt","classNames","list","MenuItem","_ref","text","selected","concat","Arrow","_ref2","ArrowLeft","ArrowRight","DayPicker","onSelect","onClickHandler","startswith","end","setDate","start","dt","arr","name","toLocaleDateString","weekday","getDateArray","menu","el","DayPicker_MenuItem","build_default","data","arrowLeft","arrowRight","Belegungstag","dayDate","params","isNaN","setDay","bind","dString","firstDaypickerDay","courtDiv","Belegungstag_Zeitleiste","src","alt","components_Platz","components_DayPicker","react_swipeable_views_lib_default","Belegungstag_Legende","Zeitleiste","m","toString","padStart","index","Fragment","Legende","BelForm","handleChange","assertThisInitialized","handleSave","handleDelete","_r$starts_at$split","_r$starts_at$split2","slicedToArray","sd","st","scd","ssd","dateIsToday","valueOf","deleteActive","p1id","p2id","p3id","p4id","includes","userId","Permissions","_r$ends_at$split","_r$ends_at$split2","ed","et","sdA","spieltag","startsAtDate","endsAtDate","startsAt","endsAt","p1","p2","p3","p4","p1Schn","p2Schn","p3Schn","p4Schn","belegungenAbJetzt","zurTafel","saveActive","endeActive","admin","overbooked","jugend","nichtVollBerechtigte","isLoading1","isLoading2","courtBelegt","Error","catch","_this3","_this$state","Redirect","condMF","onChange","value","disabled","startsAtMsgClass","startsAtMsgTxt","keys","ttl","p1MsgClass","p1MsgTxt","p1MsgFormCtrl","commentMsgClass","commentMsgTxt","type","placeholder","onClick","_this4","preventDefault","parameters","rc","returncode","logurl","_Messages$platzbelegt","Messages","loginPage","_this5","sdStr","jetzt","_this6","defineProperty","target","endsAtViertel","endsAtStd","toLocaleString","minimumIntegerDigits","useGrouping","condEinGast","condEinMitglied","condEinSpielerErwVoll","condDoppelteSpieler","condUserIstSpieler","datestring","hd","Holidays","init","condSonnOderFeiertag","isHoliday","getDay","ende","pKeys","forEach","p","isJugendlicher","saveActiveMerker","_Messages$spieleranza","p1msgClass","_Messages$spieleranza2","_Messages$spieleranza3","_","uniq","_Messages$spieleranza4","_Messages$spieleranza5","_Messages$veranstaltu","dToday","getHours","getMinutes","_Messages$erwachsenen","_Messages$zeit","_Messages$einzeldauer","_Messages$doppeldauer","_Messages$turnierspie","_Messages$turnier","Belegung","belegung","_this$props$location$","updateBel","_this$props$location$2","newBel","console","log","components_BelForm","user_id","getEmptyBel","Routing","Switch","Route","exact","path","render","components_Belegung","assign","components_Belegungstag","App","user","isLoggedIn","renderData","prod","checkUser","setPermission","res","retcode","components_Routing","ReactDOM","BrowserRouter","components_App","getElementById"],"mappings":"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","file":"static/js/main.9e4c0288.chunk.js","sourcesContent":["\r\n// ****** Konfigurationsdaten *******\r\n\r\nexport const hostLocal = true\r\n\r\nconst config = {\r\n  testuser: {id:211, vorname:'Hart', nachname:'VerdrahtetAdm', permissions: 65535}, // mit Adminrechten\r\n  // testuser: {id:211, vorname:'Hart', nachname:'VerdrahtetUsr', permissions: 0}, // mit normalen Benutzerrechten\r\n  // testuser: {id:357, vorname:'Hart', nachname:'VerdrahtetUsr2', permissions: 432}, // mit normalen Benutzerrechten\r\n  stringSeparator: ' ',\r\n  smartphoneWidth: 578,\r\n  anzahlPlaetze: 6,\r\n  platzArray: [],\r\n  daypickerMaxDays: 180,\r\n  daypickerDaysBeforeToday: 3, \r\n  daypickerDaysBeforeTodayWide: 9, \r\n  buchungenlog: '/intern/api/buchungenlog.php',\r\n  platzbuchungen: '/intern/api/platz.php',\r\n\r\n  dailyStartTime: 8,\r\n  dailyEndTime: 20,\r\n  eveningTime: 1700,  // 17:00 Uhr, alte Platzordnung war 18:00 Uhr\r\n  maxMinutesDistance: 15, // Gäste und Jugendliche dürfen abends erst kurz vor der Spielzeit buchen\r\n  singleTime: 60, // = 1 Stunde\r\n  doubleTime: 120, // = 2 Stunden \r\n  turnierTime: 120, // = 2 Stunden \r\n  gastId: 1,\r\n  mitgliedId: 25,\r\n  platzLeer: \"\\u00A0\\u00A0\",\r\n  platzBelegt: \"\\u29EB\",\r\n  slotMinimalMinutes: 1800000, // = 30 Minuten\r\n  delimiter: \"§§§\"\r\n}\r\nif (hostLocal) {\r\n  config.hostname = 'localhost'\r\n  config.protokoll = 'http://'\r\n  config.loginPage = '/intern/login.php'\r\n  config.prod = false\r\n} else {    \r\n  config.hostname = 'www.tcolching.de'\r\n  config.protokoll = 'https://'\r\n  config.loginPage = '/intern/login.php'\r\n  config.prod = true\r\n}\r\n\r\nconst IMPORTANT = \"text-danger\"\r\nconst MSG = \"text-info\"\r\nconst NOSAVE = false\r\nconst SAVE = true\r\n\r\nexport const messages = {\r\n  gast: [IMPORTANT, NOSAVE, '- Bitte den Gastnamen ins Kommentarfeld schreiben und die Gebühr innerhalb einer Woche überweisen!'],\r\n  mitglied: [IMPORTANT, NOSAVE, '- Bitte nur für Mitglieder ohne Email verwenden und den Namen ins Kommentarfeld schreiben!'],\r\n  veranstaltung: [IMPORTANT, SAVE, '- Bitte den Veranstaltungsanlass ins Kommentarfeld schreiben und den Vorstand informieren!'],\r\n  spieleranzahl: [IMPORTANT, NOSAVE, '- Bitte alle Personen eintragen!'],\r\n  jugendvorrecht: [MSG, SAVE, '- Achtung: Jugendliche haben auf Platz 6 zu dieser Zeit Vorrecht!'],\r\n  erwachsenenvorrecht: [IMPORTANT, NOSAVE, '- Buchung erst 15 Minuten vor Spielbeginn möglich, da erwachsene Vollmitglieder abends ab 17:00 Uhr Vorrecht haben.'],\r\n  einzeldauer: [IMPORTANT, NOSAVE, '- Für ein Einzel maximal 60 Minuten buchen'],\r\n  doppeldauer: [IMPORTANT, NOSAVE, '- Für ein Doppel maximal 120 Minuten buchen'],\r\n  turnier: [MSG, SAVE, '- Turnierspiele 120 Minuten. Falls möglich auf Platz 1 buchen. Parallel sollte ein Platz auf der Anlage nicht durch Turniere oder Training belegt sein! Wer Mannschaftstraining hat, darf nur auf den Plätzen der Mannschaft Turnier spielen.'],\r\n  turnierspieldauer: [IMPORTANT, NOSAVE, '- Turnierspiele 120 Minuten. Falls möglich auf Platz 1 buchen. Parallel sollte ein Platz auf der Anlage nicht durch Turniere oder Training belegt sein! Wer Mannschaftstraining hat, darf nur auf den Plätzen der Mannschaft Turnier spielen.'],\r\n  zeit: [IMPORTANT, NOSAVE, '- Der Start muss vor dem Ende liegen!'],\r\n  platzbelegt:  [IMPORTANT, NOSAVE, '- Platz bereits belegt!'],\r\n};\r\nfor (let i = 1; i <= config.anzahlPlaetze; i++) {\r\n  config.platzArray.push(i);\r\n}\r\n\r\n// ******* Rechtevergabe **********\r\nexport const permissions = {\r\n  // Es gibt 16 Rechte. Übereinandergelegt\r\n  \r\n  // Recht:        1 2 3 4  5  6  7   8   9  10   11   12   13   14    15    16\r\n  // Dezimalwert:  1 2 4 8 16 32 64 128 256 512 1024 2048 4096 8192 16384 32768 \r\n  //\r\n  // Summen daraus sind kombinierte Rechte, z.B. \r\n  //                3 ist Recht 1 und Recht 2\r\n  //               15 ist Recht 1, 2, 3, 4 (1+2+4+8)\r\n  //              128 ist Recht 8\r\n  //              143 ist Recht 1,2,3,4,8\r\n    NONE : 0,\r\n    MANNSCHAFTSFUEHRER : 32,\r\n    WIRT : 64,\r\n    T_ALL_PERMISSIONS : 128,    // Turnierverantwortliche\r\n    VORSTAND : 496,             // kombiniert 16, 32, 64, 128, 256\r\n    ADMINISTRATOR : 65535,\r\n};\r\n\r\nexport default config;\r\n","import Config from './Defaults';\r\n\r\nexport const formatDate = (d) => {\r\n  var month = '' + (d.getMonth() + 1),\r\n    day = '' + d.getDate(),\r\n    year = d.getFullYear();\r\n\r\n  if (month.length < 2) month = '0' + month;\r\n  if (day.length < 2) day = '0' + day;\r\n\r\n  return [year, month, day].join('-');\r\n}\r\n\r\n// ***** date array \r\nexport const getDateArray = (start, end) => {\r\n  let dt = new Date(start),\r\n    arr = [];\r\n  while (dt <= end) {\r\n    arr.push({ name: formatDate(dt), text: dt.toLocaleDateString(\"de-DE\", { weekday: 'short', month: 'short', day: 'numeric' }) });\r\n    dt.setDate(dt.getDate() + 1);\r\n  }\r\n  return arr;\r\n}\r\n\r\nexport const isValidDate = (d) => {\r\n  return d instanceof Date && !isNaN(d);\r\n}\r\n\r\nexport const spielerzusatz = (geburtsdatum, schnupper) => {\r\n  let aktuellesJahr = new Date();\r\n  aktuellesJahr = aktuellesJahr.getFullYear();\r\n  let geburtsjahr = new Date(geburtsdatum);\r\n  geburtsjahr = geburtsjahr.getFullYear();\r\n  const jugend = (aktuellesJahr - geburtsjahr) < 18 ? true : false;\r\n  // console.log(`${geburtsdatum} ${geburtsjahr} ${aktuellesJahr} ${jugend}` );\r\n  let zusatz = ' (' + (jugend ? 'Jug' : '') + (Number(schnupper) === 1 ? ',Schn' : '') + ')'\r\n  zusatz = zusatz.replace('(,', '(')\r\n  zusatz = zusatz.replace('()', '')\r\n  return zusatz\r\n}\r\n\r\n// jugendlicher = nicht voll Berechtigt\r\nexport const jugendlicher = (geburtsdatum) => {\r\n  if (typeof (geburtsdatum) === 'undefined' || geburtsdatum === null) {\r\n    return false;\r\n  }\r\n  let aktuellesJahr = new Date();\r\n  aktuellesJahr = aktuellesJahr.getFullYear();\r\n  let geburtsjahr = new Date(geburtsdatum);\r\n  geburtsjahr = geburtsjahr.getFullYear();\r\n  const jugend = ((aktuellesJahr - geburtsjahr) < 18) ? true : false;\r\n  // console.log(`${geburtsdatum} ${geburtsjahr} ${aktuellesJahr} ${jugend}` );\r\n  return jugend;\r\n}\r\n\r\n// Serverzeit?\r\nexport const servertimeNow = () => {\r\n  const cookies = parseCookie(document.cookie)\r\n  const servertime = cookies['servertime']\r\n  const st = new Date(Number(servertime))\r\n  return st\r\n}\r\n\r\n//#Source https://bit.ly/2neWfJ2 \r\nconst parseCookie = str =>\r\n  str\r\n    .split(';')\r\n    .map(v => v.split('='))\r\n    .reduce((acc, v) => {\r\n      acc[decodeURIComponent(v[0].trim())] = decodeURIComponent(v[1].trim());\r\n      return acc;\r\n    }, {});\r\n\r\n\r\n// Setze alle Zeiten auf false, die nicht als Start verwendet werden dürfen\r\nexport function getBookableTimes(tt) {\r\n  // Zu welchem Slot kann auf einem Platz gestartet werden?\r\n  let startBooking = ['--', '--', '--', '--', '--', '--']\r\n  for (let slot in tt) {  // Iteration über die Indizes der Slots\r\n    for (let p in tt[slot]) { // Iteration über die Indizes (0 - 5) der Plätze je Viertelstunden\r\n      if (startBooking[p] === '--' && tt[slot][p] === Config.platzBelegt) {  // Wenn ein Platz an einer Stelle nicht buchbar ist, ist er \"..\"\r\n        startBooking[p] = slot.substr(19, 2) // Merke dir die Minuten des Slots. An Pos 19 sind die Minuten\r\n      }\r\n    }\r\n  }\r\n  // Alle Plätze nur zu möglichen Startzeiten erlauben, andere Zeiten sperren (\"--\")\r\n  // z. B. Wenn eine Buchung um xx:30 Uhr besteht, dann sind keine Buchungen zur vollen Stunde erlaubt, \r\n  // um nicht Lücken entstehen zu lassen\r\n  // *****************  DERZEIT INAKTIV!!! ******************\r\n  const timetable = []\r\n  for (let slot in tt) {  // Iteration über die Indizes der Viertelstunden (0..51)\r\n    timetable[slot] = []\r\n    for (let p in tt[slot]) { // Iteration über die Indizes (0 - 5) der Plätze je Viertelstunden\r\n      // console.log(\"p, tt[slot][p]: \", p, tt[slot][p])\r\n      if (startBooking[p] === '--') { // Auf diesem Platz p gibt es an diesem Tag noch keine Buchung\r\n        timetable[slot][p] = tt[slot][p]  // Platzziffer übernehmen\r\n      }\r\n      else {\r\n        if ((startBooking[p] === slot.substr(19, 2) || tt[slot][p] === Config.platzBelegt)) {  // Das ist eine gültige Zeit für einen Platz\r\n          timetable[slot][p] = tt[slot][p] // Platzziffer (oder eben Sperrzeichen) übernehmen\r\n        } else {\r\n          timetable[slot][p] = Config.platzLeer\r\n        }\r\n      }\r\n    }\r\n  }\r\n  return timetable\r\n}\r\n\r\n// Liefere die Daten für einen HTML-SELECT mit belegten und freien Zeiten\r\nexport function getTimetable(belegungen) {\r\n  // Erzeuge alle Zeiten als Timestamps für den HTML-Select in einem zweidimensionalen Objekt\r\n  // mit Uhrzeiten im Slot-Takt (z. B. 30 oder 15 Minutene, je nach Config)\r\n  // in der Form {<uhrzeit> : {platz: <platz>, <aktiv|inaktiv>}}\r\n\r\n  let zeit = new Date();\r\n  let endeTag = new Date();\r\n\r\n  // Die Timetable erzeugen, alle Plätze und Zeiten \"frei\", also Anzeige der Platznummer\r\n  zeit.setHours(8, 0, 0, 0);\r\n  endeTag.setHours(21, 0, 0, 0);\r\n  const timetable = [];\r\n  for (; zeit <= endeTag; zeit = new Date(zeit.getTime() + Config.slotMinimalMinutes)) {\r\n    const tagesZeit = zeit.toTimeString().substr(0, 5)\r\n    timetable[tagesZeit] = [];\r\n    for (let i = 1; i <= Config.anzahlPlaetze; i++) {\r\n      timetable[tagesZeit].push(i);\r\n    }\r\n  }\r\n\r\n  // Jetzt belegte Zeiten mit \"X\" belegen\r\n  // Wir haben 2 Objekte: \r\n  // 1. Wir iterieren über die Belegungen, sortiert nach Anfangszeit und Platz. \r\n  // 2. timetable, auf das wir direkt über die Zeit zugreifen\r\n  // console.log(belegungen)\r\n  for (let bKey in belegungen) {\r\n    let sa = new Date(belegungen[bKey].starts_at);\r\n    let ea = new Date(belegungen[bKey].ends_at);\r\n    // console.log(belegungen[bKey].starts_at + \", \" + belegungen[bKey].ends_at)\r\n    let anzahlSlots = (ea - sa) / Config.slotMinimalMinutes;\r\n    for (let i = 0; i < anzahlSlots; i++) {\r\n      let saTmp = new Date(sa.getTime() + (i * Config.slotMinimalMinutes));\r\n      let cTmp = Number(belegungen[bKey].court) - 1;\r\n      timetable[saTmp.toTimeString().substr(0, 5)][cTmp] = Config.platzBelegt;\r\n      // console.log(saTmp, timetable[saTmp][cTmp], ', court: ', cTmp)\r\n    }\r\n  }\r\n  return timetable;\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n///////////////////////// KANN DAS FUNKTIONIEREN??? //////////////////////\r\n// const Model = () => {\r\n//   let liste = {};\r\n//   registerListener(callback) {\r\n//     liste                               ;\r\n//   }\r\n//   unregisterListener(callback) {\r\n//     callback.setTafelDatum(this.tafelDatum)///////////////////////////////////\r\n//   }\r\n// }\r\n\r\n// Auswahl über Mausposition???\r\n// handleClick (e) {\r\n\r\n//   var offset = $(this).offset();\r\n//   var hoehe = $(this).height(); \r\n//   var relativeX = (e.pageX - offset.left);\r\n//   var relativeY = (e.pageY - offset.top);\r\n//   var halbeStdHoehe = (hoehe - 30)/13;     \r\n//   var std = relativeY/halbeStdHoehe;\r\n//   var minuten = Math.round((std - Math.floor(std))) * 30;\r\n//   std = Math.floor(std) + 7;\r\n\r\n//   alert(\"X: \" + relativeX + \"  Y: \" + relativeY + \" Zeit: \" + std + \":\" + minuten + \" h, Höhe: \" + hoehe);\r\n\r\n// };\r\n","import React, { Component } from 'react';\r\nimport classNames from 'classnames';\r\nimport { Link } from 'react-router-dom';\r\nimport { spielerzusatz } from './functions';\r\nimport Config, { permissions } from './Defaults';\r\n\r\n\r\n// Alle Belegungen an diesem Tag für einen Platz\r\n\r\nclass Platz extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = { \r\n      courtData: [],\r\n      isLoading : false,\r\n      error : false,\r\n      width: window.innerWidth,\r\n      zumBelegungstag: false,\r\n    };\r\n  }\r\n  \r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.day !== prevProps.day) {\r\n      const {court, day, permissions} = this.props;\r\n      this.fetchPlatz(court, day, permissions);\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    const { court, day, permissions } = this.props;\r\n    this.fetchPlatz(court, day, permissions);\r\n  }\r\n  \r\n  fetchPlatz(court, day, uPermissions) {\r\n    const userIsAllowed = ((permissions.MANNSCHAFTSFUEHRER & uPermissions) > 0);\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/platz.php?op=ra&p=\" + court + \"&ds=\" + day + \"&de=\" + day;\r\n    window.addEventListener('resize', this.handleWindowSizeChange);\r\n    \r\n    this.setState({isLoading : true});\r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then(result => {\r\n      if (result.ok) {\r\n        if (result.redirected) {\r\n          // console.log(\"Platz.js/Checkuser: Authentifizierungsfehler\")\r\n          window.location.href = result.url\r\n        }\r\n        return result.json();\r\n        } else {\r\n          // In diesem Fall haben wir einen neuen, noch unbebuchten Tag\r\n          this.setState({isLoading : false});\r\n        }\r\n      })\r\n    .then (result => {\r\n      let courtData = result.records.map ( r => {\r\n        let k = r.id\r\n        let spieler\r\n        let cn = computeBelClasses (r.starts_at, r.ends_at, r.booking_type);\r\n        spieler = formatSpieler(r, this.props.platzWide)\r\n\r\n        if ( !userIsAllowed && (r.booking_type.match(/(ts-training)|(ts-punktspiele)|(ts-nichtreservierbar)|(ts-veranstaltung)/ig)))\r\n        {\r\n          return ( \r\n            <div key={k} className={cn}>\r\n              <strong>{r.starts_at.substring(11,16)}</strong> {spieler} \r\n              <div> {r.comment} </div>\r\n            </div>\r\n          )\r\n        } else {\r\n          return ( \r\n            <Link key={k} className={cn} to={{ pathname: '/intern/tafel/belegung', state: {c: court, i: r.id, d: day, op: 'update'} }}>\r\n              <strong>{r.starts_at.substring(11,16)}</strong> {spieler}\r\n              <div> {r.comment} </div>\r\n            </Link>\r\n          )\r\n        }\r\n      })\r\n      this.setState({courtData: courtData});\r\n      this.setState({isLoading : false});\r\n    })\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.handleWindowSizeChange);\r\n  }\r\n\r\n  handleWindowSizeChange = () => {\r\n    // this.setState({ width: window.innerWidth });\r\n    this.setState({ zumBelegungstag: true });\r\n  };\r\n  \r\n  render() {\r\n    return this.state.courtData;\r\n  }\r\n}\r\n\r\n// Spielernamen bilden\r\nconst formatSpieler = (r, platzWide) =>\r\n{\r\n  let spieler = []\r\n  \r\n  // Vorname und Name verketten. Vorname bei wenig Platz abkürzen\r\n  spieler[0] = (r.p1vn ? (platzWide ? r.p1vn : r.p1vn.charAt(0) + '.') + ' ' + r.p1nn : (r.p1nn) ? r.p1nn : '') + spielerzusatz(r.p1geb, r.schnupper1)\r\n  spieler[1] = (r.p2vn ? (platzWide ? r.p2vn : r.p2vn.charAt(0) + '.') + ' ' + r.p2nn : (r.p2nn) ? r.p2nn : '') + spielerzusatz(r.p2geb, r.schnupper2)\r\n  spieler[2] = (r.p3vn ? (platzWide ? r.p3vn : r.p3vn.charAt(0) + '.') + ' ' + r.p3nn : (r.p3nn) ? r.p3nn : '') + spielerzusatz(r.p3geb, r.schnupper3)\r\n  spieler[3] = (r.p4vn ? (platzWide ? r.p4vn : r.p4vn.charAt(0) + '.') + ' ' + r.p4nn : (r.p4nn) ? r.p4nn : '') + spielerzusatz(r.p4geb, r.schnupper4)\r\n  \r\n  // Führende Punkt und Whitespace entfernen, falls es sowas gibt\r\n  spieler = spieler.map( s => s.replace(new RegExp(/^[\\.\\s]+/g), '') )\r\n  \r\n  spieler = spieler.join(', ')\r\n\r\n  // ... und trailing Kommas, Whitespaces entfernen\r\n  spieler = spieler.replace(new RegExp(/[,\\s]*$/g), '')\r\n\r\n  return spieler\r\n\r\n}\r\n\r\n// CSS-Klassen bilden für die Positionierung und Höhe einer Belegung auf der Tafel\r\nconst computeBelClasses = (s, e, bookingType) =>\r\n{\r\n  // Dauer berechnen, also z. B. '2019-05-02 16:00:00' - '2019-05-02 14:00:00' = 120\r\n  const dauer = (Number(e.substring(11,13))*60 + Number(e.substring(14,16))) - (Number(s.substring(11,13))*60 + Number(s.substring(14,16)));\r\n  const bt = bookingType\r\n  let cn = classNames(\r\n    'D-' + dauer,\r\n    'ts', \r\n    'T-' + s.substring(11, 16).replace(':', '-'),\r\n    bt\r\n    );\r\n  return cn;\r\n}\r\n\r\nexport default Platz;\r\n","import React, { Component } from 'react';\r\nimport ScrollMenu from 'react-horizontal-scrolling-menu';\r\nimport {getDateArray} from \"./functions\";\r\nimport Config from './Defaults';\r\n\r\n\r\n// Das ist das Array mit den Tagen\r\nlet list = [];\r\n\r\n// One item component\r\n// selected prop will be passed\r\nconst MenuItem = ({ text, selected }) => {\r\n  return (\r\n    <div className={`dateBtn ${selected ? 'aktiv' : ''}`}>\r\n      {text}\r\n    </div>\r\n  );\r\n};\r\n\r\n// All items component\r\n// Important! add unique key\r\nexport const Menu = (list) => list.map(el => {\r\n  const { name, text } = el;\r\n\r\n  return (\r\n    <MenuItem\r\n      text={text}\r\n      key={name}\r\n    />\r\n  );\r\n});\r\n\r\nconst Arrow = ({ text, className }) => {\r\n  return (\r\n    <div\r\n      // className={className}\r\n      className=\"dateBtn arrowPicker\"\r\n    >{text}</div>\r\n  );\r\n};\r\n\r\nconst ArrowLeft = Arrow({ text: '<', className: 'arrow-prev' });\r\nconst ArrowRight = Arrow({ text: '>', className: 'arrow-next' });\r\n\r\nclass DayPicker extends Component {\r\n  state = {\r\n    selected: 0\r\n  };\r\n\r\n  componentWillMount() {\r\n    const {startswith, day} = this.props;\r\n    let end = new Date(day);\r\n    end.setDate(end.getDate() + Config.daypickerMaxDays);\r\n    list = getDateArray(startswith, end);\r\n    this.setState({selected: day});\r\n  }\r\n\r\n  onSelect = key => {\r\n    this.setState({ selected: key }, () => this.props.onClickHandler(key));\r\n  }\r\n  render() {\r\n    const { selected } = this.state;\r\n    // Create menu from items\r\n    const menu = Menu(list, selected);\r\n\r\n    return (\r\n      <div className=\"App\">\r\n        <ScrollMenu\r\n          data={menu}\r\n          arrowLeft={ArrowLeft}\r\n          arrowRight={ArrowRight}\r\n          selected={selected}\r\n          onSelect={this.onSelect}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n\r\n}\r\n\r\nexport default DayPicker;\r\n  \r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport Platz from \"./Platz\";\r\nimport DayPicker from \"./DayPicker\";\r\nimport \"./tafel.css\";\r\nimport SwipeableViews from 'react-swipeable-views';\r\nimport config from './Defaults';\r\nimport {formatDate, isValidDate} from \"./functions\";\r\nimport { Link } from 'react-router-dom';\r\n\r\n// Layout eines Tages\r\n\r\nclass Belegungstag extends Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      width: window.innerWidth,\r\n      day: '',\r\n      dayDate: '',\r\n    };\r\n  }    \r\n  componentWillMount() {\r\n    window.addEventListener('resize', this.handleWindowSizeChange);\r\n    let dayDate = this.props.match.params.day;\r\n    if ( ! isValidDate(new Date(dayDate)) ) {\r\n      dayDate = new Date();\r\n    } else {\r\n      dayDate = new Date(dayDate);\r\n    }\r\n    this.setState({ dayDate: dayDate, day: formatDate(dayDate) });\r\n    // let day = \"2019-05-02\";\r\n    this.setDay = this.setDay.bind(this);\r\n  }\r\n\r\n  // make sure to remove the listener\r\n  // when the component is not mounted anymore\r\n  componentWillUnmount() {\r\n    window.removeEventListener('resize', this.handleWindowSizeChange);\r\n  }\r\n\r\n  handleWindowSizeChange = () => {\r\n    this.setState({ width: window.innerWidth });\r\n  };\r\n\r\n  setDay(dString) {\r\n    const d = new Date(dString);\r\n    this.setState({dayDate: d, day: formatDate(d)});\r\n  }\r\n    \r\n  render() {\r\n    const { width } = this.state;\r\n    let firstDaypickerDay = new Date();\r\n\r\n    // //### TESTDATEN ###################\r\n    // firstDaypickerDay = new Date(2020, 4, 22);\r\n    \r\n    const isMobile = (width <= config.smartphoneWidth);\r\n    if (isMobile) {\r\n      firstDaypickerDay.setDate(firstDaypickerDay.getDate() - config.daypickerDaysBeforeToday);\r\n      const courtDiv = config.platzArray.map( (court) => {\r\n        return (\r\n          <div key={court} id={\"platz\" + court}>\r\n            <table className=\"table\">\r\n              <tbody>\r\n                <tr className=\"platzDim\">\r\n                  <td className=\"zeitleisteCol\"><Zeitleiste /></td>\r\n                  <td className=\"platz\">\r\n                    <div className=\"platznummer\">\r\n                      <span className=\"platzziffer\">{court}</span> \r\n                      <Link to={{pathname: '/intern/tafel/belegung', state: {c: court, d: this.state.day, op: 'new'} }}><img  className=\"neuBtn p-1 rounded-circle\" src=\"images/add.png\" alt=\"Neue Belegung\" /></Link> \r\n                    </div>\r\n                    <div>\r\n                      <Platz court={court} day={this.state.day} permissions={this.props.permissions} platzWide={true} />\r\n                    </div>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n          </div>\r\n        )\r\n      })\r\n      return (\r\n        <div>\r\n          <DayPicker startswith={firstDaypickerDay} day={this.state.day} onClickHandler={this.setDay} />\r\n          <SwipeableViews>\r\n            {courtDiv}\r\n          </SwipeableViews>\r\n          <Legende />\r\n        </div>\r\n      )\r\n    } else {\r\n      firstDaypickerDay.setDate(firstDaypickerDay.getDate() - config.daypickerDaysBeforeTodayWide);\r\n      const courtDiv = config.platzArray.map( (court) => {\r\n        return (<td key={court} id={\"platz\" + court} className=\"platz\">\r\n          <div>\r\n            <div className=\"platznummer\">\r\n              <span className=\"platzziffer rounded-circle\">{court}</span> \r\n              <Link to={{pathname: '/intern/tafel/belegung', state: {c: court, d: this.state.day, op: 'new'} }}><img  className=\"neuBtn p-1 rounded-circle\" src=\"images/add.png\" alt=\"Neue Belegung\" /></Link> \r\n            </div>\r\n            <div>            \r\n              <Platz court={court} day={this.state.day} permissions={this.props.permissions} platzWide={false} />\r\n              </div>\r\n            </div>\r\n          </td>\r\n        )\r\n      })\r\n      return (\r\n        <div>\r\n          <DayPicker startswith={firstDaypickerDay} day={this.state.day} onClickHandler={this.setDay} />\r\n          <table className=\"table\">\r\n            <tbody>\r\n              <tr className=\"platzDim\">\r\n                <td className=\"zeitleisteCol\"><Zeitleiste /> </td>\r\n                {courtDiv}\r\n              </tr>\r\n            </tbody>\r\n          </table>\r\n          <Legende />\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n}\r\n\r\nconst Zeitleiste = () => {\r\n  let zeit = [];\r\n  for (let s = config.dailyStartTime; s <= config.dailyEndTime; s++) {\r\n    for (let m = 0; m < 60; m=m+60) {\r\n      zeit.push (s.toString().padStart(2, '0') + ':' + m.toString().padStart(2, '0'));\r\n    }\r\n  } \r\n  return (\r\n    <div className=\"zeitleiste\">\r\n      {\r\n        zeit.map((e, index) => \r\n          <React.Fragment key={index}>\r\n            <div className=\"stunde\"><div className=\"stundetext\">{e}</div></div>\r\n            <div className=\"viertelstunde\"></div>\r\n            <div className=\"viertelstunde\"></div>\r\n            <div className=\"viertelstunde\"></div>\r\n          </React.Fragment>\r\n        )\r\n      }\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Legende = () => {\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"row l-einzeldoppel p-0 pl-1 m-1\">Einzel/Doppel</div>\r\n      <div className=\"row l-turnier p-0 pl-1 m-1\">Turnier</div>\r\n      <div className=\"row l-veranstaltung p-0 pl-1 m-1\">Veranstaltung</div>\r\n      <div className=\"row l-punktspiele p-0 pl-1 m-1\">Punktspiele</div>\r\n      <div className=\"row l-training p-0 pl-1 m-1\">Training</div>\r\n      {/* <div className=\"row l-nichtreservierbar p-0 pl-1 m-1\">Frei verfügbar / Anderes</div> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Belegungstag;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","//\r\nimport React, { Component } from 'react';\r\nimport Config, { messages as Messages, permissions as Permissions } from './Defaults';\r\nimport { Redirect } from 'react-router';\r\nimport { spielerzusatz, servertimeNow, jugendlicher as isJugendlicher, getTimetable } from './functions';\r\nimport _ from 'lodash';\r\nimport Holidays from 'date-holidays';\r\n\r\nclass BelForm extends Component {\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.handleSave = this.handleSave.bind(this);\r\n    this.handleDelete = this.handleDelete.bind(this);\r\n\r\n    const { r } = props;\r\n    // Daten für Datum, Start und Ende extrahieren\r\n    let [sd, st] = r.starts_at.split(' ')\r\n    let scd = new Date(sd)\r\n    let ssd = servertimeNow()\r\n    scd.setHours(0, 0, 0, 0)\r\n    ssd.setHours(0, 0, 0, 0)\r\n\r\n    const dateIsToday = (scd.valueOf() === ssd.valueOf())\r\n\r\n    // Initialer Wert für neue Buchungen. Wenn Einzel/Doppel erlaubt/nicht erlaubt sind, hier ändern\r\n    const bookingType = (r.booking_type === '') ? (dateIsToday ? 'ts-einzel' : 'ts-turnier') : r.booking_type\r\n    const userIstSpieler = [Number([r.p1id]),Number([r.p2id]),Number([r.p3id]),Number([r.p4id])].includes(Number(this.props.userId)) \r\n    const deleteActive =  userIstSpieler || (Permissions.VORSTAND === (Permissions.VORSTAND & this.props.permissions))\r\n      \r\n    let [ed, et] = r.ends_at.split(' ');\r\n    let sdA = sd.split('-');\r\n    this.state = {\r\n      r: r,\r\n      spieltag: sdA[2] + '.' + sdA[1] + '.' + sdA[0],\r\n      startsAtDate: sd,\r\n      endsAtDate: ed,\r\n      startsAt: st.substring(0, 5),\r\n      endsAt: et.substring(0, 5),\r\n      bookingType: bookingType,\r\n      comment: (typeof r.comment === \"undefined\") ? \"\" : r.comment,\r\n      p1: (r.p1id === 0 ? Number(this.props.userId) :  Number(r.p1id)),\r\n      p2: Number(r.p2id),\r\n      p3: Number(r.p3id),\r\n      p4: Number(r.p4id),\r\n      p1Schn: r.schnupper1,\r\n      p2Schn: r.schnupper2,\r\n      p3Schn: r.schnupper3,\r\n      p4Schn: r.schnupper4,\r\n      spieler: [],\r\n      belegungenAbJetzt: [],\r\n      court: (typeof r.court === \"undefined\") ? \"--\" : r.court,\r\n      zurTafel: false,\r\n      saveActive: false,\r\n      deleteActive: deleteActive,\r\n      endeActive: false,\r\n      admin: false,\r\n      dateIsToday: dateIsToday,\r\n      overbooked: false,\r\n      jugend: false,\r\n      nichtVollBerechtigte: false,\r\n      timetable: [],\r\n      isLoading1: true,\r\n      isLoading2: true,\r\n      courtBelegt: [],\r\n    };\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n    // Alle Spieler für die Select-Auswahl laden    \r\n    let url = Config.protokoll + Config.hostname + \"/intern/api/spieler.php\";\r\n    this.setState({ isLoading1: true });\r\n    fetch(url, { credentials: 'same-origin' })\r\n      .then(result => {\r\n        if (result.ok) {\r\n          // console.log(result);\r\n          return result.json();\r\n        } else {\r\n          throw new Error('Fehler beim Laden der Spielerdaten');\r\n        }\r\n      })\r\n      .then(result => {\r\n        let spieler = result.records;\r\n        // console.log(spieler);\r\n        this.setState({ spieler: spieler, isLoading1: false })\r\n      })\r\n      .catch(error => this.setState({ error, isLoading1: false }));\r\n\r\n    // Alle Belegungen des Tages für die Belegungsprüfung laden\r\n    url = Config.protokoll + Config.hostname + \"/intern/api/belegungenabjetzt.php\";\r\n    this.setState({ isLoading2: true });\r\n    fetch(url, { credentials: 'same-origin' })\r\n      .then(result => {\r\n        if (result.ok) {\r\n          // console.log(result);\r\n          return result.json();\r\n        } else {\r\n          throw new Error('Fehler beim Laden der Belegungsdaten');\r\n        }\r\n      })\r\n      .then(result => {\r\n        // console.log(result.records)\r\n        // this.setState({ timetable: getBookableTimes(getTimetable(result.records)), isLoading2: false }); \r\n        this.setState({ timetable: getTimetable(result.records), isLoading2: false });\r\n\r\n      })\r\n      .catch(error => this.setState({ error, isLoading2: false }));\r\n\r\n  }\r\n\r\n  render() {\r\n    const { isLoading1, isLoading2 } = this.state;\r\n    if (isLoading1 || isLoading2) {\r\n      return <p>Loading...</p>\r\n    }\r\n    if (this.state.zurTafel === true) {\r\n      return <Redirect to={{ pathname: \"/intern/tafel/\", state: this.state.startsAtDate }} />\r\n    }\r\n    const condMF = (Permissions.MANNSCHAFTSFUEHRER === (Permissions.MANNSCHAFTSFUEHRER & this.props.permissions))\r\n    return (\r\n      <div>\r\n        <h1>Spieltag: {this.state.spieltag}</h1>\r\n        <form className=\"form-inline\">\r\n          <fieldset className=\"fields\">\r\n            <div><strong>Buchungstyp</strong></div>\r\n            {!this.state.dateIsToday &&\r\n              <div>Einzel-/Doppel-Buchung nur am aktuellen Tag möglich</div>\r\n            }\r\n            <select id=\"bookingType\" className=\"form-control\" onChange={this.handleChange} value={this.state.bookingType}>\r\n              <option disabled={!this.state.dateIsToday} value=\"ts-einzel\">Einzel</option>\r\n              <option disabled={!this.state.dateIsToday} value=\"ts-doppel\">Doppel</option>\r\n              <option value=\"ts-turnier\">Turnier</option>\r\n              <option disabled={!condMF} value=\"ts-veranstaltung\">Veranstaltung</option>\r\n              <option disabled={!condMF} value=\"ts-training\">Training</option>\r\n              <option disabled={!condMF} value=\"ts-punktspiele\">Punktspiele</option>\r\n            </select>\r\n            <div><strong>Start</strong> <span id=\"startsAtMsg\" className={this.state.startsAtMsgClass}>{this.state.startsAtMsgTxt}</span></div>\r\n            <div className=\"form-group\">\r\n              <div>\r\n                <select id=\"startsAt\" className={'form-control ' + this.state.startsAtMsgClass} onChange={this.handleChange} value={this.state.startsAt}>\r\n                  {\r\n                    Object.keys(this.state.timetable).map(ttl => {\r\n\r\n                      return (\r\n                        <option key={ttl} value={ttl}>\r\n                          {ttl}h \r\n                          &nbsp; {this.state.timetable[ttl][0]} \r\n                          &nbsp; {this.state.timetable[ttl][1]} \r\n                          &nbsp; {this.state.timetable[ttl][2]} \r\n                          &nbsp; {this.state.timetable[ttl][3]} \r\n                          &nbsp; {this.state.timetable[ttl][4]} \r\n                          &nbsp; {this.state.timetable[ttl][5]}\r\n                        </option>\r\n                      )\r\n                    })\r\n                  }\r\n                </select>\r\n              </div>\r\n            </div>\r\n            <div><strong>Platz</strong></div>\r\n              <div className=\"form-group\">\r\n                <select id=\"court\" className=\"form-control\" onChange={this.handleChange} value={this.state.court}>\r\n                  <option value=\"--\">--</option>\r\n                  <option disabled={this.state.courtBelegt[0]} value=\"1\">1</option>\r\n                  <option disabled={this.state.courtBelegt[1]} value=\"2\">2</option>\r\n                  <option disabled={this.state.courtBelegt[2]} value=\"3\">3</option>\r\n                  <option disabled={this.state.courtBelegt[3]} value=\"4\">4</option>\r\n                  <option disabled={this.state.courtBelegt[4]} value=\"5\">5</option>\r\n                  <option disabled={this.state.courtBelegt[5]} value=\"6\">6</option>\r\n                </select>\r\n              </div>\r\n          <div><strong>Ende</strong></div>\r\n             <div className=\"form-group\">\r\n             <div>\r\n                <select id=\"endsAt\" className={'form-control ' + this.state.startsAtMsgClass} onChange={this.handleChange} value={this.state.endsAt}>\r\n                  {\r\n                    Object.keys(this.state.timetable).map(ttl => {\r\n                      return (\r\n                        <option disabled={!this.state.endeActive} key={ttl} value={ttl}>\r\n                          {ttl}h \r\n                          {/* &nbsp; {this.state.timetable[ttl][0]} \r\n                          &nbsp; {this.state.timetable[ttl][1]} \r\n                          &nbsp; {this.state.timetable[ttl][2]} \r\n                          &nbsp; {this.state.timetable[ttl][3]} \r\n                          &nbsp; {this.state.timetable[ttl][4]} \r\n                          &nbsp; {this.state.timetable[ttl][5]} */}\r\n                        </option>\r\n                      )\r\n                    })\r\n                  }\r\n                </select>\r\n              </div>\r\n\r\n            </div>\r\n            <div><strong>{(this.state.bookingType.match(/(ts-einzel)|(ts-doppel)|(ts-turnier)/ig)) ? 'Spieler' : 'Verantwortlicher'}</strong> <span id=\"p1Msg\" className={this.state.p1MsgClass}>{this.state.p1MsgTxt}</span></div>\r\n            <div className=\"form-row\">\r\n              <select id=\"p1\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p1}>\r\n                <option value=\"0\">- Bitte auswählen -</option>\r\n                {this.state.spieler.map(r => {\r\n                  return (\r\n                    <option key={'p1' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum, r.schnupper)}</option>\r\n                  )\r\n                })}\r\n              </select>\r\n              {(this.state.bookingType.match(/(ts-einzel)|(ts-turnier)|(ts-doppel)/ig)) ?\r\n                <select id=\"p2\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p2}>\r\n                  <option value=\"0\">- Bitte auswählen -</option>\r\n                  {this.state.spieler.map(r => {\r\n                    return (\r\n                      <option key={'p2' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum, r.schnupper)}</option>\r\n                    )\r\n                  })}\r\n                </select>\r\n                : ''\r\n              }\r\n            </div>\r\n            <div className=\"form-row\">\r\n              {(this.state.bookingType === \"ts-doppel\") ?\r\n                <select id=\"p3\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p3}>\r\n                  <option value=\"0\">- Bitte auswählen -</option>\r\n                  {this.state.spieler.map(r => {\r\n                    return (\r\n                      <option key={'p3' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum, r.schnupper)}</option>\r\n                    )\r\n                  })}\r\n                </select>\r\n                : ''\r\n              }\r\n              {(this.state.bookingType === \"ts-doppel\") ?\r\n                <select id=\"p4\" className={'form-control ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.p4}>\r\n                  <option value=\"0\">- Bitte auswählen -</option>\r\n                  {this.state.spieler.map(r => {\r\n                    return (\r\n                      <option key={'p4' + r.id} value={r.id}>{r.spieler + spielerzusatz(r.geburtsdatum, r.schnupper)}</option>\r\n                    )\r\n                  })}\r\n                </select>\r\n                : ''\r\n              }\r\n            </div>\r\n\r\n            <div><strong>Bemerkung</strong> <span id=\"commentMsg\" className={this.state.commentMsgClass}>{this.state.commentMsgTxt}</span></div>\r\n            <div className=\"form-group\">\r\n              <input type=\"text\" id=\"comment\" className={'form-control w-100 ' + this.state.p1MsgFormCtrl} onChange={this.handleChange} value={this.state.comment} placeholder=\"Spielergebnis, Gastname, ...\" />\r\n            </div>\r\n\r\n            <button type=\"submit\" onClick={e => { this.handleSave(e) }} className=\"btn btn-primary m-1\" disabled={!this.state.saveActive}>Speichern</button>\r\n            <button type=\"submit\" onClick={e => { this.handleDelete(e) }} className=\"btn btn-primary m-2\" disabled={!this.state.deleteActive}>Löschen</button>\r\n          </fieldset>\r\n        </form>\r\n      </div >\r\n    )\r\n  }\r\n\r\n  handleSave(e) {\r\n    e.preventDefault();\r\n    // console.log(\"SAVE FORM DATA NOW!\");\r\n    const s = {}\r\n    // Meldungen zurücksetzen\r\n    s.startsAtMsgTxt = ''\r\n    s.startsAtMsgClass = ''\r\n    s.saveActive = true\r\n    s.p1MsgFormCtrl = ''\r\n\r\n    let parameters =\r\n      '?op=cu'\r\n      + '&rid=' + this.state.r.id\r\n      + '&ds=' + this.state.startsAtDate + ' ' + this.state.startsAt\r\n      + '&de=' + this.state.endsAtDate + ' ' + this.state.endsAt\r\n      + '&uid=' + this.props.userId\r\n      + '&p1=' + this.state.p1\r\n      + '&p2=' + this.state.p2\r\n      + '&p3=' + this.state.p3\r\n      + '&p4=' + this.state.p4\r\n      + '&c=' + this.state.court\r\n      + '&t=' + this.state.bookingType\r\n      + '&cmt=' + this.state.comment\r\n      + '&pr=0'\r\n      ;\r\n    let url = Config.protokoll + Config.hostname\r\n      + '/intern/api/platz.php'\r\n      + parameters;\r\n    // console.log(url);\r\n    fetch(url, { credentials: 'same-origin' })\r\n      .then(result => {\r\n        if (result.ok) {\r\n          return result.json()\r\n        } else {\r\n          throw new Error('Fehler beim Erzeugen/Updaten der Belegung' + this.state.r.id);\r\n        }\r\n      })\r\n      .then(result => {\r\n        let rc = result.records[0].returncode;\r\n        if (rc === 'ok') {\r\n          // Logging der Buchung\r\n          let logurl =\r\n            Config.protokoll\r\n            + Config.hostname\r\n            + Config.buchungenlog\r\n            + parameters;\r\n          fetch(logurl, { credentials: 'same-origin' }); // Wenn Logging fehlschlagen sollte, dann verzichten wir eben darauf\r\n          this.setState({ zurTafel: true })\r\n        } else if (rc === 'bereits belegt') {\r\n          // Fehlermeldung\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.platzbelegt;\r\n        } else {\r\n          // User nicht authentifiziert oder etwas stimmt generell nicht\r\n          window.location.href = Config.loginPage\r\n        }\r\n        // Alle Ergebnisse in den State\r\n        this.setState(s)\r\n      })\r\n  }\r\n\r\n  handleDelete(e) {\r\n\r\n    const sdStr = this.state.startsAtDate + 'T' + this.state.startsAt + \"Z\";\r\n    const sd = new Date(sdStr);\r\n    const jetzt = new Date();\r\n\r\n    e.preventDefault();\r\n\r\n    if (sd >= jetzt || (Permissions.VORSTAND & this.props.permissions)) {\r\n      let parameters =\r\n        '?op=d'\r\n        + '&rid=' + this.state.r.id\r\n        + '&uid=' + this.props.userId;\r\n      let url =\r\n        Config.protokoll\r\n        + Config.hostname\r\n        + Config.platzbuchungen\r\n        + parameters;\r\n      fetch(url, { credentials: 'same-origin' })\r\n        .then(result => {\r\n          if (result.ok) {\r\n            // Logging der Buchung\r\n            let logurl = Config.protokoll + Config.hostname\r\n              + Config.buchungenlog\r\n              + parameters;\r\n            fetch(logurl, { credentials: 'same-origin' });\r\n            this.setState({ zurTafel: true });\r\n          }\r\n        })\r\n    } else {\r\n      this.setState({ zurTafel: true });\r\n    }\r\n    e.preventDefault();\r\n\r\n  }\r\n\r\n  handleChange(e) {\r\n    e.preventDefault();\r\n\r\n    this.setState({ [e.target.id]: e.target.value }, () => {\r\n      const s = {}\r\n\r\n      // Meldungen zurücksetzen\r\n      s.p1MsgTxt = ''\r\n      s.p1MsgClass = ''\r\n      s.startsAtMsgTxt = ''\r\n      s.startsAtMsgClass = ''\r\n      s.commentMsgTxt = ''\r\n      s.commentMsgClass = ''\r\n\r\n      s.saveActive = true\r\n      s.deleteActive = true\r\n      s.endeActive = false\r\n      s.p1MsgFormCtrl = ''\r\n      s.overbooked = false\r\n      s.startsAt = this.state.startsAt\r\n\r\n      // Alle nicht buchbaren Zeiten der Timetable deaktivieren\r\n      // s.timetable = getBookableTimes(this.state.timetable)\r\n      s.timetable = this.state.timetable\r\n      // Belegte Plätze im Select disablen\r\n      s.courtBelegt = s.timetable[s.startsAt].map( c => c === Config.platzBelegt )\r\n\r\n      // Endezeit errechnen\r\n      let endsAtViertel = this.state.startsAt.substring(3, 5)\r\n      let endsAtStd = this.state.endsAt.substring(0, 2)\r\n      if (this.state.bookingType === \"ts-einzel\") {\r\n        endsAtStd = (Number(this.state.startsAt.substring(0, 2)) + 1).toLocaleString('de-DE', {minimumIntegerDigits: 2, useGrouping: false})\r\n      } \r\n      else if (this.state.bookingType.match(/(ts-turnier)|(ts-doppel)/ig)) {\r\n        endsAtStd = (Number(this.state.startsAt.substring(0, 2)) + 2).toLocaleString('de-DE', {minimumIntegerDigits: 2, useGrouping: false})\r\n      }\r\n      s.endsAt = endsAtStd + \":\" + endsAtViertel\r\n\r\n      // Bedingungen\r\n      let condEinGast = false\r\n      let condEinMitglied = false\r\n      let condEinSpielerErwVoll = false\r\n      let condDoppelteSpieler = false\r\n      let condUserIstSpieler = false\r\n\r\n      const datestring = this.state.startsAtDate + 'T' + this.state.startsAt + \"Z\"\r\n      const sd = new Date(datestring)\r\n      const hd = new Holidays()\r\n      hd.init('DE', 'BY')\r\n      const condFeiertag = hd.isHoliday(sd) ? true : false\r\n      const condSonnOderFeiertag = (condFeiertag || (sd.getDay() === 0) || (sd.getDay() === 6))\r\n      // const condPlatz6 = (Number(this.state.court) === 6)\r\n\r\n      // Validierung\r\n      // -----------\r\n      // Es wird validiert, ob Erwachsene, Schnuppermitglieder und Jugendliche \r\n      // wirklich spielberechtigt sind und ob die eingetragenen Zeiten stimmen\r\n\r\n      // Buchungszeiten in Minuten\r\n      const start = Number(s.startsAt.substring(0, 2)) * 60 + Number(s.startsAt.substring(3, 5))\r\n      let ende = Number(s.endsAt.substring(0, 2)) * 60 + Number(s.endsAt.substring(3, 5))\r\n\r\n      const pKeys = [Number(this.state.p1), Number(this.state.p2), Number(this.state.p3), Number(this.state.p4)]\r\n\r\n      // Haben wir einen GAST oder ein Mitglied ohne Namen?\r\n      // Ist der aktuelle User auch Spieler?\r\n      pKeys.forEach((p) => {\r\n        if (p != null) // \r\n        {\r\n          if (p === Number(this.props.userId)) {\r\n            condUserIstSpieler = true\r\n          }    if (p === Config.gastId) {\r\n            condEinGast = true\r\n          }    if (p === Config.mitgliedId) {\r\n            condEinMitglied = true\r\n          }\r\n        }\r\n      })\r\n\r\n      // Ist ein erwachsenes Vollmitglied dabei?\r\n      // Welche Geburtsdaten haben die Spieler?\r\n      pKeys.map(k => {\r\n        if (k != null) // \r\n        {\r\n          if (!((isJugendlicher(k['geburtsdatum']) || k['schnupper']) === \"0\")) {\r\n            condEinSpielerErwVoll = true\r\n          }\r\n          return k['geburtsdatum']\r\n        }\r\n        return undefined\r\n      })\r\n\r\n      let saveActiveMerker = true\r\n      // Message an der Spielzeit\r\n      // Formal müssen Spieler korrekt eingetragen sein\r\n      if (this.state.bookingType.match(/(ts-veranstaltung)|(ts-training)|(ts-nichtreservierbar)/ig)) {\r\n        // Ein Spieler muss eingetragen werden\r\n        if (Number(this.state.p1) === 0) {\r\n          [s.p1msgClass, s.saveActive, s.p1MsgTxt] = Messages.spieleranzahl\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        }\r\n        // Spieler 2 bis 4 werden \"gelöscht\"\r\n        s.p2 = s.p3 = s.p4 = 0\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n      if (this.state.bookingType.match(/(ts-turnier)|(ts-einzel)/ig)) {\r\n        // Zwei Spieler müssen eingetragen werden, beide nicht 0 und unterschiedlich\r\n        if (Number(this.state.p1) === 0 || Number(this.state.p2) === 0) {\r\n          [s.p1msgClass, s.saveActive, s.p1MsgTxt] = Messages.spieleranzahl;\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        } else if (this.state.p1 === this.state.p2) {\r\n          // Sind die Spieler doppelt?\r\n          condDoppelteSpieler = true;\r\n          [s.p1msgClass, s.saveActive, s.p1MsgTxt] = Messages.spieleranzahl;\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        }\r\n        // Spieler 3 bis 4 werden \"gelöscht\"\r\n        s.p3 = s.p4 = 0\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n      if (this.state.bookingType === \"ts-doppel\") {\r\n        // Vier Spieler\r\n        // Sind unter 4 Spielern welche doppelt?\r\n        condDoppelteSpieler = (_.uniq([this.state.p1, this.state.p2, this.state.p3, this.state.p4]).length < 4)\r\n\r\n        if (!condEinGast) {\r\n          if (condDoppelteSpieler || (Number(this.state.p3) === 0 || Number(this.state.p4) === 0)) {\r\n            [s.p1MsgClass, s.saveActive, s.p1MsgTxt] = Messages.spieleranzahl;\r\n            s.p1MsgFormCtrl = 'is-invalid'\r\n          }\r\n        }\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n      if (condEinGast || condEinMitglied) {\r\n        if (this.state.bookingType.match(/(ts-einzel)|(ts-doppel)/ig)) {\r\n          // Gäste und unbenannte Mitglieder müssen einen Kommentar/Namen vermerken. Mind. 2 Zeichen\r\n          if (this.state.comment.length < 2) {\r\n            [s.commentMsgClass, s.saveActive, s.commentMsgTxt] = condEinGast ? Messages.gast : Messages.mitglied\r\n            s.p1MsgFormCtrl = 'is-invalid'\r\n          }\r\n        }\r\n        else {\r\n          [s.p1MsgClass, s.saveActive, s.p1MsgTxt] = Messages.spieleranzahl;\r\n          s.p1MsgFormCtrl = 'is-invalid'\r\n        }\r\n      }\r\n      if (this.state.bookingType === \"ts-veranstaltung\") {\r\n        [s.commentMsgClass, s.saveActive, s.commentMsgTxt] = Messages.veranstaltung\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n\r\n      if (this.state.bookingType.match(/(ts-einzel)|(ts-doppel)/ig)) {\r\n        // Jetzt die Berechtigungen nach Alter, Status, Zeitpunkt. Message an der Spielzeit\r\n        // Diese Bedingungen sind von der Entscheidungstabelle (Dokumentation, Excel) abgeleitet\r\n        const dToday = new Date()\r\n        const dH = dToday.getHours()\r\n        const dM = dToday.getMinutes()\r\n        const minutesToday = (dH * 60 + dM)\r\n        if ((start - minutesToday) > Config.maxMinutesDistance && !condEinSpielerErwVoll && !condSonnOderFeiertag && ende > (Config.eveningTime / 100 * 60)) {\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.erwachsenenvorrecht;\r\n          s.overbooked = true\r\n        }\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n\r\n      // Auswertung Spielzeit formal, Message an der Spielzeit\r\n      if (start >= ende) {\r\n        [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.zeit;\r\n      }\r\n      else if (this.state.bookingType === \"ts-einzel\") {\r\n        if ((ende - start) > Config.singleTime) {\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.einzeldauer;\r\n        }\r\n      }\r\n      else if (this.state.bookingType === \"ts-doppel\") {\r\n        if ((ende - start) > Config.doubleTime) {\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.doppeldauer;\r\n        }\r\n      }\r\n      else if (this.state.bookingType === \"ts-turnier\") {\r\n        if ((ende - start) !== Config.turnierTime) {\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.turnierspieldauer;\r\n        } else {\r\n          [s.startsAtMsgClass, s.saveActive, s.startsAtMsgTxt] = Messages.turnier;\r\n        }\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n\r\n      // Berechtigung zum Speichern und Löschen und flexible Endezeit\r\n      if (this.state.bookingType.match(/(ts-einzel)|(ts-doppel)|(ts-turnier)/ig)) {\r\n        s.saveActive = condUserIstSpieler || (Permissions.VORSTAND === (Permissions.VORSTAND & this.props.permissions))\r\n        s.deleteActive = condUserIstSpieler || (Permissions.VORSTAND === (Permissions.VORSTAND & this.props.permissions))\r\n        s.endeActive = false\r\n      }\r\n      if (this.state.bookingType.match(/(ts-training)|(ts-punktspiele)|(ts-nichtreservierbar)|(ts-veranstaltung)/ig)) {\r\n        s.saveActive = (Permissions.MANNSCHAFTSFUEHRER === (Permissions.MANNSCHAFTSFUEHRER & this.props.permissions))\r\n        s.endeActive = true\r\n      }\r\n      if (this.state.bookingType.match(/(ts-training)|(ts-punktspiele)|(ts-nichtreservierbar)|(ts-veranstaltung)/ig)) {\r\n        s.deleteActive = (Permissions.MANNSCHAFTSFUEHRER === (Permissions.MANNSCHAFTSFUEHRER & this.props.permissions))\r\n      }\r\n      saveActiveMerker = (saveActiveMerker === true) ? s.saveActive : false\r\n\r\n      s.saveActive = saveActiveMerker\r\n\r\n      // Alle Ergebnisse in den State\r\n      this.setState(s)\r\n\r\n    });\r\n  }\r\n}\r\n\r\nexport default BelForm;\r\n\r\n\r\n\r\n","import React, { Component } from 'react';\r\nimport BelForm from './BelForm';\r\nimport { Link } from 'react-router-dom';\r\nimport Config from './Defaults';\r\n\r\nclass Belegung extends Component {\r\n  \r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = { \r\n      belegung : [],\r\n      isLoading : false,\r\n      error : false,\r\n    };\r\n  }  \r\n  componentWillMount() {\r\n    const {op} = this.props.location.state;\r\n    if (op === \"update\") {\r\n      const {i, d} = this.props.location.state;\r\n      this.updateBel(i, d);\r\n    } else if (op === \"new\") {\r\n      const {c, d} = this.props.location.state;\r\n      this.newBel(c, d);\r\n    }\r\n  }\r\n  \r\n  updateBel(id, day) {\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/platz.php?op=r&rid=\" + id;\r\n  \r\n    this.setState({isLoading : true});\r\n    \r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then(result => {\r\n      if (result.ok) {\r\n        if (result.redirected) {\r\n          console.log(\"BelDetails.js/Checkuser: Authentifizierungsfehler\")\r\n          window.location.href = result.url\r\n        }\r\n        return result.json();\r\n      } else {\r\n        throw new Error('Fehler beim Laden der Platzbuchungsdetails');\r\n      }\r\n    })\r\n    .then(result => {\r\n      let belegung = result.records.map( r => {\r\n        return (\r\n          <div key={r.id} className=\"p-2\">\r\n              <Link to={{ pathname: '/intern/tafel/', state: {d: day} }}><p className=\"btn btn-secondary\">Zurück</p></Link>\r\n              <BelForm r={r} userId={this.props.userId} permissions={this.props.permissions} />\r\n          </div>\r\n        )\r\n      })\r\n      this.setState({ belegung: belegung })\r\n    })\r\n    .catch(error => this.setState({ error, isLoading: false }));\r\n  }\r\n  \r\n  newBel(court, day)\r\n  {\r\n    let r = getEmptyBel(court, day);\r\n    let belegung = [\r\n        <div key={-1} className=\"p-2\">\r\n            <Link to={{ pathname: '/intern/tafel/', state: {d: day} }}><p className=\"btn btn-secondary\">Zurück</p></Link>\r\n            <BelForm r={r} userId={this.props.userId} permissions={this.props.permissions} />\r\n        </div>\r\n    ];\r\n    this.setState({ belegung: belegung })\r\n  }\r\n  \r\n  render() {\r\n    return (\r\n      <div>{this.state.belegung}</div>\r\n    );\r\n  }\r\n}\r\n\r\nfunction getEmptyBel(court, day) {\r\n  return {\r\n    id: 0,\r\n    user_id: 0,\r\n    p1: '',\r\n    p2: '',\r\n    p3: '',\r\n    p4: '',\r\n    court: court,\r\n    starts_at: day + ' 08:00:00',\r\n    ends_at: day + ' 09:00:00',\r\n    booking_type: '',\r\n    geburtsdatum: '0000-00-00',\r\n    p1id: 0,\r\n    p2id: 0,\r\n    p3id: 0,\r\n    p4id: 0,    \r\n  }\r\n}\r\nexport default Belegung;\r\n  ","import React, { Component } from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport Belegungstag from './Belegungstag';\r\nimport Belegung from './Belegung';\r\n\r\n\r\nclass Routing extends Component {\r\n    render() {\r\n      return (\r\n        <Switch>\r\n          <Route exact path='/intern/tafel/belegung' render={(props) => <Belegung {...props} userId={this.props.userId} permissions={this.props.permissions} />} />\r\n          <Route render={(props) => <Belegungstag {...props} userId={this.props.userId} permissions={this.props.permissions} />} />\r\n        </Switch>\r\n      )\r\n    }\r\n}\r\n\r\n\r\nexport default Routing;\r\n  ","import React, { Component } from 'react';\r\nimport Routing from \"./Routing\";\r\nimport Config from \"./Defaults\";\r\n\r\n\r\nclass App extends Component \r\n{\r\n  constructor(props) {\r\n    super(props);\r\n    \r\n    this.state = { \r\n      user: {},\r\n      isLoggedIn: false,\r\n      permissions: 0,\r\n      renderData: [],\r\n      isLoading1: true,\r\n      isLoading2: true,\r\n    };\r\n  }\r\n  \r\n  componentDidMount()\r\n  {\r\n    this.setState(() => ({ isLoading1: true , isLoading2: true}));\r\n    if (Config.prod) \r\n    { \r\n      this.checkUser();\r\n      this.setPermission();\r\n    } \r\n    else \r\n    {\r\n      // In der Testumgebung simulierter User\r\n      this.setState(() => ({user: Config.testuser, permissions: Config.testuser.permissions}));\r\n\r\n      // Re-rendering - sollte nur auf passiv genutzten Geräten (z. B. Monitor an Platz) verwendet werden\r\n      // this.interval = setInterval(()  => this.forceUpdate(), 1000)\r\n    }\r\n  }\r\n\r\n  checkUser() \r\n  {\r\n    console.log(Config.prod)    \r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/checkuser.php\";\r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then( (res) => {\r\n      if (res.ok) {\r\n        res.json()\r\n        .then( (user) => {\r\n          if (user.retcode === 'OK') {\r\n            this.setState(() => ({user: user.user, isLoading1: false}));\r\n          } else {\r\n            // console.log(\"App.js/Checkuser: Authentifizierungsfehler\")\r\n            window.location.href = Config.protokoll + Config.hostname + Config.loginPage;\r\n          }\r\n        });\r\n      }\r\n    })\r\n  }\r\n  \r\n  setPermission() \r\n  {\r\n    const url = Config.protokoll + Config.hostname + \"/intern/api/checkpermission.php\";\r\n    // console.log(url)\r\n    fetch(url, {credentials: 'same-origin'})\r\n    .then( (res) => {\r\n      if (res.ok) {\r\n        res.json()\r\n        .then( (permissions) => {\r\n          // console.log(permitted.retcode)\r\n          this.setState(() => ({permissions: permissions.retcode, isLoading2: false}))\r\n        })\r\n      }\r\n    })\r\n  }\r\n  \r\n  render() \r\n  {\r\n    const { isLoading1, isLoading2 } = this.state;\r\n    if (Config.prod && (isLoading1 || isLoading2)) {\r\n      return <p>Loading...</p>\r\n    } else {\r\n      return (\r\n        <React.Fragment>\r\n          <div className=\"container\">\r\n            <div className=\"row\">\r\n              <div className=\"col text-left\">\r\n                <img src=\"/images/tcoplain_0,1x.png\" alt=\"TCO -Logo\" />\r\n              </div>\r\n              <div className=\"col\">\r\n                <span className=\"h6 text-center ml-2\"><a href=\"/intern/tafel/\" id=\"appname\">Platzbuchung</a></span> \r\n                <span className=\"text-center ml-2\"><small> ({this.state.user.vorname + ' ' + this.state.user.nachname})</small></span>\r\n              </div>\r\n              <div className=\"col\">\r\n                <div className=\"small align-bottom\"><span className=\"pl-5\"><a href=\"/intern/logout.php\"><img src=\"/images/logout.png\" alt=\"Logout\" /></a></span></div> \r\n              </div>\r\n            </div>\r\n          </div>\r\n              \r\n          <Routing userId = {this.state.user.id} permissions = {this.state.permissions}/>\r\n          <footer className=\"blockquote-footer\">(c) 2019 by Conny Roloff. Dem TC Olching zur kostenlosen Nutzung zur Verfügung gestellt.</footer>\r\n        </React.Fragment>\r\n      )}\r\n    }\r\n  }\r\n\r\n\r\nexport default App;\r\n  ","import 'babel-polyfill'; \r\nimport 'react-app-polyfill/ie11';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport App from './components/App';\r\n\r\nReactDOM.render((\r\n  <Router>\r\n    <App />\r\n  </Router>\r\n), document.getElementById('root'));\r\n\r\n// import index from \"./js/index\";\r\n"],"sourceRoot":""}